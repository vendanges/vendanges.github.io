<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>JSP JDBC  MySQL 数据库访问与操作 | 琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		<article>
	
		<h1>JSP JDBC  MySQL 数据库访问与操作</h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/java-server-pages/" rel="tag">java server pages</a>
			</span>
		
	</div>

	

	
		<p>在Java Server Pages语言之中，可通过各种关系数据库Oracle、SQL Server、MySQL来与Java Server pages进行访问与操作。</p>
<h2 id="什么是-JDBC"><a href="#什么是-JDBC" class="headerlink" title="什么是 JDBC"></a>什么是 JDBC</h2><p>JDBC（Java DataBase Connectivity）是Java平台核心类库的一个部分，他主要由一组标准接口和类组成，通常可使用JBDC执行<code>与指定的数据库建立连接、向以连接的数据库建立连接、处理SQL命令的返回结果</code>，本文主要使用JDBC进行对数据库进行操作即访问。</p>
<h3 id="添加数据库驱动程序"><a href="#添加数据库驱动程序" class="headerlink" title="添加数据库驱动程序"></a>添加数据库驱动程序</h3><p>由于本书使用的是MySQL8数据库，所以需要添加相应的MySQL8数据库驱动程序，而流程就是<code>http://www.jiangxue.org.cn/mysql-connector-java-8.0.19.jar</code>进行下载，之后将下载后的jar文件添加到项目工程中的<code>WEB-INF/bin</code>目录下即可。</p>
<h3 id="导入数据库驱动程序语法"><a href="#导入数据库驱动程序语法" class="headerlink" title="导入数据库驱动程序语法"></a>导入数据库驱动程序语法</h3><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="连接数据库前期操作"><a href="#连接数据库前期操作" class="headerlink" title="连接数据库前期操作"></a>连接数据库前期操作</h2><h3 id="新建数据库"><a href="#新建数据库" class="headerlink" title="新建数据库"></a>新建数据库</h3><p>在Java Server pages中，连接数据库前提是指定一个数据库进行连接，之后在进行一些相关的操作，本章我们需要新建一个<code>testsp</code>库，其MySQL语法为：<br><img src="/_v_images/20201203092845546_1991465929.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE DATABASE testsp;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure>
<h4 id="查看数据库列表"><a href="#查看数据库列表" class="headerlink" title="查看数据库列表"></a>查看数据库列表</h4><p>在新建完数据库后，可使用以下MySQL语法进行查询：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| message_tal        |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">| testsp             |</span><br><span class="line">| user_zsun          |</span><br><span class="line">+--------------------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h3 id="新建数据库表"><a href="#新建数据库表" class="headerlink" title="新建数据库表"></a>新建数据库表</h3><h4 id="进入数据库"><a href="#进入数据库" class="headerlink" title="进入数据库"></a>进入数据库</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use testsp</span><br><span class="line">Database changed</span><br></pre></td></tr></table></figure>
<h4 id="新建数据库表-1"><a href="#新建数据库表-1" class="headerlink" title="新建数据库表"></a>新建数据库表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE testuser (</span><br><span class="line">    -&gt; name char(15),</span><br><span class="line">    -&gt; age int(20)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.03 sec)</span><br></pre></td></tr></table></figure>
<h3 id="插入表数据"><a href="#插入表数据" class="headerlink" title="插入表数据"></a>插入表数据</h3><h4 id="sunone"><a href="#sunone" class="headerlink" title="sunone"></a>sunone</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO testuser(name,age) VALUES(&#x27;sunone&#x27;,21);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure>
<h4 id="kuntwo"><a href="#kuntwo" class="headerlink" title="kuntwo"></a>kuntwo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO testuser(name,age) VALUES(&#x27;kuntwo&#x27;,22);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="JSP数据库操作"><a href="#JSP数据库操作" class="headerlink" title="JSP数据库操作"></a>JSP数据库操作</h2><p>在Java Server Pages之中，可通过Java Server Pages 中的指令标记（<code>page</code>）以及动作标记（<code>include</code>）或者使用局部变量（<code>&lt;%</code>）进行连接，本书主要使用include动作标记进行连接即操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;sql:setDataSource var=&quot;snapshot&quot; driver=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">	url=&quot;jdbc:mysql://localhost:3306/数据库?characterEncoding=utf-8&quot;</span><br><span class="line">	 user=&quot;数据库帐号&quot; password=&quot;数据库密码&quot;/&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>sql:DataSource</td>
<td>连接数据库</td>
<td></td>
</tr>
<tr>
<td>sql:query</td>
<td>执行数据库语句</td>
<td></td>
</tr>
<tr>
<td>forEach</td>
<td>定义迭代标记</td>
<td></td>
</tr>
<tr>
<td>out</td>
<td>输出数据</td>
<td></td>
</tr>
</tbody></table>
<h3 id="连接MySQL数据库"><a href="#连接MySQL数据库" class="headerlink" title="连接MySQL数据库"></a>连接MySQL数据库</h3><h4 id="普通连接"><a href="#普通连接" class="headerlink" title="普通连接"></a>普通连接</h4><h5 id="添加外部驱动"><a href="#添加外部驱动" class="headerlink" title="添加外部驱动"></a>添加外部驱动</h5><p>在连接数据库之前，需要引入<code>jstl.jar，以及mysql-connector-java-8.0.22.jar</code>外部jar包，可通过分别访问<code>http://www.jiangxue.org.cn/jstl-1.2.jar</code>以及&#96;&#96;&#96;&#96;<a target="_blank" rel="noopener" href="http://www.jiangxue.org.cn/mysql-connector-java-8.0.22.jar%60%60%60%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%90%8E%E7%A7%BB%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%88%B0%60%60%60WEB-INF/lib%60%60%60%E4%B9%8B%E4%B8%AD%E5%8D%B3%E5%8F%AF%EF%BC%8C%E5%A6%82%E7%BC%BA%E5%B0%91jstl.jar%E5%8C%85%E5%88%99%E4%BC%9A%E5%9C%A8%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF500%E7%9A%84%E9%94%99%E8%AF%AF%E3%80%82">http://www.jiangxue.org.cn/mysql-connector-java-8.0.22.jar```进行下载，后移动添加到```WEB-INF/lib```之中即可，如缺少jstl.jar包则会在运行过程中出现错误500的错误。</a></p>
<h5 id="引入import-taglib"><a href="#引入import-taglib" class="headerlink" title="引入import taglib"></a>引入import taglib</h5><p>Java Server Pages之中可通过分别引入Java 对应包以及外部驱动可进行MySQL Jsp&amp;Java类及页面的编写，需要引入的包如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.io.*,java.util.*,java.sql.*&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;javax.servlet.http.*,javax.servlet.*&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/sql&quot;</span> prefix=<span class="string">&quot;sql&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<h4 id="连接池链接"><a href="#连接池链接" class="headerlink" title="连接池链接"></a>连接池链接</h4><p>在所有的开发语言之中，使当前页面或程序连接数据库都是一个消耗资源的活动，需要及分钟或几秒中的时间来执行连接数据库在最后操作数据库这一时间消耗，如对一个大型的动态网站，在几百人甚至几千人、几万人频繁的分别请求或连接数据库则会导致服务器崩溃或服务器连接较慢的问题。<br>从上图可以看出，用户1通过请求数据库中的线程，然后在请求到<code>连接池（也即缓冲池）</code>来取得一个链接<code>（首先连接池中有一定的数量连接）</code>，然后使用<code>完毕之后将当前的连接放回到连接池之中</code>。<br>通常，在第一次连接池时，需要花费几秒或几分的连接时间，&#96;&#96;&#96;导致这种问题的原因则是连接池中没有连接，而第二次连接中连接池就有了可用的连接，可直接从连接池中获得连接来访问目标数据库。</p>
<h5 id="NewFile-jsp"><a href="#NewFile-jsp" class="headerlink" title="NewFile.jsp"></a>NewFile.jsp</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">    &lt;%@ page import=&quot;java.sql.*&quot;%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:useBean id=&quot;conpool&quot; class=&quot;bean.SqlLink&quot; scope=&quot;application&quot; /&gt;</span><br><span class="line">&lt;body bgcolor=&quot;AliceBule&quot;&gt;</span><br><span class="line">	&lt;%</span><br><span class="line">		Connection connection = null;</span><br><span class="line">		Statement statement = null;</span><br><span class="line">		ResultSet resultset = null;</span><br><span class="line">		</span><br><span class="line">		try &#123;</span><br><span class="line">			// 使用在SqlLink中定义的构造方法getOneCon连接池中获取一个连接对象</span><br><span class="line">			connection = conpool.getOneCon();</span><br><span class="line">			if (connection == null) &#123;</span><br><span class="line">			    // // 如数据库连接池不足或为空则输出</span><br><span class="line">			 	out.print(&quot;No!&quot;);			</span><br><span class="line">			 	return;</span><br><span class="line">			&#125;</span><br><span class="line">			statement = connection.createStatement();</span><br><span class="line">			resultset = statement.executeQuery(&quot;SELECT * FROM testuser&quot;);</span><br><span class="line">			out.print(&quot;&lt;table border=1&gt;&quot;);</span><br><span class="line">				out.print(&quot;&lt;tr&gt;&quot;);</span><br><span class="line">					out.print(&quot;&lt;th&gt;name&lt;/th&gt;&quot;);</span><br><span class="line">					out.print(&quot;&lt;th&gt;age&lt;/th&gt;&quot;);</span><br><span class="line">				out.print(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">			while (resultset.next()) &#123;</span><br><span class="line">				out.print(&quot;&lt;tr&gt;&quot;);</span><br><span class="line">					out.print(&quot;&lt;td&gt;&quot;+ resultset.getString(1) + &quot;&lt;/td&gt;&quot;);</span><br><span class="line">					out.print(&quot;&lt;td&gt;&quot;+ resultset.getString(2) + &quot;&lt;/td&gt;&quot;);</span><br><span class="line">				out.print(&quot;&lt;/tr&gt;&quot;);</span><br><span class="line">			&#125;</span><br><span class="line">			out.print(&quot;&lt;/table&gt;&quot;);</span><br><span class="line">		&#125; catch (SQLException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; finally &#123;</span><br><span class="line">			try &#123;</span><br><span class="line">				if (resultset != null) &#123;</span><br><span class="line">					resultset.close();</span><br><span class="line">				&#125;</span><br><span class="line">				if (statement != null) &#123;</span><br><span class="line">					statement.close();</span><br><span class="line">				&#125;</span><br><span class="line">				if (resultset != null) &#123;</span><br><span class="line">					// 通过调用releaseCon方法将连接返回至连接池中</span><br><span class="line">					conpool.releaseCon(connection);</span><br><span class="line">				&#125; </span><br><span class="line">			&#125; catch (SQLException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h5 id="SqlLink-java"><a href="#SqlLink-java" class="headerlink" title="SqlLink.java"></a>SqlLink.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bean;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlLink</span> &#123;</span><br><span class="line">	ArrayList&lt;Connection&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Connection&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//Set SqlLink 15</span></span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">SqlLink</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Class.forName(<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// Sql Link set up 15</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> link=<span class="number">0</span>;link&lt;<span class="number">15</span>;link++) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/testsp?characterEncoding=utf-8&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;password&quot;</span>);</span><br><span class="line">				list.add(connection);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// Link SQL</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">synchronized</span> Connection <span class="title function_">getOneCon</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (list.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="comment">// 移除连接池中的一个连接</span></span><br><span class="line">			<span class="keyword">return</span> list.remove(<span class="number">0</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="comment">// 如连接对象用完</span></span><br><span class="line">			<span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 将连接返还连接池中</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">releaseCon</span><span class="params">(Connection connection)</span> &#123;</span><br><span class="line">		list.add(connection);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数据库查询、插入、删除"><a href="#数据库查询、插入、删除" class="headerlink" title="数据库查询、插入、删除"></a>数据库查询、插入、删除</h2><h3 id="数据库查询"><a href="#数据库查询" class="headerlink" title="数据库查询"></a>数据库查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*,java.sql.*&quot; %&gt;</span><br><span class="line">&lt;%@ page import=&quot;javax.servlet.http.*,javax.servlet.*&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; prefix=&quot;sql&quot; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;sql:setDataSource var=&quot;snapshot&quot; driver=&quot;com.mysql.jdbc.Driver&quot;</span><br><span class="line">	url=&quot;jdbc:mysql://localhost:3306/testsp?characterEncoding=utf-8&quot;</span><br><span class="line">	 user=&quot;username&quot; password=&quot;password&quot;/&gt;</span><br><span class="line">&lt;sql:query var=&quot;result&quot; dataSource=&quot;$&#123;snapshot&#125;&quot;&gt;SELECT * FROM testuser;&lt;/sql:query&gt;</span><br><span class="line"></span><br><span class="line">&lt;table border=&quot;1&quot; width=&quot;100%&quot;&gt;</span><br><span class="line">	&lt;tr&gt;</span><br><span class="line">		&lt;th&gt;name&lt;/th&gt;</span><br><span class="line">		&lt;th&gt;age&lt;/th&gt;</span><br><span class="line">	&lt;/tr&gt;</span><br><span class="line">&lt;c:forEach var=&quot;row&quot; items=&quot;$&#123;result.rows&#125;&quot;&gt;</span><br><span class="line">	&lt;tr&gt;</span><br><span class="line">		&lt;td&gt;&lt;c:out value=&quot;$&#123;row.name&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class="line">		&lt;td&gt;&lt;c:out value=&quot;$&#123;row.age&#125;&quot;/&gt;&lt;/td&gt;</span><br><span class="line">	&lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="数据库插入"><a href="#数据库插入" class="headerlink" title="数据库插入"></a>数据库插入</h3><p>在Java Server pages之中，可使用executeUpdate(String sql)方法主要用于执行<code>INSERT\UPDATE</code>的操作，即插入和删除等数据库语句，本次主要使用局部语句进行编写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*,java.sql.*&quot; %&gt;</span><br><span class="line">&lt;%@ page import=&quot;javax.servlet.http.*,javax.servlet.*&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; prefix=&quot;sql&quot; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">	Connection connection = null;	</span><br><span class="line">	Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">	connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/testsp&quot;,&quot;root&quot;,&quot;password&quot;);</span><br><span class="line">	</span><br><span class="line">	try &#123;</span><br><span class="line">		Statement stringdata = connection.createStatement();</span><br><span class="line">		String myData = &quot;INSERT INTO testuser(name,age) VALUES(&#x27;kunkun&#x27;,10)&quot;;</span><br><span class="line">		stringdata.executeUpdate(myData);</span><br><span class="line">		out.print(&quot;Yes!&quot;);</span><br><span class="line">	&#125; catch(SQLException e) &#123;</span><br><span class="line">		out.print(&quot;No!&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="数据库删除"><a href="#数据库删除" class="headerlink" title="数据库删除"></a>数据库删除</h3><p>于数据库插入语句一样，都是使用<code>executeUpdate(String sql)</code>方法来执行<code>INSERT\UPDATE</code>的插入和删除的数据库语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;</span><br><span class="line">    pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%@ page import=&quot;java.io.*,java.util.*,java.sql.*&quot; %&gt;</span><br><span class="line">&lt;%@ page import=&quot;javax.servlet.http.*,javax.servlet.*&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;</span><br><span class="line">&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; prefix=&quot;sql&quot; %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">&lt;title&gt;Insert title here&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">	Connection connection = null;	</span><br><span class="line">	Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</span><br><span class="line">	connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/testsp&quot;,&quot;root&quot;,&quot;password&quot;);</span><br><span class="line">	</span><br><span class="line">	try &#123;</span><br><span class="line">		Statement stringdata = connection.createStatement();</span><br><span class="line">		String myData = &quot;DELETE FROM testuser WHERE name = &#x27;kunkun&#x27;&quot;;</span><br><span class="line">		stringdata.executeUpdate(myData);</span><br><span class="line">		out.print(&quot;Yes!&quot;);</span><br><span class="line">	&#125; catch(SQLException e) &#123;</span><br><span class="line">		out.print(&quot;No!&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
	

	
		<span class="different-posts"><a href="/2022/04/21/java/Java%20server%20pages/12.JSP%20JDBC%20MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E4%B8%8E%E6%93%8D%E4%BD%9C/" onclick="window.history.go(-1); return false;">⬅️ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
