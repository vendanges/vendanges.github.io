<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Spring Ioc | 琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		<article>
	
		<h1>Spring Ioc</h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>控制反转（IoC，Inversion of Control）是Spring 框架中的核心，而这核心技术在他的官方文档<code>&quot;/docs/spring-framework-reference/core.html#spring-core&quot;</code>之中，第一句话标题就是”核心技术“。通常IoC也可以称之为依赖注入（DI，De），在此过程中，对象会通过构造函数参数，通过工厂参数在构造或从工厂方法中返回后的对象实例上设置的属性来定义其依赖项。<br>也就是说，当某个Java对象需要调用另一个Java对象时，在正常且传统的模式下，通常会使用<code>new来实例化</code>该类，而在之后出现的Spring时，则对象的实例不需要有你来创建，而是由Spring容器来创建，控制程序之间的关系。</p>
<h2 id="Spirng-常用注解"><a href="#Spirng-常用注解" class="headerlink" title="Spirng 常用注解"></a>Spirng 常用注解</h2><h3 id="声明Bean-注解"><a href="#声明Bean-注解" class="headerlink" title="声明Bean 注解"></a>声明Bean 注解</h3><p>Spring框架中，使用XML配置文件可以简单的配置Bean，但如果项目庞大需要Bean装配时，将会导致XML配置文件过于庞大，不方便以后的维护和拓展，因此衍生出了注解（annotaion）的方式去配置Bean：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@Component</td>
<td>一个泛化的概念，仅仅表示一个组件对象（bean），可以作用在让你和层次之上，没有明确的角色</td>
<td>Bean</td>
</tr>
<tr>
<td>@Repository</td>
<td>用于数据访问层（DAO）的类标识为Bean，即注解数据访问层Bean，功能与@Component 相同</td>
<td>DAO</td>
</tr>
<tr>
<td>@Service</td>
<td>用于标注一个业务逻辑组件类（Service层），功能与@Component相同</td>
<td>Service</td>
</tr>
<tr>
<td>@Controller</td>
<td>该注解用于标注一个控制器组件类（Spring MVC的Controller)，功能与@Component相同</td>
<td>Spring MVC</td>
</tr>
</tbody></table>
<h3 id="注入Bean-注解"><a href="#注入Bean-注解" class="headerlink" title="注入Bean 注解"></a>注入Bean 注解</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@Autowired</td>
<td>可对成员变量、方法及构造方法进行标注，完成自动装配工作，通过@Autowired可消除<code>set</code>和<code>get</code>方法，默认按照Bean的类型进行装配</td>
<td></td>
</tr>
<tr>
<td>@Resource</td>
<td>与@Autowired的功能一样，区别与该注解默认按照名称来装配注入，只有当找不到名称匹配的Bean时才会按照类型来装配注入。可结合@Qualifier注解一起搭配食用可以按照名称来进行装配</td>
<td></td>
</tr>
<tr>
<td>@Resource</td>
<td>@Resource有两个属性，分别为name和type，Name属性指定Bean实例名称，而按照名称来装配注入;Type属性则指定Bean类型，即安装Bean的类型进行装配</td>
<td></td>
</tr>
<tr>
<td>@Qualifier</td>
<td>可与@Autowired注解配合使用，<strong>当@Autowired注解需要按照名称来进行装配注入时</strong>，则需要结合该注解进行使用，而@Qualifier注解可以指定Bean实例名</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Java-配置注解"><a href="#Java-配置注解" class="headerlink" title="Java 配置注解"></a>Java 配置注解</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@Configuration</td>
<td>声明一个Java的配置类，相当于Spring中的XML配置文件</td>
<td>XML</td>
</tr>
<tr>
<td>@ComponentScan</td>
<td>扫描使用的注解包，并创建指定的ConfigAnnotation的配置类</td>
<td>XML</td>
</tr>
</tbody></table>
<h2 id="基于注解的依赖注入"><a href="#基于注解的依赖注入" class="headerlink" title="基于注解的依赖注入"></a>基于注解的依赖注入</h2><p>本文主要使用&#96;&#96;&#96;@Override、@Resource、@Repository、@Controller、@Autowired、@Configuration、@ComponentScan等注解来实现Spring xml配置文件来实现配置、注解、依赖、注入等方式，而这也是Spring Boot所推荐的配置方式：</p>
<h3 id="所需的外部Jar开发包"><a href="#所需的外部Jar开发包" class="headerlink" title="所需的外部Jar开发包"></a>所需的外部Jar开发包</h3><p>本文需实现<code>基于注解的依赖注入</code>，需要使用commons-logging-1.2.jar、spring-aop-5.1.4-RELEASE.jar、spring-beans-5.1.4.RELEASE.jar、spring-context-5.1.4.RELEASE.jar、spring-core-5.1.4.RELEASE.jar、spring-expression-5.1.4.RELEASE.jar等jar开发包引入至项目文件中<code>WebContent/WEB-INF/lib</code>目录下即可。</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>TestDao.java</td>
<td></td>
<td>Dao</td>
</tr>
<tr>
<td>TestDaoImpl.java</td>
<td>@Repository</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>TestService.java</td>
<td></td>
<td>Service</td>
</tr>
<tr>
<td>TestServiceImpl.java</td>
<td>@Service、@Resource、@Override</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>TestController.java</td>
<td>@Controller、@Autowired</td>
<td>Controller</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>ConfigAnnotation.java</td>
<td>@Configuration、@ComponentScan</td>
<td>annotation</td>
</tr>
<tr>
<td>TestAnnotation.java</td>
<td>@Controller、@Autowired</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Dao"><a href="#Dao" class="headerlink" title="Dao"></a>Dao</h3><h4 id="TestDao-java"><a href="#TestDao-java" class="headerlink" title="TestDao.java"></a>TestDao.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TestDaoImpl-java"><a href="#TestDaoImpl-java" class="headerlink" title="TestDaoImpl.java"></a>TestDaoImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository(&quot;testDao&quot;)</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 用于数据访问层（DAO）的类标识为Bean在Service层使用@Repository </span></span><br><span class="line"><span class="comment"> * （name =&quot;testDao&quot;) 注入 Bean,testDao</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="meta">@Override()</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;testdao save&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><h4 id="TestService-java"><a href="#TestService-java" class="headerlink" title="TestService.java"></a>TestService.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.service;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestService</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TestServiceImpl-java"><a href="#TestServiceImpl-java" class="headerlink" title="TestServiceImpl.java"></a>TestServiceImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> annotation.dao.TestDao;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Service(&quot;testService&quot;)</span>  <span class="comment">// 相当于@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TestService</span> &#123;</span><br><span class="line">	<span class="meta">@Resource(name = &quot;testDao&quot;)</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * @Resource 相当于使用了@Autowired，原因是@Resource与@Autowire够能差不多</span></span><br><span class="line"><span class="comment">	 * 唯一的区别是该注解默认按照名称来装配注入只有当找不到名称匹配的Bean是才会按照类型来装配注入</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> TestDao testDao;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		testDao.save();</span><br><span class="line">		System.out.println(<span class="string">&quot;testService save&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><h4 id="TestController-java"><a href="#TestController-java" class="headerlink" title="TestController.java"></a>TestController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> annotation.service.TestService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> TestService testService;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		testService.save();</span><br><span class="line">		System.out.println(<span class="string">&quot;testController save&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="annotation"><a href="#annotation" class="headerlink" title="annotation"></a>annotation</h3><h4 id="ConfigAnnotation-java"><a href="#ConfigAnnotation-java" class="headerlink" title="ConfigAnnotation.java"></a>ConfigAnnotation.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;annotation&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigAnnotation</span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * @Configuration 声明该类是一个配置类，类似与Spring的XML配置文件</span></span><br><span class="line"><span class="comment">	 * @ComponentScan 可自动扫描“annotation”包下的使用注解，并注册为Bean</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="TestAnnotation-java"><a href="#TestAnnotation-java" class="headerlink" title="TestAnnotation.java"></a>TestAnnotation.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> annotation.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> annotation.service.TestService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> TestService testService;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		testService.save();</span><br><span class="line">		System.out.println(<span class="string">&quot;testController save&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
	

	
		<span class="different-posts"><a href="/2022/04/21/java/spring/3.Spring%20IoC/" onclick="window.history.go(-1); return false;">⬅️ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
