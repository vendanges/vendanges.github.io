<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Java Spring AOP | 琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		<article>
	
		<h1>Java Spring AOP</h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<h2 id="Spring-AOP-面向切面，Asoect-Oriented-Programming"><a href="#Spring-AOP-面向切面，Asoect-Oriented-Programming" class="headerlink" title="Spring AOP(面向切面，Asoect-Oriented Programming)"></a>Spring AOP(面向切面，Asoect-Oriented Programming)</h2><p>Spring AOP（面向切面，Asoect-Oriented Programming）即面向切面变成，依赖并与OO（面向对象，Object Oriented）即面向对象编程相辅相成，这主要体现在当面向切面过程时，先对业务逻辑进行抽象，而这个业务逻辑抽象是由面向对象（OO，Object Oriented）。在面向切面编程之中，最基本的单元是切面（Aspect）:</p>
<h3 id="Asoect-Oriented-Programming-面向切面术语"><a href="#Asoect-Oriented-Programming-面向切面术语" class="headerlink" title="Asoect-Oriented Programming 面向切面术语"></a>Asoect-Oriented Programming 面向切面术语</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>切面 (Aspect)</td>
<td>至封装横切到系统功能（事物处理）的类;</td>
<td>1</td>
</tr>
<tr>
<td>连接点 (Joinpoint)</td>
<td>指程序运行中的一些时间点，如方法的异常或抛出</td>
<td>2</td>
</tr>
<tr>
<td>切入点 (Pointcut)</td>
<td>指需要处理的连接点</td>
<td>3</td>
</tr>
<tr>
<td>通知 (增强处理)</td>
<td>由切面添加到特定的连接点（满足切入点规则）的一段代码</td>
<td>4</td>
</tr>
<tr>
<td>引入 (Introduction)</td>
<td>允许在现有的实现类中添加自定义的方法以及属性</td>
<td>5</td>
</tr>
<tr>
<td>目标对象 (Target Object)</td>
<td>指所有被通知的对象</td>
<td>6</td>
</tr>
<tr>
<td>代理 (Proxy)</td>
<td>通知应用到目标对象之后，被动态创建的对象</td>
<td>7</td>
</tr>
<tr>
<td>织入 (Weaving)</td>
<td>将切面代码插入到目标对象上，从而生成代理对象的不同</td>
<td>8</td>
</tr>
</tbody></table>
<p>通俗点的来讲就是：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>切面</td>
<td>就是将所有共有或集成的功能实现，如我们可以将一块一块的组建合并为一个切面</td>
<td>1</td>
</tr>
<tr>
<td>通知</td>
<td>也就是且面的具体实现，以指定的切入点作为规则来寻找或添加的一段代码</td>
<td>2</td>
</tr>
<tr>
<td>连接点</td>
<td>也就是说程序运行中能够插入切面的连接地点</td>
<td>3</td>
</tr>
<tr>
<td>切入点</td>
<td>即用于定义通知应该切入到那些的链接点上（不同的通知用于需要切入不同的连接点上）</td>
<td>4</td>
</tr>
<tr>
<td>目标对象</td>
<td>也就是书所有被通知的对象，都是目标对象</td>
<td>5</td>
</tr>
<tr>
<td>代理对象</td>
<td>当通知到目标对象之后，就会被变成一个动态的对象 <strong>代理对象的功能等于目标对象的核心业务逻辑功能+共有对象功能</strong>是程序运行中的产物</td>
<td>6</td>
</tr>
<tr>
<td>织入</td>
<td>将切面代码插入到目标的对象上，生成代理对象的不同</td>
<td>7</td>
</tr>
</tbody></table>
<h4 id="切面（Aspect）"><a href="#切面（Aspect）" class="headerlink" title="切面（Aspect）"></a>切面（Aspect）</h4><p>通过上图可以看出，通过切面Aspect分别在，在业务类1和业务2中可以看出，分别加入了<code>日志记录、性能统计、安全控制、事物处理</code>等操作。也就是说在一个类中，加入了日志记录、性能统计、安全控制、事物处理等功能或构造方法。</p>
<h4 id="切入点（Pointcut）"><a href="#切入点（Pointcut）" class="headerlink" title="切入点（Pointcut）"></a>切入点（Pointcut）</h4><p>切入点（Pointcut）是指需要处理的连接点，在Spring AOP面向切面编程中，所有的方法执行都是连接点，而切入点是一个描述信息，修饰的是链接点，可通过切入点来链接需要被处理，而切面、连接点、切入点的关系如下;<br>而连接点即程序运行中的调用或异常抛出，但切入点主要处理需要处理的连接点（在Spring 面向切面中，所有方法都是连接点），而切面指的就是事物处理的类。</p>
<h3 id="AspectJ-基于注解开发"><a href="#AspectJ-基于注解开发" class="headerlink" title="AspectJ 基于注解开发"></a>AspectJ 基于注解开发</h3><p>AspectJ是一个面向切面AOP的一个框架，扩展了Java语言和定义了AOP语法，基于注解的开发AsoectJ会比和XML配置开发Aspect便捷许多没而Spring中通知的目标方法的连接点位置主要可以分为以下六种类型：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>环绕通知</td>
<td>在目标方法执行前和执行后的实施增强</td>
<td>1</td>
</tr>
<tr>
<td>前置通知</td>
<td>在目标方法执行前实施的增强</td>
<td>2</td>
</tr>
<tr>
<td>后置返回通知</td>
<td>在目标方法成够执行后实施增强</td>
<td>3</td>
</tr>
<tr>
<td>最终通知即后置通知</td>
<td>目标方法执行后进行增强，与后置返回通知不同的不管发生异常，都要执行该通知</td>
<td>4</td>
</tr>
<tr>
<td>异常通知</td>
<td>在方法抛出异常后实施增加</td>
<td>5</td>
</tr>
<tr>
<td>引入通知</td>
<td>在目标类中添加一些新的方法和属性，用于修改目标类</td>
<td>6</td>
</tr>
</tbody></table>
<h4 id="AspectJ-注解"><a href="#AspectJ-注解" class="headerlink" title="AspectJ 注解"></a>AspectJ 注解</h4><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@Aspect</td>
<td>声明一个切面</td>
<td>1</td>
</tr>
<tr>
<td>@Pointcut</td>
<td>用于定义切入点，使用需要定义一个切入点的Viod方法，且方法体为空的普通方法</td>
<td>2</td>
</tr>
<tr>
<td>@Before</td>
<td>定义前置通知，通常为其指定value属性值</td>
<td>3</td>
</tr>
<tr>
<td>@AfterReturning</td>
<td>定义后置返回通知，使用时为其指定value属性值</td>
<td>4</td>
</tr>
<tr>
<td>@Around</td>
<td>用于定义一个环绕通知，在使用是也通常为其制定为value属性值 5</td>
<td></td>
</tr>
<tr>
<td>@AfterThrowing</td>
<td>定义一个异常通知，使用是通常为其指定value属性值</td>
<td>6</td>
</tr>
<tr>
<td>@After</td>
<td>用于定义后置即最终通知，使用时通常使用value属性值</td>
<td>7</td>
</tr>
</tbody></table>
<h4 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h4><p>在开发项目之前，需要使用六个Spring核心的依赖包，分别为<strong>aop、aspects、beans、context、core、expression</strong>，之后还需要<strong>commons-logging，下载地址为：“<a target="_blank" rel="noopener" href="https://downloads.apache.org//commons/logging/binaries/commons-logging-1.2-bin.zip%E2%80%9D">https://downloads.apache.org//commons/logging/binaries/commons-logging-1.2-bin.zip”</a></strong>，然后还需要一个外部第三方依赖包为<strong>aspectjweaver.jar，下载地址为：“<a target="_blank" rel="noopener" href="https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar%E2%80%9D">https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar”</a></strong></p>
<h4 id="创建实现类的接口-aspectj-dao"><a href="#创建实现类的接口-aspectj-dao" class="headerlink" title="创建实现类的接口 aspectj.dao"></a>创建实现类的接口 aspectj.dao</h4><h5 id="TestDao-java"><a href="#TestDao-java" class="headerlink" title="TestDao.java"></a>TestDao.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TestDaoImpl-java"><a href="#TestDaoImpl-java" class="headerlink" title="TestDaoImpl.java"></a>TestDaoImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository(&quot;testDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="comment">// @Override  用于方法重写</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;save - TestDaoImpl&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;modify - TestDaoImpl&quot;</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;delete - TestDaoImpl&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建切面类-aspectj-annotaition"><a href="#创建切面类-aspectj-annotaition" class="headerlink" title="创建切面类 aspectj.annotaition"></a>创建切面类 aspectj.annotaition</h4><h5 id="MyAspect-java"><a href="#MyAspect-java" class="headerlink" title="MyAspect.java"></a>MyAspect.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.annotaition;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span> 			<span class="comment">// 声明切面</span></span><br><span class="line"><span class="meta">@Component</span>		<span class="comment">// 让此且面成为Spring容器管理的Bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * Pointcut 定义了切入点</span></span><br><span class="line"><span class="comment">	 * 而&quot;execution(* aspectj.dao.*.*(..))&quot;定义了切入点表达式;</span></span><br><span class="line"><span class="comment">	 * 而切入点表达式的意思大概是匹配 “aspectj.dao“包中任意类的方法执行;</span></span><br><span class="line"><span class="comment">	 * 而execution()是表达式的主体;</span></span><br><span class="line"><span class="comment">	 * ”*“表示所有返回类型，而使用”*“可代表所有类型;</span></span><br><span class="line"><span class="comment">	 * 其中&quot;aspectj.dao&quot;表示的是需要匹配的包名，第二个&quot;*&quot;是类型，代表所有匹配的类</span></span><br><span class="line"><span class="comment">	 * 第三个”*“表示方法名，使用他表示所有方法;</span></span><br><span class="line"><span class="comment">	 * &quot;(...)&quot;是方法参数，其中”...“表示任意参数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Pointcut(&quot;execution(* aspectj.dao.*.*(..))&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">myPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Before(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinpoint)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;前置通知&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;目标类对象:&quot;</span> + joinpoint.getTarget()</span><br><span class="line">		+ <span class="string">&quot;被增强处理的方法:&quot;</span> + joinpoint.getSignature().getName());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 后置返回通知</span></span><br><span class="line">	<span class="meta">@AfterReturning(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturing</span><span class="params">(JoinPoint joinpoint)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;后置返回通知:&quot;</span> + <span class="string">&quot;模拟删除临时文件&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;被增强处理的方法&quot;</span> + joinpoint.getSignature().getName());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 环绕通知</span></span><br><span class="line">	<span class="meta">@Around(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint procedingjoinpoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		<span class="comment">// run</span></span><br><span class="line">		System.out.println(<span class="string">&quot;环绕开始，执行目标方法前模拟开启事物&quot;</span>);</span><br><span class="line">		<span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> procedingjoinpoint.proceed();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// end</span></span><br><span class="line">		System.out.println(<span class="string">&quot;环绕结束，执行目标方法后模拟关闭事物&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 异常通知</span></span><br><span class="line">	<span class="meta">@AfterThrowing(value=&quot;myPointCut()&quot;,throwing=&quot;e&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">except</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;异常通知&quot;</span> + <span class="string">&quot;程序执行异常&quot;</span> + e.getMessage());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 最终通知</span></span><br><span class="line">	<span class="meta">@After(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;最终通知，模拟释放&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置类-aspectj-config"><a href="#配置类-aspectj-config" class="headerlink" title="配置类 aspectj.config"></a>配置类 aspectj.config</h4><h5 id="AOPTest-java"><a href="#AOPTest-java" class="headerlink" title="AOPTest.java"></a>AOPTest.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspecti.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> aspectj.dao.TestDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AOPTest</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="comment">// 初始化AnnotationConfigApplicationContext</span></span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AspectjAOPConfig.class);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 从容器中获取增强后的目标对象</span></span><br><span class="line">		<span class="type">TestDao</span> <span class="variable">testDaoAdvice</span> <span class="operator">=</span> application.getBean(TestDao.class);</span><br><span class="line">		<span class="comment">// 执行方法</span></span><br><span class="line">		testDaoAdvice.save();</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">		testDaoAdvice.modify();</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">		testDaoAdvice.delete();</span><br><span class="line">		<span class="comment">// 关闭</span></span><br><span class="line">		application.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="AspectjAOPconfig-java"><a href="#AspectjAOPconfig-java" class="headerlink" title="AspectjAOPconfig.java"></a>AspectjAOPconfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspecti.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span>					<span class="comment">// 声明一个配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;aspectj&quot;)</span>		<span class="comment">// 自动扫描指定包下的注解</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span>		<span class="comment">// 开启Spring对Aspectj的支持</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AspectjAOPConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
	

	
		<span class="different-posts"><a href="/2022/04/21/java/spring/5.Java%20Spring%20Aspect-Oriented%20Programming/" onclick="window.history.go(-1); return false;">⬅️ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
