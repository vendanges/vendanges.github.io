<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>Node.js Buffer | 琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		<article>
	
		<h1>Node.js Buffer</h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/javascript/" rel="tag">javascript</a> <a class="article__tag-none-link" href="/tags/node-js/" rel="tag">node.js</a>
			</span>
		
	</div>

	

	
		<h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><p>缓冲区是内存区域，和直接与内存交互的编程语言 C、C++、Go 等相比，JavaScript 对这个操作很微乎其微，因此为了实现与内存区域打交道，Buffer 由此而生。</p>
<h3 id="Buffer-class"><a href="#Buffer-class" class="headerlink" title="Buffer class"></a>Buffer class</h3><p>Buffer 类主要的作用就是一个专门用于存放二进制数据的缓存区，是 Node 专门定义的一个类，用于弥补 JavaScript 自由的字符串类型无法满足大量二进制数据处理。</p>
<p>Buffer 是 Node 的一个核心库，因此为 Node 带来了另一种原始的数据存储方法（二进制），让 Node 处理 二进制数据。</p>
<p>所以 Buffer 库主要的用处就是需要 Node 处理 I&#x2F;O 的时候，就可以通过 Buffer 库进行一个处理，当然也可以进行字符编码或数据类型的转换。</p>
<p>缓冲区可以通过使用 <code>Buffer.[form(),alloc(),allocUnsafe()]</code> 方法进行构建，这也涉及到了 Buffer 方法：</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Info</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>buffer.alloc</td>
<td>可以创建任意大小的缓存区</td>
<td>type</td>
</tr>
<tr>
<td>2</td>
<td>buffer.from(arrayBuffer[, byteOffset[, length])</td>
<td>能够通过字符串、缓冲区、数组等方式创建缓存区</td>
<td>type</td>
</tr>
<tr>
<td></td>
<td>byteOffset</td>
<td>需要暴露的地一个索引值</td>
<td></td>
</tr>
<tr>
<td></td>
<td>length</td>
<td>暴露的字节数</td>
<td></td>
</tr>
<tr>
<td>0x1</td>
<td>buffer.byteLength()</td>
<td>查询字节长度</td>
<td>method</td>
</tr>
<tr>
<td>0x2</td>
<td>buffer.compare(target[,target1,target..])</td>
<td>比较两个缓冲区（buffer）对象是否相等，并返回 -1、0、1</td>
<td>method</td>
</tr>
<tr>
<td></td>
<td>0</td>
<td>与 target 相等返回 <code>0</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>如果 target 的 size 不同以及 fill 相等，则返回 <code>1</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td>-1</td>
<td>如果 target 的 fill 不相等，则返回 <code>-1</code></td>
<td></td>
</tr>
<tr>
<td>0x3</td>
<td>buffer.concat</td>
<td>将一个或多个缓存区对象合并为一个对象，合并后可以获取新的对象长度</td>
<td>method</td>
</tr>
<tr>
<td>0x4</td>
<td>buffer.entries()</td>
<td>用于返回缓冲区的 <code>[index,byte]</code></td>
<td>method</td>
</tr>
<tr>
<td>0x5</td>
<td>buffer.fill()</td>
<td>用于缓冲区填充</td>
<td>method</td>
</tr>
<tr>
<td>0x6</td>
<td>buffer.includes(values)</td>
<td>用于判断 values 是否在缓冲区（buffer）中</td>
<td>method</td>
</tr>
<tr>
<td>0x7</td>
<td>buffer.isEncoding</td>
<td>判断 Buffer 目前所支持的编码名称</td>
<td>method</td>
</tr>
<tr>
<td>0x8</td>
<td>buf.slice(start[,end])</td>
<td>用于将 buffe 内的 fill 进行切片</td>
<td>method</td>
</tr>
<tr>
<td>0x9</td>
<td>buf.toJSON()</td>
<td>将数据输出为 JSON 格式</td>
<td>method</td>
</tr>
<tr>
<td>0x10</td>
<td>buf.write(string[,offset,length,encoding])</td>
<td>将 string 写入 buffer 中</td>
<td>method</td>
</tr>
</tbody></table>
<h4 id="buffer-alloc"><a href="#buffer-alloc" class="headerlink" title="buffer.alloc"></a>buffer.alloc</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &lt;Buffer 01 01 01 01 01 01 01 01 01 01&gt;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回字节的长度</span></span><br><span class="line"><span class="keyword">var</span> buflen = <span class="title class_">Buffer</span>.<span class="title function_">byteLength</span>(buf)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buflen)</span><br></pre></td></tr></table></figure>

<p>创建一个大小为 10 的缓存区，且用 <code>1</code> 进行填充，并通过 <code>Buffer.byteLength</code> 来查询字节的长度。</p>
<blockquote>
<p>与 <code>length</code> 的区别是 <code>byteLength</code> 不会考虑用于将字符串转换为字节编码</p>
</blockquote>
<h4 id="buffer-fill-arrayBuffer-byteOffset-length"><a href="#buffer-fill-arrayBuffer-byteOffset-length" class="headerlink" title="buffer.fill(arrayBuffer[, byteOffset[, length])"></a>buffer.fill(arrayBuffer[, byteOffset[, length])</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过 Unit8Array 创建一个数组</span></span><br><span class="line"><span class="keyword">const</span> arrA = <span class="title class_">Uint8Array</span>.<span class="title function_">from</span>([<span class="number">0x61</span>, <span class="number">0x62</span>, <span class="number">0x63</span>, <span class="number">0x64</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arrB = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(arrA.<span class="property">buffer</span>, <span class="number">0</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(arrB.<span class="property">buffer</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// abcd</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">const</span> buff = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">0x61</span>, <span class="number">0x62</span>, <span class="number">0x63</span>, <span class="number">0x64</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buff.<span class="title function_">toString</span>())</span><br></pre></td></tr></table></figure>

<h5 id="buf-toJSON"><a href="#buf-toJSON" class="headerlink" title="buf.toJSON()"></a>buf.toJSON()</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过 Unit8Array 创建一个数组</span></span><br><span class="line"><span class="keyword">const</span> arrA = <span class="title class_">Uint8Array</span>.<span class="title function_">from</span>([<span class="number">0x61</span>, <span class="number">0x62</span>, <span class="number">0x63</span>, <span class="number">0x64</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arrB = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(arrA.<span class="property">buffer</span>, <span class="number">0</span>,<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(arrB.<span class="property">buffer</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// &#123; type: &#x27;Buffer&#x27;, data: [ 97, 98, 99, 100 ] &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toJSON</span>())</span><br><span class="line"></span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">const</span> buff = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">0x61</span>, <span class="number">0x62</span>, <span class="number">0x63</span>, <span class="number">0x64</span>])</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buff.<span class="title function_">toJSON</span>())</span><br></pre></td></tr></table></figure>

<h4 id="buffer-compare-target-target1-target…"><a href="#buffer-compare-target-target1-target…" class="headerlink" title="buffer.compare(target[,target1,target…])"></a>buffer.compare(target[,target1,target…])</h4><table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Info</th>
</tr>
</thead>
<tbody><tr>
<td>0x2</td>
<td>buffer.compare(target[,target1,target..])</td>
<td>比较两个缓冲区（buffer）对象是否相等，并返回 -1、0、1</td>
</tr>
<tr>
<td></td>
<td>0</td>
<td>与 target 相等返回 <code>0</code></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>如果 target 的 size 不同以及 fill 相等，则返回 <code>1</code></td>
</tr>
<tr>
<td></td>
<td>-1</td>
<td>如果 target 的 fill 不相等，则返回 <code>-1</code></td>
</tr>
</tbody></table>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf1 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> buf2 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="keyword">var</span> com = <span class="title class_">Buffer</span>.<span class="title function_">compare</span>(buf1,buf2)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(com)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf3 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>)</span><br><span class="line"><span class="keyword">const</span> buf4 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line"><span class="keyword">var</span> com1 = <span class="title class_">Buffer</span>.<span class="title function_">compare</span>(buf3,buf4)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(com1)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf5 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> buf6 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">10</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> com2 = <span class="title class_">Buffer</span>.<span class="title function_">compare</span>(buf5,buf6)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(com2)</span><br></pre></td></tr></table></figure>

<h4 id="buffer-concat"><a href="#buffer-concat" class="headerlink" title="buffer.concat()"></a>buffer.concat()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">3</span>)</span><br><span class="line"><span class="keyword">const</span> buf1 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">const</span> buf2 = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [buf, buf1, buf2]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> con = <span class="title class_">Buffer</span>.<span class="title function_">concat</span>(arr)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5 &lt;Buffer 00 00 00 00 00&gt;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Buffer</span>.<span class="title function_">byteLength</span>(con), con)</span><br></pre></td></tr></table></figure>

<h4 id="buffer-entries"><a href="#buffer-entries" class="headerlink" title="buffer.entries()"></a>buffer.entries()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello,world!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [ 0, 104 ]</span></span><br><span class="line"><span class="comment">    [ 1, 101 ]</span></span><br><span class="line"><span class="comment">    [ 2, 108 ]</span></span><br><span class="line"><span class="comment">    [ 3, 108 ]</span></span><br><span class="line"><span class="comment">    [ 4, 111 ]</span></span><br><span class="line"><span class="comment">    [ 5, 44 ]</span></span><br><span class="line"><span class="comment">    [ 6, 119 ]</span></span><br><span class="line"><span class="comment">    [ 7, 111 ]</span></span><br><span class="line"><span class="comment">    [ 8, 114 ]</span></span><br><span class="line"><span class="comment">    [ 9, 108 ]</span></span><br><span class="line"><span class="comment">    [ 10, 100 ]</span></span><br><span class="line"><span class="comment">    [ 11, 33 ]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> point <span class="keyword">of</span> buf.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(point)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 104</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf[<span class="number">0</span>])</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><figcaption><span>与直接通过 ```buf[0]``` 这种逐一输出更加的方便和快捷。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">#### buffer.fill</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">const buf = Buffer.alloc(5).fill(&#x27;hello&#x27;)</span><br><span class="line"></span><br><span class="line">// hello</span><br><span class="line">console.log(buf.toString())</span><br><span class="line"></span><br><span class="line">// or</span><br><span class="line">const buf2 = Buffer.alloc(5,&#x27;hello&#x27;)</span><br><span class="line">console.log(buf2.toString())</span><br></pre></td></tr></table></figure>


<h4 id="buffer-includes-values"><a href="#buffer-includes-values" class="headerlink" title="buffer.includes(values)"></a>buffer.includes(values)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;This is Buffer&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// true false</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">includes</span>(<span class="string">&#x27;is&#x27;</span>), buf.<span class="title function_">includes</span>(<span class="string">&#x27;as&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h4 id="buf-slice-start-end"><a href="#buf-slice-start-end" class="headerlink" title="buf.slice(start[,end])"></a>buf.slice(start[,end])</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;abcd&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> sli = buf.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ab</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sli.<span class="title function_">toString</span>())</span><br></pre></td></tr></table></figure>

<h4 id="buf-write-string-offset-length-encoding"><a href="#buf-write-string-offset-length-encoding" class="headerlink" title="buf.write(string[,offset,length,encoding])"></a>buf.write(string[,offset,length,encoding])</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">const</span> len = buf.<span class="title function_">write</span>(<span class="string">&#x27;buffer&#x27;</span>,<span class="number">0</span>,<span class="number">6</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`byte: <span class="subst">$&#123;buf&#125;</span> length: <span class="subst">$&#123;len&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>

<h3 id="字符编码转换"><a href="#字符编码转换" class="headerlink" title="字符编码转换"></a>字符编码转换</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> buffer = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello,world!&#x27;</span>, <span class="string">&#x27;ascii&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// hello,world!</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buffer.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 104 101 108 108</span></span><br><span class="line"><span class="comment"> * h -&gt; 104</span></span><br><span class="line"><span class="comment"> * e -&gt; 101</span></span><br><span class="line"><span class="comment"> * l -&gt; 108</span></span><br><span class="line"><span class="comment"> * l -&gt; 108</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buffer[<span class="number">0</span>],buffer[<span class="number">1</span>],buffer[<span class="number">2</span>],buffer[<span class="number">3</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>缓冲区是一个字节数据，因此可以像数组一样进行访问，除此它还支持数种编码的转换：</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Info</th>
<th>Type</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>uft8 （utf-8）</td>
<td>多字节的 Unicode 字符，许多网页和玩文档格式使用 <code>UFT-8</code> 也是 <strong>默认的字符编码</strong>（当 buffer 解码过程中如果 UTF-8 不是有效字符，将会以 unicode 替换字符 � 用于表示错误）</td>
<td>字符串</td>
</tr>
<tr>
<td>2</td>
<td>utf16le（utf-16le）</td>
<td>多字节编码的 Unicode 字符，与 utf8 不同的是字符串中每个字符都将使用 <strong>2个或4个</strong> 字节进行编码</td>
<td>字符串</td>
</tr>
<tr>
<td>3</td>
<td>latin1 （Latin-1）</td>
<td>即 ISO-8859-1 ，因此此编码仅支持 <strong>U+0000～U+00FF</strong> 的 Unicode 字符，每个字符都将使用单字节进行编码（一种一字节的字符串方式）</td>
<td>字符串</td>
</tr>
<tr>
<td>4</td>
<td>base64</td>
<td>一种基于 64 个可打印字符来表示二进制数据的方法，可打印的字母 <strong>a-z\A-Z</strong> 以及数字 <strong>0-9</strong>，此外还包含空白字符（空格、制表符或换行符）会被 buffer 忽略</td>
<td>二进制</td>
</tr>
<tr>
<td>5</td>
<td>base64url</td>
<td>一个对 base64 标准的修改，其目的是能将编码结果用于文件名或 URL 地址，当字符串通过 buffer 时，base64url 也将接受常规的 base64 编码转换。</td>
<td>二进制</td>
</tr>
<tr>
<td>6</td>
<td>hex（16 进制）</td>
<td>将每个字节转换为十六进制字符</td>
<td>二进制</td>
</tr>
<tr>
<td>7</td>
<td>ascii</td>
<td>仅用于 7 位数的 ASCII 数据，当通过 buffer 时，将会等效于 Lantin-1</td>
<td>旧字符</td>
</tr>
<tr>
<td>8</td>
<td>binary (Lation-1)</td>
<td>Lation-1 的别名，通过此编码列出的所有编码都会在字符串和二进制之间转换</td>
<td>旧字符</td>
</tr>
<tr>
<td>9</td>
<td>ucs2（utf-16le）</td>
<td>uft-16le 的别名，泛指 UTF-16 的一种变体，此编码不支持大于 U+FFFF 的字符</td>
<td>旧字符</td>
</tr>
</tbody></table>
<blockquote>
<p>可以通过使用 <code>buffer.isEncoding	</code> 方法来进行判断 Buffer 是否支持该编码类型。</p>
</blockquote>

	

	
		<span class="different-posts"><a href="/2022/04/21/javascript/node/5.Node.js%20Buffer/" onclick="window.history.go(-1); return false;">⬅️ Go back </a></span>

	

</article>

	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
