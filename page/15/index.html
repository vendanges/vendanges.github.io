<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">📖 <a href="/page/14">earlier posts</a> 📖</span>




	<article>
	
		<h1><a href="/2022/04/21/java/spring cloud/10.Spring cloud Sleuth and Zipkin/">Spring cloud Sleuth and Zipkin</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring-cloud/" rel="tag">spring cloud</a>
			</span>
		
	</div>

	

	
		<p>Sleuth 主要用于日志采样，而 Zipkin 用于实现服务链路追踪，他们分别是微服务中最为常用的项目之一，其中 Zipkin 可以实现数据存储（支持 ES、MySQL、cASSANDRA）以及简单部署和文档完善等优势深受开发者喜爱。</p>
<blockquote>
<p>Sleuth 由 Spring cloud 团队借助 Google Dapper、Twitter Zipkin、Apache Htrace 进行设计。而 Zipkin 还有一个 OpenZipkin 项目，是 Zipkin 的完全开源版本，项目由 2021年起源与 Twitter，同样基于 Google Dapper 论文进行实现。</p>
<blockquote>
<p>Dapper，一种大规模分布式系统跟踪基础设施<br>  <a target="_blank" rel="noopener" href="https://research.google/pubs/pub36356/">https://research.google/pubs/pub36356/</a></p>
</blockquote>
</blockquote>
<p>首先，我们需要来介绍下服务链路追踪的作用，现在很多文章一开始就跟你巴拉巴拉 Zipkin、HTrace 原理什么的，他们的基本概念就是监控微服务状态，及时发现并定位问题的点，并快速解决问题。</p>
<p>对于服务链路追踪，蛀牙的就是实现监控为服务系统，来提供及时且准确的性能报告，并统计请求所耗费的时间以及具体网络延迟情况并辅助开发&#x2F;运维人员分析并解决系统所存在的问题。</p>
<p>其实最为主要的还是通过他来快速定位故障，这也是解决问题最主要的原因    ——发现问题，通过服务链路追踪可以定位问题的故障点，并采取措施来解决问题，并提供快速检测或预警，隔离和修复问题等方式。</p>
<h2 id="Google-Dapper"><a href="#Google-Dapper" class="headerlink" title="Google Dapper"></a>Google Dapper</h2><p>Google Dapper 是一个在 2010 年 5 月由 Benjaim H. Sigelman, Luiz Andr’e Burrows， Pat Stephenson, Manoj Plakal, Donald Beaver, Saul jasper, Chandan shanbhag 发布于谷歌技术报告中的一篇关于大规模分布式系统跟踪的一篇论文。</p>
<p>他奠定了之后的 Sleuth 以及 Zipkin 的开发与实施，都提供了前期的架构和一种概念，起初 Dapper 是一个自包含的跟踪工具，后来发展为一个监控平台。</p>
<h3 id="跨度-Span"><a href="#跨度-Span" class="headerlink" title="跨度 (Span)"></a>跨度 (Span)</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210724215839.png"></p>
<p>跨度（Span）这是一个在 Dapper 中的一个基本工作单位，发送一个 RPC 请求，就是一个新的 Span，其中还包含了其他数据，例如描述、时间戳时间、注释这些。</p>
<p>从上图中，客户端（前端请求）所调用的服务单元，这个过程就是一次 Span ，发起请求的客户端或前端请求的 <code>Span id:1</code> ，而下一个请求的 <code>Span id:2</code> ……</p>
<p>他们都是一个父集关系因此  Span 还有一个 <code>parent id</code> 也就是父集 ID，父集的 ID 为 <code>no parent id</code> 也被称之为 <code>root parent</code>，那么 <code>Span id:2</code> 的服务自然为<code>parent id:1</code> </p>
<h3 id="跟踪-Trace"><a href="#跟踪-Trace" class="headerlink" title="跟踪 (Trace)"></a>跟踪 (Trace)</h3><p>之后为了将 Span 记录的更加完整，也就是最终形成一个完整的树状结构，那么也会有一个 <code>trace id</code>，他的主要作用就是将 <code>Span</code> 标注为一个组中，在可视化界面中更加的好理解。</p>
<h3 id="标注-Annotation"><a href="#标注-Annotation" class="headerlink" title="标注 (Annotation)"></a>标注 (Annotation)</h3><p>用于记录事件的存在，可以定义请求的开始和停止等信息，例如客户端发送了一个请求，Annotation 会描述的开始、服务器端获得、准本开始处理：</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Info</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>cs, Client Sent</td>
<td>客户端发送，客户端发送了请求</td>
</tr>
<tr>
<td>2</td>
<td>sr，Server Received</td>
<td>服务端收到了请求并开始处理（根据时间戳可以从 cs ～ sr 这段时间减时间戳获取网络延迟）</td>
</tr>
<tr>
<td>3</td>
<td>ss，Server Sent</td>
<td>服务器发送，在请求处理完成时进行标注（Annotation），这个时间戳减去 <code>sr</code> 的时间戳，就可以得到服务器端处理所需要的时间</td>
</tr>
<tr>
<td>4</td>
<td>cr，Client Received</td>
<td>客户端收到，表示 Span 结束，客户端已经成够收到了服务器端发送的相应（因此时间戳减去 <code>cs</code> 就是客户端从服务器接受响应所需的全部时间）</td>
</tr>
</tbody></table>
<h3 id="Sleuth-日志采样"><a href="#Sleuth-日志采样" class="headerlink" title="Sleuth 日志采样"></a>Sleuth 日志采样</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210724215851.png"></p>
<p>Sleuth 与 Spring Cloud 高度契合，兼容了 Zipkin、HTrace、Log-based 追踪为服务调用链路，而我们用 Sleuth 主实现的就是返回 Span\Trace id，主要使用到 <code>spring-cloud-starter-sleuth</code> 依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-sleuth&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>除此之外还有 Spring cloud 全局配置，<del>添加 <code>sleuth</code> 的配置项（在最新版本中无需添加）</del>，以及项目的 <code>application.name</code> 等：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">SleuthService</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">0.3</span>      <span class="comment"># 设置抽样采集率为 30%，默认为 0.1 即 10%</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8210</span></span><br></pre></td></tr></table></figure>


<h4 id="Application-java"><a href="#Application-java" class="headerlink" title="Application.java"></a>Application.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.logging.Logger;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 实现日志采样（msg echo log？）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> kunlun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/7/24</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> Logger.getLogger(DemoApplication.class.getName());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hey&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hey</span><span class="params">()</span> &#123;</span><br><span class="line">        LOG.info(<span class="string">&quot;return /hey view&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中 <code>Logger</code> 主要的作用就是将信息输出到控制台上，也就是通过 <code>@GetMapping</code> 进行请求所返回的相关信息，当然你也可以配合服务集群来实现服务消费者的作用。当访问 <a target="_blank" rel="noopener" href="http://localhost:8210/hey">http://localhost:8210/hey</a> 接口后，控制台输出格式为 <code>[应用名称，Trace id，Span id]</code> 直观点的就是 <code>SleuthService,9d1a88683cbacd11,9d1a88683cbacd11</code></p>
<p>如果启动后没有关于 Sleuth 相关的信息，那么可以通过 <code>application.yml</code> 全局配置文件中添加日志输出为 <code>DEBUG</code> 类型看看：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">ROOT:</span> <span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>

<h3 id="Zipkin"><a href="#Zipkin" class="headerlink" title="Zipkin"></a>Zipkin</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210724215859.png"></p>
<p>Zipkin 同样是基于 Google Dapper 由 Twitter 所开发的且已经被 Spring cloud 良好的集成，你可以理解为他是 Sleuth 的数据可视化版本，并且通过 <code>Annotation</code> 来展示服务的相关信息，但首先你需要下载 Zipkin 的控制台并运行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https:<span class="comment">//zipkin.io/quickstart.sh | bash -s</span></span><br><span class="line">java -jar zipkin.jar</span><br></pre></td></tr></table></figure>

<p>同时它还支持 Docker、从源代码运行等方式来启动，对于我来说通过 Jar 方式来执行已经非常便捷了，最坏的结果就是你需要先 <code>clone</code> 一下，然后在编译一下，之后在设置为 <code>bin</code> 一下，然后出错了又找一下，简单多了。</p>
<p>启动完后最为主要的是 <a target="_blank" rel="noopener" href="http://127.0.0.1:9411/">http://127.0.0.1:9411/</a> 这也是 Zipkin 的默认端口和地址，记录下来之后在项目中进行绑定并添加依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-consul-discovery&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-zipkin --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-zipkin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.2.8.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>实际上主要是 <code>spring-cloud-starter-zipkin</code> ，至于其他的只是我测试环境需要用到的，当然 <code>spring-boot-starter-web</code> 是可以不用加的，如果加了的话需要在配置文件中声明 <code>main-web-application-type=reactive</code> 来保证服务的正常启动<del>（Gateway 已经存在了 web）</del></p>
<h4 id="Application-yml"><a href="#Application-yml" class="headerlink" title="Application.yml"></a>Application.yml</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">Zipkin</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">hey</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://service-provider/hey</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/hey</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">locator:</span></span><br><span class="line">          <span class="comment"># 允许服务发现</span></span><br><span class="line">          <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">consul:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8500</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">service-name:</span> <span class="string">service-provider</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:9411</span></span><br><span class="line">    <span class="attr">sender:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">web</span></span><br><span class="line">  <span class="attr">main:</span></span><br><span class="line">    <span class="attr">web-application-type:</span> <span class="string">reactive</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8210</span></span><br></pre></td></tr></table></figure>

<p>之后请求相应的接口并重新在 Zipkin 控制台上点击 <code>RUN QUERY</code> 刷新下请求列表即可获取当前服务的响应以及依赖关系等更加详细的视图，读者可根据自身需要来进行查阅，但唯一不好的就是 Zipkin 不是异步刷新，需要手动点……，以及在查看详细请求数据的时候界面没有返回按钮（也许设计起初是为了靠浏览器自带的 &lt;- -&gt; 来实现窗口的返回）。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring cloud/1.系统架构的发展/">系统架构发展</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring-cloud/" rel="tag">spring cloud</a>
			</span>
		
	</div>

	

	
		<h2 id="单体应用"><a href="#单体应用" class="headerlink" title="单体应用"></a>单体应用</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210524202755.png"><br>在互联网的发展初期，用户数量少而造成的一般站点流量也非常的少，但服务器等硬件产品的价格较高。因此一般的开发者会选择将 <strong>站点的所有功能</strong> 集成在一起，来进行开发，这就是 <strong>单体应用</strong>。随着单体应用的发展，也出现了 MVC、MVP、MVVM等开发单体应用的程序依然可以满足业务的需求。</p>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><p><strong>而单体应用的有优点有</strong></p>
<ol>
<li>易于开发、测试、管理、部署</li>
<li>想对于微服务中可以避免开发</li>
</ol>
<p><strong>应用缺点</strong>：</p>
<ol>
<li>团队合作困难</li>
<li>代码的维护的较为无语</li>
<li>项目的重构很复杂</li>
<li>对项目的可扩展读有很大的阻碍</li>
<li>随着项目的资源越来越大，code 越来越多，会造成编译时的速率。</li>
</ol>
<p>为了解决这个问题，随着访问量的不断增大，数据访问框架 ORM的工作量过载导致数据库崩溃。单体应用可以根据集群来进行应对，由于他的缺点需要对之前的单体应用进行一定的拆分，因此 <strong>垂直应用</strong> 就出现了人们的视野中。</p>
<h2 id="垂直应用"><a href="#垂直应用" class="headerlink" title="垂直应用"></a>垂直应用</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210524202817.png"><br>为了解决上述单体应用随着访问量的不断增大，因此单体应用只能通过集群来进行解决和应对，而在此过程中衍生了垂直应用。垂直应用可以根据业务的需求来解决单体应用的缺点。</p>
<p>垂直应用即 <strong>使用分层设计的开发应用</strong>，也随着系统复杂度的增加，系统架构的变化和侧重点均不一样。之前介绍的单体应用 <strong>当网站流量小的时候，只需要一个应用将所有功能部署一起，来减少部署的节点和成本</strong>，而此时的 <strong>数据访问框架（ORM）</strong> 的工作量多少，成为了服务器是否崩溃的关键。</p>
<p>垂直应用为了解决这个问题，将单一用用拆分成互不干扰的多个应用，来提升效率，此时用于加速前端开发的 MVC 框架成为关键。我们将一个单体应用拆分成了三个单体应用，这样可以 <strong>解决高并发，资源分配的问题，并提高项目的扩展、容错性以及资源分配等</strong>。</p>
<h3 id="水平拆分"><a href="#水平拆分" class="headerlink" title="水平拆分"></a>水平拆分</h3><p>垂直应用的拆分可以分为 <strong>水平拆分</strong> 以及 <strong>垂直拆分</strong>，其中说平拆分主要是指根据 <strong>所属业务</strong>也进行划分。但是水平拆分会造成存在 <strong>重复造轮子</strong> 的问题，且难于维护，而优点是业务拆分后的互相影响较小。</p>
<h3 id="垂直拆分"><a href="#垂直拆分" class="headerlink" title="垂直拆分"></a>垂直拆分</h3><p>所谓垂直拆分，即根据按照 <strong>系统</strong> 来进行拆分，因此 <strong>Auth</strong> 可以被拆分为 <strong>登录和注册</strong>。垂直拆分的有点是可以按照分配资源和流量，以及垂直调用之间不会进行影响，但缺点是完全存在 <strong>重复造轮子</strong> 的问题。</p>
<h2 id="分布式应用应用系统"><a href="#分布式应用应用系统" class="headerlink" title="分布式应用应用系统"></a>分布式应用应用系统</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210525030136.png"><br>分布式应用系统是由 <strong>若干个独立的计算机集合</strong> ，而成的分布式应用系统。简单概述下就是可以将此堪称两个服务分别运行在两台主机中，他们的相互协作来最终完成一个功能或服务，从理论中来讲这将会被称之为 <strong>分布式系统</strong>。</p>
<p>当然，在上述中我们讲到了垂直应用，如果是相同的程序，将会被称之为 <strong>集群</strong>，通过不断的 <strong>横向扩展</strong> 来提升服务能力。</p>
<h3 id="关于横向和纵向扩展"><a href="#关于横向和纵向扩展" class="headerlink" title="关于横向和纵向扩展"></a>关于横向和纵向扩展</h3><p>横向和纵向扩展，也有人称之为水平扩展和垂直扩展，我们可以假设下当有一台服务器，每天经历了几千次请求天天崩，因此你需要提升服务器性能。此时 <strong>横向扩展</strong>就是多增加几台服务器一起进行服务，而 <strong>纵向扩展</strong> 则是将该服务器换成性能更好的服务器。</p>
<h2 id="服务治理"><a href="#服务治理" class="headerlink" title="服务治理"></a>服务治理</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210525030144.png"><br>随着服务数量的不断增加，服务中的资源浪费和调度等问题也会随之而来，此时服务治理（Service-Oriented Architecture (SOA) governance）的作用就起到了一个可以基于访问压力来实时管理集群的容量，从而提高集群的利用率。</p>
<p><strong>为什么要使用 SOA？</strong></p>
<ol>
<li>SOA 在市场中得到了广泛的使用，可以快速的响应并根据情况作出有效的更改</li>
<li>SOA 解决了 <strong>服务间的通信问题</strong> ，通过引入 ESB、技术规范、服务管理规范来解决不同服务之间的通信问题</li>
<li>SOA 解决了 <strong>基础服务的梳理</strong> 问题，以 SEB 为中心树立和规整了分布式服务</li>
<li>SOA 解决了 <strong>业务服务化的问题</strong>，将业务为驱动，将业务封装到服务中。</li>
<li>SOA 解决了 <strong>服务可复用</strong> 的问题，将业务功能设置为通用的业务服务，来实现业务的逻辑复用。</li>
</ol>
<h3 id="ESB"><a href="#ESB" class="headerlink" title="ESB"></a>ESB</h3><p>企业服务总线（ESB，The Enterpries Service Bus）可以将类似总线的基础设施将所有服务连接在一起。并作为服务治理中的通信中心，允许连接多个系统、应用和数据，并无终端地址连接多个系统。</p>
<h2 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210525030152.png"><br>需要庆幸的是，微服务（Microservices）采用的是服务治理中心，而不是在 SOA 架构中的中心话 ESB，因此服务的调度不需要知道 <strong>服务提供者的IP地址、端口号等</strong>，住需要知道在服务中心 <strong>注册了的服务名即可</strong>。</p>
<p>微服务指的是将 <strong>系统业务功能划分为极小的独立微服务，每个微服务只关注于某个完成的一个小任务</strong>。因此系统中的单个微服务可以被独立部署和扩展，在上图中，Provider 1 和 Provider2 在 <strong>服务中心（Eureka Server）</strong> 注册微服务来让 <strong>服务消费者（Service Consumer）进行调用服务（Remote Call）</strong></p>
<h2 id="服务网格"><a href="#服务网格" class="headerlink" title="服务网格"></a>服务网格</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210525030157.png"><br>服务网格（Service Mesh）独立与服务之外运行，是服务间通信的基础设施层，可以将它比作是应用程序或微服务之间的 <strong>TCP&#x2F;IP</strong>，负责服务之间的网格调用、限流、融断以及监控等。服务网格由 <strong>数据平台(Data Plane)和 控制平台(Control Plane)</strong> 组成，服务与服务之间通过 <strong>边车（Sidecar）</strong> 来进行通信，所有边车和网络链接就形成了 <strong>服务网格（Service Mesh）</strong>，其中 <strong>Sidecar 主要负责服务发现和容错处理</strong>。</p>
<h3 id="数据平台与控制平台"><a href="#数据平台与控制平台" class="headerlink" title="数据平台与控制平台"></a>数据平台与控制平台</h3><p>数据平台主要用于 <strong>处理服务之间的通信，并实现服务的发现，复杂均衡、流量管理、健康检查等</strong>。而控制平台主要用于 <strong>管理并配置边车（Sidecar）来执行策略和搜集数据</strong>。</p>
<blockquote>
<p>在正常的情况下应用程序的开发人员并不会关系 TCP&#x2F;IP层，这在服务网格时也依然适用，开发人员也不需要关心服务的融断、断流、限流、监控等，因为这些都将由服务网格处理</p>
</blockquote>
<h3 id="特点与区别"><a href="#特点与区别" class="headerlink" title="特点与区别"></a>特点与区别</h3><p>一是服务网格的 <strong>侧重点</strong> 不同，为服务架构更关注服务之间的 <strong>生态（如服务治理 SOA）</strong> ，而服务网格则更关注服务之间的 <strong>通信</strong>。<br>二是 <strong>侵入性不同</strong>，微服务架构实现了架构间分离出来解决问题（解藕），而服务网格则实现了服务框架与服务之间分离出来解决问题。需要值得注意的是服务网格是服务之外独立运行的模块，他提供了微服务框架功能，但不需要在代码和配置中添加相应的依赖库和依赖配置项。</p>
<p>服务网格的特点有：</p>
<ol>
<li>对服务没有侵入性</li>
<li>是一个应用程序之间的中间层</li>
<li>一个轻量级的网络代理</li>
<li>应用程序对服务网格无感知</li>
<li>能够分离出来解决用用程序的重试、监控、追踪和服务发现等问题。</li>
</ol>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/9.Spring boot and Thymeleaf 条件与循环/">Spring boot and Thyemeaf 条件与循环</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>在众多语言之中，都有条件和循环等三个非常重要的语句分别为if、switch、while等三个语句，分别根据不同场景而运用，本次我们将会一一进行列举，也作为我们的Thymeleaf结尾篇（因为我们主打的还是Spring boot，不是Thymeleaf，Thymeleaf只是作为课外部分）</p>
<h2 id="if"><a href="#if" class="headerlink" title="if"></a>if</h2><p>布尔也是开发语言三件套之一，通常布尔用于判断和各种循环条件之中，本书将会使用Thymeleaf模板引擎来实现布尔的一系列操作：</p>
<blockquote>
<p>在Thymeleaf模板引擎之中，布尔的写法是有区别的如**&lt;div th:if&#x3D;“${data} &#x3D;&#x3D; ‘thymeleaf’”&lt;div th:if&#x3D;”${data&#x3D;’Thymeleaf’”**，两种写法其中第一种写法即布尔在<code>大阔号外</code>的即将会由Thymeleaf负责处理，如果将布尔写在大阔号内将会由OGNL&#x2F;SpringEL引擎负责处理：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf boolean&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:if=&quot;$&#123;data&#125;==&#x27;Thymeleaf&#x27;&quot;&gt;</span><br><span class="line">        &lt;p&gt;Thymeleaf....if $data 变量正确&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="if-and-unless"><a href="#if-and-unless" class="headerlink" title="if and unless"></a>if and unless</h3><p>本书通过if and unless来实现判断data变量是否为空作为案例，如data变量为空则输出不为空等信息，实现方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf boolean&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:if=&quot;$&#123;data&#125; == true&quot;&gt;</span><br><span class="line">        &lt;p&gt;The true urlController $data&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div th:unless=&quot;$&#123;data&#125; == true&quot;&gt;</span><br><span class="line">        &lt;p&gt;The false urlController $data&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在Thymeleaf之中，th:if与th:unless的意思和功能是不同的，通常为th:is是<code>条件成立时执行的内容</code>而th:unless则是<code>条件不成立时执行的内容</code></p>
<h2 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h2><p>switch语法表达式可有效的等效于if或是unless等Thymeleaf语法表达式，来有效且有条件的显示某一条内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- index.html --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf switch&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:switch=&quot;$&#123;data.name&#125;&quot;&gt;</span><br><span class="line">        &lt;p th:case=&quot;&#x27;kunlunsiqu&#x27;&quot;&gt;My name is kunlunsiqu&lt;/p&gt;</span><br><span class="line">        &lt;p th:case=&quot;&#x27;kun&#x27;&quot;&gt;My name is kun&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// urlController.java</span></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="type">data</span> <span class="variable">dataone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">data</span>(<span class="string">&quot;kun&quot;</span>,<span class="number">20</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;data&quot;</span>,dataone);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// data.java</span></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">data</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">data</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="switch-case"><a href="#switch-case" class="headerlink" title="switch + case"></a>switch + case</h3><p>上面我们介绍了switch单个的执行效果，当然我们虽然也写了 th:case但如果条件都不构成时我们需要输出什么呢?这个问题在Thymeleaf已经给了我们答案：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- index.html --&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf switch&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:switch=&quot;$&#123;data.name&#125;&quot;&gt;</span><br><span class="line">        &lt;p th:case=&quot;&#x27;kunlunsiqu&#x27;&quot;&gt;My name is kunlunsiqu&lt;/p&gt;</span><br><span class="line">        &lt;p th:case=&quot;&#x27;kun&#x27;&quot;&gt;My name is kun&lt;/p&gt;</span><br><span class="line">        &lt;p th:case=&quot;*&quot;&gt;My name is no kunlunsiqu and kun!&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// urlController.java</span></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="type">data</span> <span class="variable">dataone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">data</span>(<span class="string">&quot;jujingyi&quot;</span>,<span class="number">20</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;data&quot;</span>,dataone);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// data.java</span></span><br><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">data</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">data</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>switch与case相互使用的时候本身并不会对当条件都不构成时输出信息，而如果将case条件更改为<code>&quot;**&quot;</code>时将会在当条件都不构成时输出指定信息，当然，不仅仅可以使用case来作为当条件都不构成时输出的信息，通过阅读上一章节读者们可会有更多的方案来代替 th:case&#x3D;”*” 语法。</p>
<h2 id="each"><a href="#each" class="headerlink" title="each"></a>each</h2><p>本书我们通过使用列表来进行循环的实现，其主要由Controller（控制器）和th:text、th:each来分别进行实现如：</p>
<h3 id="WebController-java"><a href="#WebController-java" class="headerlink" title="WebController.java"></a>WebController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(Map&lt;String,Object&gt; map)</span> &#123;</span><br><span class="line">        <span class="comment">// Map&amp;map</span></span><br><span class="line">            map.put(<span class="string">&quot;data&quot;</span>,Arrays.asList(<span class="string">&quot;one&quot;</span>,<span class="string">&quot;two&quot;</span>,<span class="string">&quot;three&quot;</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Index&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf th:each&lt;/h5&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;p th:text=&quot;$&#123;each&#125;&quot; th:each=&quot;each: $&#123;data&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="application-propertion"><a href="#application-propertion" class="headerlink" title="application.propertion"></a>application.propertion</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.thymeleaf.cache=false</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/8.Spring boot and Thymeleaf 常量与文字处理/">Spring Boot and Thymeleaf 常量与文字处理（Literals and Text operations）</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<h2 id="Literals"><a href="#Literals" class="headerlink" title="Literals"></a>Literals</h2><p>在Thymeleaf中，我们将Literals翻译为类型，即Thymeleaf中和其他语言一样，共包含了字符串、数字、 布尔、操作符等四种数据类型，本章将会对这四种数据类型做出实例及相关解释和实现。</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>字符串即你输入的任何字母都叫字符串类型，英文即 String，代表着字符串类型，按道理讲常见的各种字母和数字都可被字符串所海纳。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf String&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;p&gt;Hello,world&lt;span th:text=&quot;&#x27;The on html+thymeleaf file&#x27;&quot;&gt;The one html file&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>之所以上图输出的文字是红色的，也许可能是因为 &#x2F;css&#x2F;style.css的原因，读者可自行进行编写，如你可以编写一个 ：</p>
<blockquote>
<p>p {color: green}</p>
</blockquote>
<p>让生活多一点乐趣与对生活更或者世界的向往，看开一切，展开心扉，无所畏惧，你将变得更加美好。</p>
<h4 id="String-var"><a href="#String-var" class="headerlink" title="String + var"></a>String + var</h4><p>Thymeleaf还支持数据类型与变量格式化的内容，即在一个<code>&quot;&quot;</code>下输出信息，这个支持方便了很多，支持的也很多，语法为：</p>
<h5 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf Literals&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;p th:text=&quot;|Welcome to Thymeleaf, $&#123;data&#125;!|&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="urlController-java"><a href="#urlController-java" class="headerlink" title="urlController.java"></a>urlController.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;data&quot;</span>,<span class="string">&quot;Thymeleaf&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数字"><a href="#数字" class="headerlink" title="数字"></a>数字</h3><p>数字（int），即0~9个数字组合的一种数据，这种你可以随便组合比如<code>7758258</code>这些，当然我也不用太过多的介绍，我相信读者们都有一定的数据类型基础，毕竟学各种语言的时候都会学习到数据类型，本次我们将会使用Thylemeaf来实现一个数字类型:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf String&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;p&gt;Hello,world  &lt;span th:text=&quot;2020&quot;&gt;The one html file&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h4><p>在众多语言之中，算数运算符和数据类型一样，都是一个必经之路，所以本文不做过多演示，刚好今天是2021年1月6日，晚 01:18:07 点，就利用算数运算符祝大家2021年新年快乐吧：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf String&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;p&gt;Hello,world  &lt;span th:text=&quot;2020 + 1&quot;&gt;The one html file&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="String-算数运算符"><a href="#String-算数运算符" class="headerlink" title="String + 算数运算符"></a>String + 算数运算符</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf Literals&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;p th:text=&quot;&#x27;Hello,&#x27; + $&#123;data&#125; + &#x27;!&#x27;&quot;&gt;The one html file&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在Thymeleaf模板引擎之中，我们可以通过数据类型和算数运算符进行叠加（虽然用的是字符串类型），通过算数运算符将数据类型与变量相加将会得到组合后的结果。</p>
<h3 id="布尔"><a href="#布尔" class="headerlink" title="布尔"></a>布尔</h3><p>布尔也是开发语言三件套之一，通常布尔用于判断和各种循环条件之中，本书将会使用Thymeleaf模板引擎来实现布尔的一系列操作：</p>
<blockquote>
<p>在Thymeleaf模板引擎之中，布尔的写法是有区别的如**&lt;div th:if&#x3D;“${data} &#x3D;&#x3D; ‘thymeleaf’”&lt;div th:if&#x3D;”${data&#x3D;’Thymeleaf’”**，两种写法其中第一种写法即布尔在<code>大阔号外</code>的即将会由Thymeleaf负责处理，如果将布尔写在大阔号内将会由OGNL&#x2F;SpringEL引擎负责处理：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf boolean&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:if=&quot;$&#123;data&#125;==&#x27;Thymeleaf&#x27;&quot;&gt;</span><br><span class="line">        &lt;p&gt;Thymeleaf....if $data 变量正确&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h4 id="if-and-unless"><a href="#if-and-unless" class="headerlink" title="if and unless"></a>if and unless</h4><p>本书通过if and unless来实现判断data变量是否为空作为案例，如data变量为空则输出不为空等信息，实现方法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf boolean&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:if=&quot;$&#123;data&#125; == true&quot;&gt;</span><br><span class="line">        &lt;p&gt;The true urlController $data&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div th:unless=&quot;$&#123;data&#125; == true&quot;&gt;</span><br><span class="line">        &lt;p&gt;The false urlController $data&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在Thymeleaf之中，th:if与th:unless的意思和功能是不同的，通常为th:is是<code>条件成立时执行的内容</code>而th:unless则是<code>条件不成立时执行的内容</code></p>
<h2 id="Text-operations"><a href="#Text-operations" class="headerlink" title="Text operations"></a>Text operations</h2><h3 id="算数运算符-1"><a href="#算数运算符-1" class="headerlink" title="算数运算符"></a>算数运算符</h3><p>算数运算符之中，主要包含和使用<code>+、-、*、/、%</code>等算数符号，在此的过程之中，将会由<strong>OGNL引擎来代替Thymeleaf标准表达式引擎执行</strong>，显然这也是另一个写法，通常算数运算符包含在大阔号中的将会由OGNL引擎代替，而写在大阔号外的则由Thymeleaf引擎执 ，算数运算符和其他开发语言中的相差无几，本书将不详述，有兴趣的读者可自行了解</p>
<h3 id="比较器"><a href="#比较器" class="headerlink" title="比较器"></a>比较器</h3><p>在Thymeleaf之中，比较器和上述的算数运算符不同，比较器的写法可能与其他开发语言不同，如：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>&gt;</td>
<td>gt</td>
</tr>
<tr>
<td>&lt;</td>
<td>it</td>
</tr>
<tr>
<td>&gt;&#x3D;</td>
<td>ge</td>
</tr>
<tr>
<td>&lt;&#x3D;</td>
<td>le</td>
</tr>
<tr>
<td>!</td>
<td>not</td>
</tr>
<tr>
<td>&#x3D;&#x3D;</td>
<td>eq</td>
</tr>
<tr>
<td>!&#x3D;</td>
<td>neq&#x2F;ne</td>
</tr>
</tbody></table>
<h4 id="index-html-1"><a href="#index-html-1" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf comparator&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:if=&quot;$&#123;data&#125; eq &#x27;Thymeleaf&#x27;&quot;&gt;</span><br><span class="line">        &lt;p&gt;urlController comparator eq(==) Thymeleaf&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="默认表达式"><a href="#默认表达式" class="headerlink" title="默认表达式"></a>默认表达式</h3><p>在Thymeleaf之中，与其说是默认表达式不如说是 if……else的在称，其意思为，如当前指定的变量与条件不符则默认输出指定信息或变量，这个很类似于else ：</p>
<h4 id="urlController-java-1"><a href="#urlController-java-1" class="headerlink" title="urlController.java"></a>urlController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="type">data</span> <span class="variable">dataone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">data</span>(<span class="literal">null</span>    ,<span class="number">20</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;data&quot;</span>,dataone);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="data-java"><a href="#data-java" class="headerlink" title="data.java"></a>data.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">data</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">data</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="index-html-2"><a href="#index-html-2" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf Elvis&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:object=&quot;$&#123;data&#125;&quot;&gt;</span><br><span class="line">        &lt;p&gt;Name: &lt;span th:text=&quot;*&#123;name&#125;?: &#x27;(No name? Are you ok?)&#x27;&quot;&gt;&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="原型文本默认表达式"><a href="#原型文本默认表达式" class="headerlink" title="原型文本默认表达式"></a>原型文本默认表达式</h3><p>原型文本默认表达式在Thymeleaf官方文档中的名称叫做<code>(The No-Operation token)</code>即“禁止操作令牌”，其主要由令牌下划线符号<code>&quot;_&quot;</code>来表示，这样看起来代码简洁而美丽且大方(虽然IDE开发环境中会报错，但依然好看)：</p>
<h4 id="index-html-3"><a href="#index-html-3" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf Elvis&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:object=&quot;$&#123;data&#125;&quot;&gt;</span><br><span class="line">        &lt;p&gt;Name: &lt;span th:text=&quot;*&#123;name&#125; ?: _&quot;&gt;No name?Are you ok?&lt;/span&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这样的写法即约等于了 <code>&lt;p&gt;Name: &lt;span th:text=&quot;*&#123;name&#125;?: &#39;(No name? Are you ok?)&#39;&quot;&gt;&lt;/span&gt;&lt;/p&gt;</code>即默认表达式，使用原型文本默认表达式不仅代码美观且大气，还显得格外诱人。</p>
<h3 id="数据转换与格式化"><a href="#数据转换与格式化" class="headerlink" title="数据转换与格式化"></a>数据转换与格式化</h3><p>Thymeleaf提供数据转换与格式化的表达式，通过数据的转换来让其变成字符串类型（String），无论变量数据是什么格式，都将被转化为字符串类型，本书例子我们会将数字类型转换为字符串类型：</p>
<h4 id="inde-html"><a href="#inde-html" class="headerlink" title="inde.html"></a>inde.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf The No-Operation token&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;td th:text=&quot;$&#123;&#123;data.age&#125;&#125;&quot;&gt;&lt;/td&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>原本的data.age本是数字类型，但通过两个大阔号即<code>&#123;&#123;……&#125;&#125;</code>可让其自动转换&#x2F;格式化为字符串类型。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/7.Spring boot and Thymeleaf 变量表达式语法/">Spring boot and Thymeleaf 变量表达式</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<h3 id="标准变量表达式语法"><a href="#标准变量表达式语法" class="headerlink" title="标准变量表达式语法"></a>标准变量表达式语法</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>${……}</td>
<td>变量表达式</td>
<td>变量表达式</td>
</tr>
<tr>
<td>*{……}</td>
<td>选择变量表达式</td>
<td></td>
</tr>
<tr>
<td>#{……}</td>
<td>信息表达式</td>
<td></td>
</tr>
<tr>
<td>@{……}</td>
<td>链接URL表达式</td>
<td></td>
</tr>
<tr>
<td>~{……}</td>
<td>片段表达式</td>
<td></td>
</tr>
</tbody></table>
<p>在此我们只线上简单表达式的语法，还有一些Thymeleaf的语法我相信读者都是学过html、css、js这些的都可以大致看懂，所以本书也没必要将重点列在表达式语法之中，在此基础上学习和认知、了解到简单表达式就差不多了。</p>
<h3 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>th:id</td>
<td>替换id</td>
</tr>
<tr>
<td>th:text</td>
<td>文本替换</td>
</tr>
<tr>
<td>th:utext</td>
<td>不可被替换的文本</td>
</tr>
<tr>
<td>th:object</td>
<td>替换对象</td>
</tr>
<tr>
<td>th:value</td>
<td>替换值</td>
</tr>
<tr>
<td>th:each</td>
<td>迭代</td>
</tr>
<tr>
<td>th:href</td>
<td>替换超链接</td>
</tr>
<tr>
<td>th:src</td>
<td>资源替换</td>
</tr>
</tbody></table>
<h4 id="Thymeleaf-……"><a href="#Thymeleaf-……" class="headerlink" title="Thymeleaf ${……}"></a>Thymeleaf ${……}</h4><p>Thymeleaf ${……}的主要作用是变量表达式，通常我们需要另建一个Java文件在spring boot web项目之中，然后html页面通过${……}来获取.Java文件的内容。有一个有趣的故事是单个打开html和在服务器端显示的不同，这里的不同主要是<strong>html不懂Thymeleaf语法，于是就输出了${……}之后标签内的语法如：</strong><code>&lt;p th:text=&quot;$&#123;name&#125;&quot;&gt;Go html&lt;/p&gt;</code>在服务器端会输出.Java文件内name相应的数据内容，而在html环境下由于html也不懂Thymeleaf语法干脆忽略掉了而输出<code>Go html</code>。</p>
<h5 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.thymeleaf.encoding</span>=<span class="string">UTF-8</span></span><br></pre></td></tr></table></figure>
<h5 id="urlController-java"><a href="#urlController-java" class="headerlink" title="urlController.java"></a>urlController.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Thymeleaf&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    Thymeleaf one html</span><br><span class="line">    &lt;p th:text=&quot;$&#123;name&#125;&quot;&gt;Go html&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>需要值得注意的是在urlController中所属的包是由spring boot项目构建时自动生成的包，直接在com.example.demo包下新建类即可，而index.html文件是存放于src&#x2F;main&#x2F;resources&#x2F;templates之中的，在application.properties内的配置分别为自动清除Thymeleaf缓存，即不需要重启Spring boot来刷新数据，理论上是如thymeleaf改变服务端也随即改变，这个改变是不包括css&#x2F;js的。</p>
<h4 id="……"><a href="#……" class="headerlink" title="${……[]}"></a>${……[]}</h4><p>在Spring boot与Thymeleaf搭配的项目之中，可以使用bash方法编写一个类似于列表数据的方法，及通过java建立对象，html使用<code>$&#123;……[]&#125;</code>的方法引入java对象数据即：</p>
<h5 id="data-java"><a href="#data-java" class="headerlink" title="data.java"></a>data.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">data</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">data</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="urlController-java-1"><a href="#urlController-java-1" class="headerlink" title="urlController.java"></a>urlController.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="type">data</span> <span class="variable">dataone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">data</span>(<span class="string">&quot;username&quot;</span>,<span class="number">20</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;namedata&quot;</span>,dataone);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="index-html-1"><a href="#index-html-1" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/style.css&#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../static/css/style.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>Java Bean object<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Name:<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;namedata.name&#125;&quot;</span>&gt;</span>namedata<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>Age:<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;namedata.age&#125;&quot;</span>&gt;</span>agedata<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Thymeleaf-……-1"><a href="#Thymeleaf-……-1" class="headerlink" title="Thymeleaf @{……}"></a>Thymeleaf @{……}</h4><p> 本文的@{……}由于使用本地环境导致spring boot无法找到style.css，这个问题其实主要的原因是环境的不同，在spring boot是自动配置、自动寻找的，所以不要使用绝对目录如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;../static/css/style.css&#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../static/css/style.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Thymeleaf one html</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;</span>Go html<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="index-html-2"><a href="#index-html-2" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/css/style.css&#125;&quot;</span> <span class="attr">href</span>=<span class="string">&quot;../static/css/style.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Thymeleaf one html</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;name&#125;&quot;</span>&gt;</span>Go html<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="style-css"><a href="#style-css" class="headerlink" title="style.css"></a>style.css</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># resources/static/css/</span><br><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你会发现直接点击html并浏览时css是正常运行的，而正到服务器端访问时就出现大问题了，就是访问不到style.css，返回结果404。这时我们将<code>th:href=&quot;@&#123;../static/css/style.css&quot;</code>更改为<code>th:href=&quot;@&#123;/css/style.css&#125;</code>即可，这样即保证了服务端的正常渲染也保证了静态调试的时候正常渲染。</p>
<h4 id="th-href-……"><a href="#th-href-……" class="headerlink" title="th:href @{……}"></a>th:href @{……}</h4><p>本次我们使用 th:href 标签来实现 @{……}方法，通常我们在生产环境之中都需要用到相对路径即 <a target="_blank" rel="noopener" href="https://pv.zsun.org.cn/about%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84https://pv.zsun.org.cn/login.php%EF%BC%8C%E8%BF%99%E6%A0%B7%E4%B8%8D%E4%BB%85%E4%BB%85%E9%93%BE%E6%8E%A5%E4%B8%8D%E7%BE%8E%E8%A7%82%E8%BF%98%E5%AD%98%E5%9C%A8%E7%9D%80%E4%B8%80%E4%BA%9B%60%60%60%E5%AE%89%E5%85%A8%E9%A3%8E%E9%99%A9%60%60%60%EF%BC%8C%E5%9C%A8%E4%BA%92%E8%81%94%E7%BD%91%E4%B8%AD%E6%9C%89%E4%B8%80%E7%BE%A4%E6%89%93%E7%9D%80%E2%80%9C%E7%99%BD%E5%B8%BD%E5%AD%90%E2%80%9D%E7%9A%84%E8%84%9A%E6%9C%AC%E5%B0%8F%E5%AD%90%E9%80%9A%E5%B8%B8%E6%9C%80%E5%96%9C%E6%AC%A2%E8%BF%99%E7%A7%8D%E4%BD%BF%E7%94%A8%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E7%9A%84%E7%AB%99%E7%82%B9%E4%BA%86%EF%BC%8C%E4%BB%96%E4%BB%AC%E4%BC%9A%E4%B8%8D%E6%8B%A9%E6%89%8B%E6%AE%B5%E7%9A%84%E5%AF%B9%E4%BD%A0%E7%9A%84%E7%AB%99%E7%82%B9%E8%BF%9B%E8%A1%8C%E6%B5%8B%E8%AF%95%EF%BC%8C%E8%BF%99%E7%A7%8D%E6%84%9F%E8%A7%89%E4%B9%9F%E9%9D%9E%E5%B8%B8%E6%97%A0%E8%AF%AD%EF%BC%8C%E6%89%80%E4%BB%A5%E6%9C%AC%E7%AB%A0%E9%80%9A%E8%BF%87">https://pv.zsun.org.cn/about，而不是绝对路径https://pv.zsun.org.cn/login.php，这样不仅仅链接不美观还存在着一些```安全风险```，在互联网中有一群打着“白帽子”的脚本小子通常最喜欢这种使用绝对路径的站点了，他们会不择手段的对你的站点进行测试，这种感觉也非常无语，所以本章通过</a> th:href来实现相对目录。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf href&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;a href=&quot;insert.html&quot; th:href=&quot;@&#123;insert&#125;&quot;&gt;Go insert&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>这样写的好处是不仅仅是为了安全性考虑，且在本地测试中不会在对服务器应用进行设置，无需另开发对生产环境的程序或工作，一次开发，兼顾了本地测试和生产环境，这也是Thymeleaf的特点之一。</p>
<h4 id="Thymeleaf-……-amp-……"><a href="#Thymeleaf-……-amp-……" class="headerlink" title="Thymeleaf *{……} &amp; ${……}"></a>Thymeleaf *{……} &amp; ${……}</h4><p>在Thymeleaf标准表达式语法之中，可使用<code>*&#123;……&#125;</code>与<code>$&#123;……&#125;</code>互相进行搭配，其中可更方便的运用在列表之中，而实现过程与Thymeleaf中的 ${……[]}相差无几，只是多了个<code>*&#123;……&#125;</code>让其更加方便的编写：</p>
<h5 id="data-java-1"><a href="#data-java-1" class="headerlink" title="data.java"></a>data.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">data</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">data</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="urlController-java-2"><a href="#urlController-java-2" class="headerlink" title="urlController.java"></a>urlController.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">urlController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getindex</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="type">data</span> <span class="variable">dataone</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">data</span>(<span class="string">&quot;username&quot;</span>,<span class="number">20</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;Thymeleaf&quot;</span>);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;namedata&quot;</span>,dataone);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="index-html-3"><a href="#index-html-3" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Bean object&lt;/h5&gt;</span><br><span class="line">    &lt;table th:object=&quot;$&#123;namedata&#125;&quot;&gt;</span><br><span class="line">       &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;Name:&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;*&#123;name&#125;&quot;&gt;namedata&lt;/td&gt;</span><br><span class="line">       &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;Age:&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;*&#123;age&#125;&quot;&gt;agedata&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Thymeleaf-……-2"><a href="#Thymeleaf-……-2" class="headerlink" title="Thymeleaf #{……}"></a>Thymeleaf #{……}</h4><p>与上面的一些表达式语法相比，基本上都是通过读取Controller控制器值来读取信息的，而相比之下 #{……}就显得平淡无奇且低调奢华了，这个表达式虽然并不常用但却比通过读取Controller值方便许多，因为他本身就是用于读取配置内的信息的（这里的配置仅单指<code>.properties</code>）Springboot配置文件。</p>
<h5 id="application-properties-1"><a href="#application-properties-1" class="headerlink" title="application.properties"></a>application.properties</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.thymeleaf.encoding</span>=<span class="string">UTF-8</span></span><br><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">templates/data</span></span><br></pre></td></tr></table></figure>
<p>application 主要用于指定创建好的.properties文件，之后Thymeleaf #{……}通过读取.properties配置文件信息来显示输出，如不再spring boot全局配置文件中配置则会显示 ??language_zh_CN??，所以需要指定其.properties目录和文件名</p>
<h5 id="data-properties"><a href="#data-properties" class="headerlink" title="data.properties"></a>data.properties</h5><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data.name</span>=<span class="string">kunlunsiqu</span></span><br><span class="line"><span class="attr">data.age</span>=<span class="string">22</span></span><br></pre></td></tr></table></figure>

<h5 id="index-html-4"><a href="#index-html-4" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Bean object&lt;/h5&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">       &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;Name:&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;#&#123;data.name&#125;&quot;&gt;namedata&lt;/td&gt;</span><br><span class="line">       &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;Age:&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;#&#123;data.age&#125;&quot;&gt;agedata&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Thymeleaf-……-3"><a href="#Thymeleaf-……-3" class="headerlink" title="Thymeleaf ~{……}"></a>Thymeleaf ~{……}</h4><p>Thymeleaf <del>{……}片段表达式通过<code>th:insert</code>标签分别分为两步为分别为定义和引入两种方式，可以理解为一个页面中的数据通过片段表达式可供多个页面进行引用，其格式为&#96;&#96;&#96;th:insert&#x3D;”</del>{文件名 :: 片段名}&#96;&#96;&#96;”如本书例子；</p>
<h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><h6 id="insert-html"><a href="#insert-html" class="headerlink" title="insert.html"></a>insert.html</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:fragment</span>=<span class="string">&quot;data&quot;</span>&gt;</span></span><br><span class="line">        2020-01-05 19:48:34 Jiangxue &amp; ZhongShan</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h5><h6 id="index-html-5"><a href="#index-html-5" class="headerlink" title="index.html"></a>index.html</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">    &lt;link th:href=&quot;@&#123;/css/style.css&#125;&quot; href=&quot;../static/css/style.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Insert&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;div th:insert=&quot;~&#123;insert :: data&#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/6.Spring boot Web and Thymeleaf 开发环境构建/">Spring boot Web and Thymeleaf 开发环境构建</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>在本文之中，我们主要使用spring tool suite来构建spring boot 的web开发环境，通过Eclipse集成开发环境中选择New-&gt;Other-&gt;Spring Boot-&gt;Spring Starter Project 下来构建Spring web项目，通过Spring tool suite远程访问<a target="_blank" rel="noopener" href="https://start.sring.io/%E6%9D%A5%E6%9E%84%E5%BB%BAspring">https://start.sring.io/来构建spring</a> boot应用（&#96;&#96;&#96;这个过程虽然是gui形式但是依然需要联网，否则无法从start.spring.io中获取spring boot包），通过Spring tool suite图形化构建spring boot开发环境。</p>
<p>在spring boot 版本之中，需要对创建完后的spring boot项目中的pom.xml文件进行编辑添加其web支持，而spring boot非常的遵守开箱即用少配置的原则自动帮我们对在项目根木目录下的文件pom.xml添加了spring boot web支持：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Thymeleaf-创建"><a href="#Thymeleaf-创建" class="headerlink" title="Thymeleaf 创建"></a>Thymeleaf 创建</h2><p>Thymeleaf 和 FreeMarker一样，都是一款模板引擎，而与之不同的是Thymeleaf是<code>适用于</code>独立环境和现代服务器的模板引擎，并不是说FreeMarker不好，而是说Thymeleaf是专门适用与Java的，并对Spring MVC提供了完美的支持。除此之外，Spring boot的Web应用还支持包括 FreeMarker，Thymeleaf，Groovy，Velocity、Mustache等模板引擎。</p>
<p>在本文之中我们主要介绍Thymeleaf的特点及概括，Thymeleaf的主要目标和工作居士为当前开发的项目中的代码格式带来优雅，自然的HTML，并可在浏览器中正常现实，并作为静态原型工作，从而可以加强团队之间的协作。Thymeleaf 的运行方式有两种，一种为静态一种为动态，读者在学习Thymeleaf之中可以深刻的理会到这个原理，虽然心情波折但是依然相差无几。</p>
<h3 id="Spring-boot-Thymeleaf-创建"><a href="#Spring-boot-Thymeleaf-创建" class="headerlink" title="Spring boot Thymeleaf 创建"></a>Spring boot Thymeleaf 创建</h3><p>在spring boot 5 中，WebFlux的出现对Web应用不再唯一，所以<code>spring-boot-starter-thymeleaf</code>依赖将不会出包含在spring-boot-starter-web模块中，所以需要开发者手动在开集成开发环境中进行添加和构建，说的通俗易懂点就是在<code>New Spring Starter Project -&gt; New Spring Starter Project Dependencies [Spring Web and Thymeleaf]</code>即可，在New Spring Starter Project Dependencies中选择或搜索Spring Web 、Thymeleaf并勾选然后创建即可。</p>
<h3 id="Themeleaf-目录"><a href="#Themeleaf-目录" class="headerlink" title="Themeleaf 目录"></a>Themeleaf 目录</h3><p>在创建spring boot web开发环境后，通常会生成关于Thymeleaf文件的目录在src&#x2F;main&#x2F;resources下如：<code>static、templates</code>其中static通常用于存放js、css、img等，而在templates目录下主要用于存放视图页面。</p>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>通过在 src&#x2F;main&#x2F;java&#x2F;中创建软件包为<code>com.example.controller</code>的控制器类:</p>
<h4 id="src-x2F-main-x2F-java-x2F"><a href="#src-x2F-main-x2F-java-x2F" class="headerlink" title="src&#x2F;main&#x2F;java&#x2F;"></a>src&#x2F;main&#x2F;java&#x2F;</h4><h5 id="TestThymeleafController-java"><a href="#TestThymeleafController-java" class="headerlink" title="TestThymeleafController.java"></a>TestThymeleafController.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestThymeleafController</span> &#123;</span><br><span class="line">	<span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="src-x2F-main-x2F-resource-x2F-templates"><a href="#src-x2F-main-x2F-resource-x2F-templates" class="headerlink" title="src&#x2F;main&#x2F;resource&#x2F;templates"></a>src&#x2F;main&#x2F;resource&#x2F;templates</h4><h5 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello,Spring boot<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		Test Spring boot The Thymeleaf</span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="Thymeleaf-Eclipse-引入"><a href="#Thymeleaf-Eclipse-引入" class="headerlink" title="Thymeleaf Eclipse 引入"></a>Thymeleaf Eclipse 引入</h2><p>在默认的情况下，Eclipse是不支持Thymeleaf语法的，所以我们需要手动添加eclipse即集成开发环境对Thymeleaf语法的支持和提供代码提示等功能，通常在没有代码提示的时候开发Thymeleaf是一件非常无语的事情，比写spring mvc还无语，安装Thymmeleaf插件的方法有很多，如通过远程和离线进行安装，在eclipse开发环境中选择 Help-&gt;Install New Software……，中可添加url和本地进行安装</p>
<h3 id="远程下载"><a href="#远程下载" class="headerlink" title="远程下载"></a>远程下载</h3><p>在 install New Software……中的url处填写 <a target="_blank" rel="noopener" href="http://www.thymeleaf.org/eclipse-plugin-update-site/%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8name%E5%A4%84%E8%BE%93%E5%85%A5Thymeleaf%E4%B9%8B%E5%90%8E%E9%80%9A%E8%BF%87%E4%B8%80%E7%B3%BB%E5%88%97%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%AE%8C%E6%88%90%E5%90%8C%E6%84%8F%E5%8D%8F%E8%AE%AE%E6%93%8D%E4%BD%9C%E5%8D%B3%E5%8F%AF%E3%80%82">http://www.thymeleaf.org/eclipse-plugin-update-site/，然后在name处输入Thymeleaf之后通过一系列下一步完成同意协议操作即可。</a></p>
<h3 id="离线下载"><a href="#离线下载" class="headerlink" title="离线下载"></a>离线下载</h3><p>离线下载即在你有网的时候下，然后安装时是不需要网络的，其方法和远程下载无几，<a target="_blank" rel="noopener" href="https://github.com/thymeleaf/thymeleaf-extras-eclipse-plugin">https://github.com/thymeleaf/thymeleaf-extras-eclipse-plugin</a> 在此处进行下载，然后将下载的zip包按照远程下载的方式在 Install New Software…… -&gt; Add -&gt;url 处替换为你下载的zip文件即可，然后步骤和远程下载相差无几。</p>
<h2 id="Spring-boot-Thymeleaf-刷新"><a href="#Spring-boot-Thymeleaf-刷新" class="headerlink" title="Spring boot Thymeleaf 刷新"></a>Spring boot Thymeleaf 刷新</h2><p>在开发Thymeleaf之中会遇到一个非常无语的问题，就是说当更改完Thymeleaf时，需要手动重启Spring boot服务，而Spring boot服务又需要调用Tomcat服务应用，会造成一定的消耗，所以我们本次以IDEA环境为例（<code>不要问我为什么之前用Eclipse，现在转Idea，满满的你就会知道了</code>）</p>
<h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><p>application.properties 文件一般存储在 src&#x2F;main&#x2F;resources&#x2F;目录下，无论在eclipse或idea环境中他都是一片叶子，我们在其配置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br></pre></td></tr></table></figure>
<p>即关闭spring boot right thymeleaf的缓存，这样更新Thymeleaf文件后在其本地环境就会变得不一样了</p>
<h3 id="Idea-Build"><a href="#Idea-Build" class="headerlink" title="Idea Build"></a>Idea Build</h3><p>如果你是Idea 环境那就是另一种福音了，我们可以通过Idea集成开发环境进行一定的配置如：<br><code>File-&gt;Settings-&gt;Build,Execution,Deployment-&gt;Compiler</code><br>标签内将Build project automatically勾选，即“自动构建项目”.，然后点击应用（Apply）即可</p>
<h3 id="Maintenance-and-Registry"><a href="#Maintenance-and-Registry" class="headerlink" title="Maintenance and Registry"></a>Maintenance and Registry</h3><p>使用快捷键 <code>Shift+Ctrl+Alt+/</code>即可唤出Maintenance页面，然好点击Registry……标签将key为<code>compiler.automake.allow.when.app,running</code>在Value中打个勾之后关闭即可，然后重启Idea。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/5.Spring boot 条件与其实现/">Spring Boot 条件与其实现</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>我们可以通过直接阅读引入<code>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration;</code>的Aop包下的AopAutoConfiguration.class来了解到其Spring boot自动配置的实现过程，而AopAutoConfigutaion.class中的关键代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;auto&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AopAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line">	<span class="meta">@ConditionalOnClass(Advice.class)</span></span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">AspectJAutoProxyingConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line">		<span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = false)</span></span><br><span class="line">		<span class="meta">@ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;proxy-target-class&quot;, havingValue = &quot;false&quot;,</span></span><br><span class="line"><span class="meta">				matchIfMissing = false)</span></span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">JdkDynamicAutoProxyConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line">		<span class="meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span></span><br><span class="line">		<span class="meta">@ConditionalOnProperty(prefix = &quot;spring.aop&quot;, name = &quot;proxy-target-class&quot;, havingValue = &quot;true&quot;,</span></span><br><span class="line"><span class="meta">				matchIfMissing = true)</span></span><br><span class="line">		<span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CglibAutoProxyConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>通过AopAutoConfiguration.class的代码中我们可以理解到，基本上Spring Boot中的自动配置实现过程是通过@Conditational而@ConditationalOnProperty（即条件属性，单Conditational指“有条件的”）注解实现的，我们可通过Java Doc的官方文档中读取和了解到有关@ConditationalOnPropertry注解相关的信息</p>
<h2 id="1-1-条件注解"><a href="#1-1-条件注解" class="headerlink" title="1.1. 条件注解"></a>1.1. 条件注解</h2><p>Spring的条件注解说白了就是程序的配置类和配置项，即满足特定了条件才会被调用，这就和if和try的条件判断语句一样，if的存在是判断是否等于或不等于某个条件，而try的存在则是判断这段code是否出现异常，出现异常后又执行什么方法或调用什么类等，在这里Spirng条件注解同样的意思。<br>在<code>spring-boot-autoconfigure-2.4.1.jar</code>spring boot核心依赖包下，有38个条件注解类如下：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@ConditionalOnBean</td>
<td>OnBeanCodition.class</td>
<td>Spring存在指定的实例Bean</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>OnClassCondition.clss</td>
<td>类加载器中存在对应的类</td>
</tr>
<tr>
<td>@ConditionalOnCloudPlatform</td>
<td>OnCloudPlatformCondition.class</td>
<td>类中是否存在云平台</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>OnExpressionCondition.clss</td>
<td>判断SpEL表达式是否成立</td>
</tr>
<tr>
<td>@ConditionalOnJava</td>
<td>OnJavaCondition.class</td>
<td>Java版本是否符合你的条件要求</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>OnJndiCondition.class</td>
<td>在JNDI（即Java命名项目和目录接口）条件查找指定位置</td>
</tr>
<tr>
<td>@ConditionalOnMissingBean</td>
<td>OnBeanCondition.class</td>
<td>Spring容器中不存在指定的实例</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>OnClassCondition.class</td>
<td>类加载器中不存在对应的类</td>
</tr>
<tr>
<td>@ConditionalOnNotWebApplication</td>
<td>OnWebApplicationCondition.class</td>
<td>当前应用程序不是Web程序应用</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>OnResourceCondition.class</td>
<td>应用环境中实行是否存在指定的值</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>OnResourceCondition.class</td>
<td>是否存在指定的资源文件</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>OnBeanCondition.class</td>
<td>Spring容器中是否存在且只存在一个对应的实例Bean</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>OnWebApplicationCondition.class</td>
<td>当前应用程序是Web程序</td>
</tr>
</tbody></table>
<p>通过阅读以上列出的相关注解和注解实现类我们可随即查看实现类的过程，而本次我们主要阅读&#96;&#96;&#96;OnWebApplicationCondition.class&#96;&#96;即@ConditionalOnWebApplication的注解实现方法以及原理。</p>
<h3 id="1-1-1-OnWebApplicationCondition-class"><a href="#1-1-1-OnWebApplicationCondition-class" class="headerlink" title="1.1.1. OnWebApplicationCondition.class"></a>1.1.1. OnWebApplicationCondition.class</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   <span class="comment">// 匹配Web应用</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> ConditionOutcome[] getOutcomes(String[] autoConfigurationClasses,</span><br><span class="line">		AutoConfigurationMetadata autoConfigurationMetadata) &#123;</span><br><span class="line">	ConditionOutcome[] outcomes = <span class="keyword">new</span> <span class="title class_">ConditionOutcome</span>[autoConfigurationClasses.length];</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; outcomes.length; i++) &#123;</span><br><span class="line">		<span class="type">String</span> <span class="variable">autoConfigurationClass</span> <span class="operator">=</span> autoConfigurationClasses[i];</span><br><span class="line">		<span class="keyword">if</span> (autoConfigurationClass != <span class="literal">null</span>) &#123;</span><br><span class="line">			outcomes[i] = getOutcome(</span><br><span class="line">					autoConfigurationMetadata.get(autoConfigurationClass, <span class="string">&quot;ConditionalOnWebApplication&quot;</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> outcomes;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 确定匹配结果并以日志的形式输出</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ConditionOutcome <span class="title function_">getMatchOutcome</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">    <span class="comment">// 检查是否使用@OnWebApplicationCndition注解</span></span><br><span class="line">	<span class="type">boolean</span> <span class="variable">required</span> <span class="operator">=</span> metadata.isAnnotated(ConditionalOnWebApplication.class.getName());</span><br><span class="line">       <span class="comment">// isWebApplication 检测是否是Web 应用程序    </span></span><br><span class="line">	<span class="type">ConditionOutcome</span> <span class="variable">outcome</span> <span class="operator">=</span> isWebApplication(context, metadata, required);</span><br><span class="line">       <span class="comment">// 如果有注解但不是Web应用环境则返回true</span></span><br><span class="line">	<span class="keyword">if</span> (required &amp;&amp; !outcome.isMatch()) &#123;</span><br><span class="line">		<span class="keyword">return</span> ConditionOutcome.noMatch(outcome.getConditionMessage());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果没有注解但是web应用环境则返回true</span></span><br><span class="line">	<span class="keyword">if</span> (!required &amp;&amp; outcome.isMatch()) &#123;</span><br><span class="line">		<span class="keyword">return</span> ConditionOutcome.noMatch(outcome.getConditionMessage());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果使用了@ConditionalOnWebApplication注解并是Web应用则返回匹配</span></span><br><span class="line">	<span class="keyword">return</span> ConditionOutcome.match(outcome.getConditionMessage());</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// 是否为Web应用环境</span></span><br><span class="line"><span class="keyword">private</span> ConditionOutcome <span class="title function_">isAnyWebApplication</span><span class="params">(ConditionContext context, <span class="type">boolean</span> required)</span> &#123;</span><br><span class="line">	ConditionMessage.<span class="type">Builder</span> <span class="variable">message</span> <span class="operator">=</span> ConditionMessage.forCondition(ConditionalOnWebApplication.class,</span><br><span class="line">			required ? <span class="string">&quot;(required)&quot;</span> : <span class="string">&quot;&quot;</span>);</span><br><span class="line">	<span class="type">ConditionOutcome</span> <span class="variable">servletOutcome</span> <span class="operator">=</span> isServletWebApplication(context);</span><br><span class="line">	<span class="keyword">if</span> (servletOutcome.isMatch() &amp;&amp; required) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConditionOutcome</span>(servletOutcome.isMatch(), message.because(servletOutcome.getMessage()));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">ConditionOutcome</span> <span class="variable">reactiveOutcome</span> <span class="operator">=</span> isReactiveWebApplication(context);</span><br><span class="line">	<span class="keyword">if</span> (reactiveOutcome.isMatch() &amp;&amp; required) &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConditionOutcome</span>(reactiveOutcome.isMatch(), message.because(reactiveOutcome.getMessage()));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConditionOutcome</span>(servletOutcome.isMatch() || reactiveOutcome.isMatch(),</span><br><span class="line">			message.because(servletOutcome.getMessage()).append(<span class="string">&quot;and&quot;</span>).append(reactiveOutcome.getMessage()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="自定义条件"><a href="#自定义条件" class="headerlink" title="自定义条件"></a>自定义条件</h2><h3 id="条件实现类"><a href="#条件实现类" class="headerlink" title="条件实现类"></a>条件实现类</h3><h4 id="MyCondition-java"><a href="#MyCondition-java" class="headerlink" title="MyCondition.java"></a>MyCondition.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ConditionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="comment">// 存在 test.properties</span></span><br><span class="line">		<span class="keyword">return</span> context.getResourceLoader().getResource(<span class="string">&quot;classpath:test.properties&quot;</span>).exists();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="YourCondition-java"><a href="#YourCondition-java" class="headerlink" title="YourCondition.java"></a>YourCondition.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Condition;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ConditionContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.type.AnnotatedTypeMetadata;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YourCondition</span> <span class="keyword">implements</span> <span class="title class_">Condition</span> &#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="comment">// 不存在 test.properties</span></span><br><span class="line">		<span class="keyword">return</span> !context.getResourceLoader().getResource(<span class="string">&quot;classpath:test.properties&quot;</span>).exists();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Bean-接口实现类"><a href="#Bean-接口实现类" class="headerlink" title="Bean 接口实现类"></a>Bean 接口实现类</h3><h4 id="MessagePrint-java"><a href="#MessagePrint-java" class="headerlink" title="MessagePrint.java"></a>MessagePrint.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MessagePrint</span> &#123;</span><br><span class="line">	    <span class="keyword">public</span> String <span class="title function_">showMessage</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MyMessagePrint-java"><a href="#MyMessagePrint-java" class="headerlink" title="MyMessagePrint.java"></a>MyMessagePrint.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMessagePrint</span> <span class="keyword">implements</span> <span class="title class_">MessagePrint</span> &#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">showMessage</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;test.properties 文件存在&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="YourMessagePrint-java"><a href="#YourMessagePrint-java" class="headerlink" title="YourMessagePrint.java"></a>YourMessagePrint.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">YourMessagePrint</span> <span class="keyword">implements</span> <span class="title class_">MessagePrint</span> &#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">showMessage</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;test.properties 文件不存在&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="配置类"><a href="#配置类" class="headerlink" title="配置类"></a>配置类</h3><h4 id="ConditionConfig-java"><a href="#ConditionConfig-java" class="headerlink" title="ConditionConfig.java"></a>ConditionConfig.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Conditional;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConditionConfig</span> &#123;</span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="meta">@Conditional(MyCondition.class)</span></span><br><span class="line">	<span class="keyword">public</span> MyMessagePrint <span class="title function_">myMessage</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyMessagePrint</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="meta">@Conditional(YourCondition.class)</span></span><br><span class="line">	<span class="keyword">public</span> MessagePrint <span class="title function_">yourmessage</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">YourMessagePrint</span>();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h3><h4 id="TestMain-java"><a href="#TestMain-java" class="headerlink" title="TestMain.java"></a>TestMain.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMain</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> AnnotationConfigApplicationContext contextapplication;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String args[])</span> &#123;</span><br><span class="line">		contextapplication = <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(ConditionConfig.class);</span><br><span class="line">		<span class="type">MessagePrint</span> <span class="variable">message</span> <span class="operator">=</span> contextapplication.getBean(MessagePrint.class);</span><br><span class="line">		System.out.println(message.showMessage());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/4.Spring boot 读取与自动配置/">Spring Boot 读取与自动配置</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<h2 id="读取"><a href="#读取" class="headerlink" title="读取"></a>读取</h2><h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><p>Environment是用于读取应用程序运行时环境变量的类，是可通过在application.properties中写入的key来通过Environment类读取的一种方式，而通过这种方式来读取的实现类通常称之为“Environment”类。</p>
<h4 id="src-x2F-main-x2F-resources-x2F-application-properties"><a href="#src-x2F-main-x2F-resources-x2F-application-properties" class="headerlink" title="src&#x2F;main&#x2F;resources&#x2F;application.properties"></a>src&#x2F;main&#x2F;resources&#x2F;application.properties</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">demo.msg = Hello I am here read config!</span><br></pre></td></tr></table></figure>

<h4 id="HelloWorldController-java"><a href="#HelloWorldController-java" class="headerlink" title="HelloWorldController.java"></a>HelloWorldController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.Environment;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorldController</span> &#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> Environment env;</span><br><span class="line">	<span class="meta">@RequestMapping(&quot;/demoEnv&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">demoEnv</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// 从 src/main/resources/application.properties 中的key读取配置文件数据</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Spring boot:&quot;</span> + env.getProperty(<span class="string">&quot;demo.msg&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Value"><a href="#Value" class="headerlink" title="@Value"></a>@Value</h3><p>第二种方法就是使用@value注解来进行读取，与Environment的区别就是少了一行code，就是说用注解代替了Environment的return，来读取application.properties:</p>
<h4 id="src-x2F-main-x2F-resources-x2F-application-properties-1"><a href="#src-x2F-main-x2F-resources-x2F-application-properties-1" class="headerlink" title="src&#x2F;main&#x2F;resources&#x2F;application.properties"></a>src&#x2F;main&#x2F;resources&#x2F;application.properties</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">demo.msg = Hello I am here read config!</span><br></pre></td></tr></table></figure>

<h4 id="HelloWorldController-java-1"><a href="#HelloWorldController-java-1" class="headerlink" title="HelloWorldController.java"></a>HelloWorldController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorldController</span> &#123;</span><br><span class="line">	<span class="meta">@Value(&quot;$&#123;demo.msg&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String msg;</span><br><span class="line">	<span class="meta">@RequestMapping(&quot;/demoValue&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">demoValue</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Spring boot&quot;</span> + msg;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="PropertySource"><a href="#PropertySource" class="headerlink" title="@PropertySource"></a>@PropertySource</h3><p>在前面所介绍的注解仅仅可用于读取application.properties的Spring boot全局配置文件，而如果想要读取另一个或其他的配置文件需要使用到@PropertySource + @Value来读取其他配置文件的内容，其步骤如下：</p>
<h4 id="PropertySourceValueReaderOtherController-java"><a href="#PropertySourceValueReaderOtherController-java" class="headerlink" title="PropertySourceValueReaderOtherController.java"></a>PropertySourceValueReaderOtherController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;one.properties&quot;,&quot;two.properties&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertySourceValueReaderOhterController</span> &#123;</span><br><span class="line">	<span class="meta">@Value(&quot;$&#123;two.msg&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String twomsg;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Value(&quot;$&#123;one.msg&#125;&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String onemsg;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@RequestMapping(&quot;/demoProperty&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">demoProperty</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;one.properties:&quot;</span> + twomsg + <span class="string">&quot;&lt;br&gt;&quot;</span> +</span><br><span class="line">				<span class="string">&quot;two.properties:&quot;</span> + twomsg;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="one-properties"><a href="#one-properties" class="headerlink" title="one.properties"></a>one.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">one.msg</span> = <span class="string">Hello</span></span><br></pre></td></tr></table></figure>
<h4 id="two-properties"><a href="#two-properties" class="headerlink" title="two.properties"></a>two.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">two.msg</span> = <span class="string">test PropertySource</span></span><br></pre></td></tr></table></figure>

<h3 id="ConfigurationProperties"><a href="#ConfigurationProperties" class="headerlink" title="@ConfigurationProperties"></a>@ConfigurationProperties</h3><figure class="highlight plaintext"><figcaption><span>```@Value、@PropertySource```注解类似，通过使用该注解可以配置 Controller、Model 进行获取 ```application.properties``` 配置文件信息。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### application.properties</span><br><span class="line">```java</span><br><span class="line">com.example.name=$&#123;name:sunlikun&#125;</span><br><span class="line">com.exmaple.age=16</span><br><span class="line">com.example.address[0]=one</span><br><span class="line">com.example.address[1]=two</span><br><span class="line">com.example.address[2]=three</span><br></pre></td></tr></table></figure>

<h4 id="ConfigExampleModel"><a href="#ConfigExampleModel" class="headerlink" title="ConfigExampleModel"></a>ConfigExampleModel</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ConfigExampleModel class</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> sunlikun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/06/08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;com.example&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigExampleModel</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Data</span> 自动生成 setter()、getter()、toString()、equals()、hashCode() 方法;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Component</span> <span class="doctag">@Component</span> 及表示为当时用该注解时，Spring 框架将会自动检测到这些类进行注入。通常表示说当前类不属于各种归类</span></span><br><span class="line"><span class="comment">     * 时（如 Controller、Services）就可以通过使用该注解进行标注。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@ConfigurationProperties</span> 将配置信息自动封装为实体类，其 &quot;prefix（前缀）&quot;是配置文件中定义的配置信息: &quot;com.example.&#123;value&#125;&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; address;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="ConfigExampleController"><a href="#ConfigExampleController" class="headerlink" title="ConfigExampleController"></a>ConfigExampleController</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.demo.model.ConfigExampleModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ConfigExampleController class</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> kunlun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/06/08</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigExampleController</span>  &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ConfigExampleModel configExampleModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> configExampleModel.getName();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/address&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> configExampleModel.getAddress();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当一切完成之后我们访问 <a target="_blank" rel="noopener" href="http://localhost:8080/address">http://localhost:8080/address</a> 会发现返回的是 <code>[&quot;one&quot;,&quot;two&quot;,&quot;three&quot;]</code>，或者访问 <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a>  进行测试，此时返回的结果则是 <code>sunlikun</code>，而这正是 <code>application.properties</code> 下配置文件的内容数据。</p>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><p>在众多的开发语言之中，日志是最为重要的一个功能，虽然这里说的开发语言不指java、c\c++、php这些，但是我们可拿mysql为例，在mysql中，日志是非常好的排错工具，通过阅读日志信息可帮助我们快速的了解错误和安全性的信息，学习spring boot自动配置之前，我们需要预先连接下spring boot的日志生成和管理以及对日志的配置。通常我们使用apache下的Log、LogFactory的方式来实现日志，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogTestController</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(LogTestController.class);</span><br><span class="line">	<span class="meta">@RequestMapping(&quot;/testLog&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">testLog</span><span class="params">()</span> &#123;</span><br><span class="line">		log.info(<span class="string">&quot;test log&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;test Log&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="日志等级"><a href="#日志等级" class="headerlink" title="日志等级"></a>日志等级</h3><p>在Spring boot中，日志等级和一些日志配置都是在<code>application.properties</code>文件下进行设置的，通常存储在src&#x2F;main&#x2F;resources目录下，而日志等级主要分为五个等级级别，以及三个颜色等级，共分别为：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>OFF</td>
<td>关闭</td>
<td>无颜色</td>
</tr>
<tr>
<td>FATAL</td>
<td>致命</td>
<td>红色</td>
</tr>
<tr>
<td>ERROR</td>
<td>错误</td>
<td>红色</td>
</tr>
<tr>
<td>WARN</td>
<td>警告</td>
<td>黄色</td>
</tr>
<tr>
<td>INFO</td>
<td>信息</td>
<td>绿色</td>
</tr>
<tr>
<td>DEBUG</td>
<td>调试</td>
<td>绿色</td>
</tr>
<tr>
<td>TREACE</td>
<td>追踪</td>
<td>绿色</td>
</tr>
<tr>
<td>ALL</td>
<td>所有</td>
<td>无颜色</td>
</tr>
<tr>
<td>通常我们可以使用针对默认和设置指定包下的日志等级两种方式为:</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="默认日志等级设置"><a href="#默认日志等级设置" class="headerlink" title="默认日志等级设置"></a>默认日志等级设置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 设置日志的默认等级为 info</span><br><span class="line">logging.level.root = info </span><br></pre></td></tr></table></figure>
<h4 id="指定包下的日志等级设置"><a href="#指定包下的日志等级设置" class="headerlink" title="指定包下的日志等级设置"></a>指定包下的日志等级设置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 设置 com.example.demo 包下日志等级为 off 即关闭</span><br><span class="line">logging.level.com.example.demo = off</span><br></pre></td></tr></table></figure>
<h3 id="日志目录"><a href="#日志目录" class="headerlink" title="日志目录"></a>日志目录</h3><p>在spring boot全局配置文件中，默认是在启动时输出日志文件，<code>而不会针对性的单个生成一个日志文件</code>，这就显得单个生成日志文件存储是多么重要，通常我们可以在spring boot全局配置文件中的<code>application.properties</code>文件中设置：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging.file</span> = <span class="string">spring.log</span></span><br></pre></td></tr></table></figure>
<p>以上是针对于spring.log是存放于spring项目目录下的，如果运行后spinrg boot发现日志文件并没有写入则是可能spring boot未找到<code>spring.log</code>日志文件，而遇到这种事情 spring boot提供了一个完美的解决方案就是通过使用相对目录进行指定：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging.file.name</span>=<span class="string">/home/kunlun/Development/Web/Demo/Spring/demo/src/main/resources/spring.log</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在spring boot logging日志中有一个非常好的功能呢个就是，如果当日志文件超过了10mb时，将会自动生成一个新的日志文件。与此同时spring boot提供了日志的自定义，如自定义错误的颜色以及时间、等级、长度、方法名、代码行等自定义，有兴趣的读者可通过查看spring boot 关于日志这一篇的文档：<a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-logging">https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-logging</a></p>
</blockquote>
<h2 id="自动配置原理"><a href="#自动配置原理" class="headerlink" title="自动配置原理"></a>自动配置原理</h2><p>在spring boot中，@SpringBootApplication注解之中，主要调用并使用了@EnableAutoConfiguration注解来进行标注，从而实现spring boot的自动配置功能，来帮助开发者解决spirng原生的蛋疼配置问题，我们可以通过阅读spring boot的@EnableAutoCOnfiguratiot的官方Java Doc的官方文档和其依赖的源代码查看并理解其Spirng boot自动配置的原理。</p>
<h3 id="EnableAutoConfiguration-class"><a href="#EnableAutoConfiguration-class" class="headerlink" title="EnableAutoConfiguration.class"></a>EnableAutoConfiguration.class</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 排除特定的自动配置类，使它们永远不会被应用。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the classes to exclude</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Class&lt;?&gt;[] exclude() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 排除特定的自动配置类名，这样它们就永远不会被应用</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the class names to exclude</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.3.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">String[] excludeName() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>通常只要是一个标准的Spring boot代码都会使用 @SpringBootApplication注解，而通过阅读@SpringBootApplication对应的代码我们发现了@SpringBootApplication注解包含了@EnableAutoOnfiguration注解，而进一步阅读源代码后发现其在Springboot启动的时候会夹在主配置类<code>AutoConfigurationImportSelector.class</code></p>
<h4 id="AutoConfigurationImportSelector-class"><a href="#AutoConfigurationImportSelector-class" class="headerlink" title="AutoConfigurationImportSelector.class"></a>AutoConfigurationImportSelector.class</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String[] selectImports(AnnotationMetadata annotationMetadata) &#123;</span><br><span class="line">    <span class="comment">// 判断@EnableAutoOnfiguration 注解是否开启，如没有开启则返回，默认开启（不然他也不会写!isEnable）</span></span><br><span class="line">	<span class="keyword">if</span> (!isEnabled(annotationMetadata)) &#123;</span><br><span class="line">		<span class="keyword">return</span> NO_IMPORTS;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 自动配置条目</span></span><br><span class="line">	<span class="type">AutoConfigurationEntry</span> <span class="variable">autoConfigurationEntry</span> <span class="operator">=</span> getAutoConfigurationEntry(annotationMetadata);</span><br><span class="line">	<span class="keyword">return</span> StringUtils.toStringArray(autoConfigurationEntry.getConfigurations());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// SpringFactoriesLoader从META-INF/spring中夹在实例化给指定的工厂，而这些可能存在于类中的路径中的多个jar文件中</span></span><br><span class="line"><span class="keyword">protected</span> List&lt;AutoConfigurationImportFilter&gt; <span class="title function_">getAutoConfigurationImportFilters</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> SpringFactoriesLoader.loadFactories(AutoConfigurationImportFilter.class, <span class="built_in">this</span>.beanClassLoader);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> AutoConfigurationEntry <span class="title function_">getAutoConfigurationEntry</span><span class="params">(AnnotationMetadata annotationMetadata)</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> (!isEnabled(annotationMetadata)) &#123;</span><br><span class="line">		<span class="keyword">return</span> EMPTY_ENTRY;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">AnnotationAttributes</span> <span class="variable">attributes</span> <span class="operator">=</span> getAttributes(annotationMetadata);</span><br><span class="line">	List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes);</span><br><span class="line">       </span><br><span class="line">       <span class="comment">// 删除重复的配置 remoe Duplicates</span></span><br><span class="line">	configurations = removeDuplicates(configurations);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从上述代码我们可以大概的了解到Spring Boot是通过加载所有的jar文件来实现自动配置的，所以@SpringBootApplication是通过使用@EnableAutoConfiguration注解自动配置的原理即从class目录中搜索所有的spring.factories配置文件并将其中EnableAutoConfiguration对应的配置项通过java反射机制进行实例化之后夹在到spring ioc容器中。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/3.Spring boot 核心注解/">Spring boot 核心注解</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<h2 id="SpringBootApplication-注解"><a href="#SpringBootApplication-注解" class="headerlink" title="@SpringBootApplication 注解"></a>@SpringBootApplication 注解</h2><p>在spring boot应用之中，咱把范围缩小一点，就是说spring boot应用的快速构建包下的启动类中，通常的类名称为 “XXXApplication.java”在spring boot的快速构建包下的启动类名称通常会为“DemoApplication”，而这个启动类名称前的（即Application前的）名称，是由你在<a target="_blank" rel="noopener" href="https://start.spring.io/%E7%94%9F%E6%88%90%E4%B8%AD%E7%9A%84%E5%90%8D%E7%A7%B0%EF%BC%8C%E6%AF%94%E5%A6%82%E6%9C%AC%E6%96%87%E6%98%AF%E9%80%9A%E8%BF%87%E9%BB%98%E8%AE%A4%E7%9A%84%E5%90%8D%E7%A7%B0%E6%9D%A5%E8%BF%9B%E8%A1%8C%E4%B8%8B%E8%BD%BD%E7%9A%84%EF%BC%8C%E6%89%80%E4%BB%A5%E5%B0%B1%E6%98%AF**DemoApplication**%E3%80%82">https://start.spring.io/生成中的名称，比如本文是通过默认的名称来进行下载的，所以就是**DemoApplication**。</a><br>通常在未没有放上注解的情况下，这个就是一个程序入口类，并不是一个启动类，而在他真正成为一个启动类之前，需要在名为XXXApplication程序入口类中写上一个程序的启动类加上spring boot核心注解为<code>@SpringBootApplication</code>标注为应用的启动类，而不是单单的程序入口。你也可以理解为你一个处男，只有当有女朋友之后干了那个事情你才可以成为男人懂我意思吧？。</p>
<p>另外，在spring boot中的启动类都有一个非常标准的Java应用程序main方法，在main方法中通过<code>SpringApplication.run(DemoApplication.class, args);</code>，来启动spring boot应用，启动类的标准代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意啊，上面代码不用你自己写，人家spring boot是遵循<code>开箱即用</code>原则的，虽然说最后还要导入后下载并更新maven，很多树上和文章上都会让读者手写上面的标准代码，其实他们也不一定是手写的，就是他妈的复制粘贴在这装比，凑个文章字数显得高达上，就跟本文一样。</p>
<p>在这其中，@SpringBootApplication是spring boot应用中的核心注解，也是一个组合注解，主要组合了<code>@ComponentScan、@SpringBootConfiguration、@EnableAutoConfiguration</code>等注解，我们可以通过查阅java的官方文档得知结果：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Open Declarationorg.springframework.boot.autoconfigure.SpringBootApplication</span><br><span class="line"></span><br><span class="line">@SpringBootConfiguration</span><br><span class="line">@EnableAutoConfiguration</span><br><span class="line">@ComponentScan(excludeFilters=&#123;@Filter(type=CUSTOM, classes=&#123;TypeExcludeFilter.class&#125;), @Filter(type=CUSTOM, classes=&#123;AutoConfigurationExcludeFilter.class&#125;)&#125;)</span><br><span class="line">@Target(value=&#123;TYPE&#125;)</span><br><span class="line">@Retention(value=RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Inherited</span><br><span class="line">Indicates a configuration class that declares one or more @Bean methods and also triggers auto-configuration and component scanning. This is a convenience annotation that is equivalent to declaring @Configuration, @EnableAutoConfiguration and @ComponentScan.</span><br><span class="line"></span><br><span class="line">Since:</span><br><span class="line">1.2.0</span><br><span class="line">Author:</span><br><span class="line">Phillip Webb</span><br><span class="line">Stephane Nicoll</span><br><span class="line">Andy Wilkinson</span><br></pre></td></tr></table></figure>

<h3 id="关闭特定的自动配置类"><a href="#关闭特定的自动配置类" class="headerlink" title="关闭特定的自动配置类"></a>关闭特定的自动配置类</h3><p>在<code>SpringBootApplication.class</code>中我们可以通过其注释了解到@SpringBootApplication注解的作用和其他方式，如我们可以使用@SpringBootApplication注解来实现关闭特定的自动配置类</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>@AliasFor(annotation &#x3D; EnableAutoConfiguration.class)</td>
<td>排除特定的自动配置类</td>
</tr>
<tr>
<td>@AliasFor(annotation &#x3D; EnableAutoConfiguration.class)</td>
<td>排除特定的自动配置类名</td>
</tr>
</tbody></table>
<h2 id="EnableAutoConfiguration-注解"><a href="#EnableAutoConfiguration-注解" class="headerlink" title="@EnableAutoConfiguration 注解"></a>@EnableAutoConfiguration 注解</h2><p>@EnableAutoConfiguration注解可以让spring boot可以根据当前的应用项目的依赖自动选择jar文件<strong>来自动配置</strong>。</p>
<h2 id="ComponsentScan-注解"><a href="#ComponsentScan-注解" class="headerlink" title="@ComponsentScan 注解"></a>@ComponsentScan 注解</h2><p>@ComonsentScan注解功能让Spring Boot自动扫描@SpringBootApplication所<strong>在类的同级包中的配置</strong>。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/2.Spring boot 构建与配置/">Spring boot 构建与配置</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>在springboot中，主要分为<strong>快速构建和maven构建</strong>两种构建方式，其中两种方法各有特色，通常我们使用快速构建，只需将Maven java源代码导入开发环境中即可使用，而使用maven构建则需要进行各种文件的新建、编写、引入等，本文主要使用springboot快速构建。</p>
<h2 id="springboot-快速构建包获取"><a href="#springboot-快速构建包获取" class="headerlink" title="springboot 快速构建包获取"></a>springboot 快速构建包获取</h2><p>获取springboot快速构建包可通过springboot官网<a target="_blank" rel="noopener" href="https://start.spring.io/%E9%80%89%E6%8B%A9%E4%BD%A0%E7%9A%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%8D%B3%E5%8F%AF%EF%BC%8C%E4%B9%8B%E5%90%8E%E8%A7%A3%E5%8E%8B%EF%BC%8C%E5%B0%86%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAspringboot%E5%8C%85%E5%AF%BC%E5%85%A5%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%AD%EF%BC%8C%E7%94%9F%E6%88%90%E5%85%B6jar%E6%96%87%E4%BB%B6%EF%BC%8C%E5%BD%93%E7%84%B6%E4%B9%9F%E5%8F%AF%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E4%B8%BBmain%E8%BF%9B%E8%A1%8C%E6%89%A7%E8%A1%8C%E3%80%82">https://start.spring.io/选择你的开发环境即可，之后解压，将快速构建springboot包导入开发环境中，生成其jar文件，当然也可直接运行主main进行执行。</a></p>
<h2 id="导入或创建"><a href="#导入或创建" class="headerlink" title="导入或创建"></a>导入或创建</h2><h3 id="将快速构建包导入开发环境"><a href="#将快速构建包导入开发环境" class="headerlink" title="将快速构建包导入开发环境"></a>将快速构建包导入开发环境</h3><p>进入eclipse -&gt; File -&gt; Import -&gt; Maven -&gt; Existing Maven Projects 之后选择spring boot快速构建包即可导入至eclipse开发环境中，然后等待其maven的下载即可完成</p>
<h3 id="使用-spring-tool-suite-创建"><a href="#使用-spring-tool-suite-创建" class="headerlink" title="使用 spring tool suite 创建"></a>使用 spring tool suite 创建</h3><h4 id="安装spring-tool-suite"><a href="#安装spring-tool-suite" class="headerlink" title="安装spring tool suite"></a>安装spring tool suite</h4><p>在eclipse中，选择Help -&gt; Eclipse Marketplace……然后搜索<code>spring tool suite</code>，然后选择你心仪的spring tool suite 版本点击安装即“install”即可。本文我们选择 spring tools 3 add-on for spring tools 4.3.9.15.release这个版本，当然读者也可以选择自己喜欢的进行安装，其操作方法都差不多，只需要能够创建spring boot项目即可。</p>
<h4 id="使用spring-tool-suite-创建spring-boot-web项目"><a href="#使用spring-tool-suite-创建spring-boot-web项目" class="headerlink" title="使用spring tool suite 创建spring boot web项目"></a>使用spring tool suite 创建spring boot web项目</h4><p>![](_v_images&#x2F;20210102160008058_1918180747.png &#x3D;891x)</p>
<blockquote>
<p>eclipse开发环境下，选择 File -&gt; New -&gt; Other -&gt; Spring Boot -&gt; Spring Starter Project </p>
</blockquote>
<p>之后选择你心仪的spring boot版本和你要创建的spring boot的类型，就是说你打算用spring boot干什么，和选择spring boot的类型，之后按照流程走就没什么问题了，最终可以创建spring boot项目就行，在此之后即创建了spring boot项目后就是等待的时间，就是说你还要等待很多，这个过程建议你睡一会，醒来之后就会发现下载完成了。</p>
<h2 id="启动spring-boot"><a href="#启动spring-boot" class="headerlink" title="启动spring boot"></a>启动spring boot</h2><h3 id="编写控制器（Controller）"><a href="#编写控制器（Controller）" class="headerlink" title="编写控制器（Controller）"></a>编写控制器（Controller）</h3><p>在spring boot项目中的<code>src/main/java/</code>中创建与DemoApplication.java同一目录级别的控制器即HelloWorldController.java</p>
<h4 id="HelloWorldController-java"><a href="#HelloWorldController-java" class="headerlink" title="HelloWorldController.java"></a>HelloWorldController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorldController</span> &#123;</span><br><span class="line">	<span class="meta">@GetMapping(value = &quot;/test&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Hello,world!&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="启动控制器（HelloWorldController-java）"><a href="#启动控制器（HelloWorldController-java）" class="headerlink" title="启动控制器（HelloWorldController.java）"></a>启动控制器（HelloWorldController.java）</h3><p>选择自定义启动器即Run Configuration……，然后选择spring boot启动即可,访问  <a target="_blank" rel="noopener" href="http://localhost:8080/test">http://localhost:8080/test</a> 即可查看spring 开发环境是否运行正常：</p>
<h2 id="Spring-boot全局配置"><a href="#Spring-boot全局配置" class="headerlink" title="Spring boot全局配置"></a>Spring boot全局配置</h2><p>通常spring boot的全局配置都由<code>src/main/resource/application.properties</code>文件来进行配置，如配置端口、web上下文路径等。如需使用application.properties上配置端口和程序名称可通过下方code进行设置：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 配置应用程序名称</span><br><span class="line">spring.application.name = demoApplication</span><br><span class="line"></span><br><span class="line"># 配置端口</span><br><span class="line">server.port = <span class="number">8081</span></span><br></pre></td></tr></table></figure>

	

	

</article>





	<span class="different-posts">📖 <a href="/page/16">more posts</a> 📖</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
