<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">📖 <a href="/page/15">earlier posts</a> 📖</span>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/12.Spring boot Security/">Spring boot Security</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>Spring boot Security即Spring推出的一个专门针对于Spring应用系统的安全框架，充分利用了spinrg框架的整体功能为Spinrg应用提供了安全访问控制的解决方案。在Spring boot Security之中或是网络安全中有两个非常重要的概念分别为**授权(Authorization)<strong>和</strong>认证(Authentication)**两个，授权即确定用户在当前应用系统下所有的功能和权限，而认证即确认是否有级别，或是条件来进入当前系统身份。</p>
<h2 id="Spring-Security-请求授权"><a href="#Spring-Security-请求授权" class="headerlink" title="Spring Security 请求授权"></a>Spring Security 请求授权</h2><p>在Spring Security之中的适配器类里，通过重写configure(HTTOSecurity http)方法完成用户授权，在configure(HttpSecurity http)方法中，在匹配请求路径后，可以针对当前用户对请求进行安全的处理，Spring boot提供的安全方法如：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>anyRequest</td>
<td>匹配所有请求路径</td>
<td></td>
</tr>
<tr>
<td>access(String attribute)</td>
<td>Spring EL表达式结果为true时可以访问</td>
<td></td>
</tr>
<tr>
<td>anonymous()</td>
<td>匿名可以访问</td>
<td></td>
</tr>
<tr>
<td>authenticated()</td>
<td>用户登入后可以访问</td>
<td></td>
</tr>
<tr>
<td>denyAll()</td>
<td>用户不能访问</td>
<td></td>
</tr>
<tr>
<td>fullyAuthenticated()</td>
<td>用户完全认证可以访问</td>
<td></td>
</tr>
<tr>
<td>permitAll()</td>
<td>任何用户都可以访问</td>
<td></td>
</tr>
<tr>
<td>remernberMe()</td>
<td>允许通过remember-me登入的用户访问</td>
<td></td>
</tr>
<tr>
<td>hasAnyAuthority(String)</td>
<td>参数表示权限</td>
<td>用户与群线任一权限相同即可访问</td>
</tr>
<tr>
<td>hasAnyRole(String)</td>
<td>参数表示角色</td>
<td>用户角色与其中任一角色相爱嗯痛即可访问</td>
</tr>
<tr>
<td>hasAuthority(String authority)</td>
<td>参数表示权限</td>
<td>用户权限与参数相同即可访问</td>
</tr>
<tr>
<td>hasIpAddress(String ipaddressExpression)</td>
<td>参数表示IP地址</td>
<td>用户IP和参数匹配即可访问</td>
</tr>
<tr>
<td>hasRole(String role)</td>
<td>参数表示角色</td>
<td>用户角色与参数相同即可访问</td>
</tr>
</tbody></table>
<h2 id="Spring-boot-Security-核心类"><a href="#Spring-boot-Security-核心类" class="headerlink" title="Spring boot Security 核心类"></a>Spring boot Security 核心类</h2><p>Spring boot Security 核心类共包括<code>Authentication、SecurityContextHolder、UserDetails、UserDetailsService、GrentedAuthority、DaoAuthenticatioProvider、PasswordEncoder</code>等核心类分别主要用于：</p>
<h3 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h3><p>authentication用于封装用户认证的信息接口，在用户登入之前spring Security将相关信息会分装成一个Authentication具体的实现类对象，登入后将会生成一个更加全面和包含用户权限的Authentication对象，之后将对象保存在SecurityContextHolder所持有的SecurityContext中。</p>
<h3 id="SecurityContextHolder"><a href="#SecurityContextHolder" class="headerlink" title="SecurityContextHolder"></a>SecurityContextHolder</h3><p>SecurityContextHolder及是SecurityContext的所有类，SecurityContext中将会包含当前认证用户的详细信息。Spring Security使用一个Authentication对象描述当前认证用户的相关信息。</p>
<h3 id="UserDetails"><a href="#UserDetails" class="headerlink" title="UserDetails"></a>UserDetails</h3><p>UserDetails是spring Security的一个核心接口，该接口定义了一些可以用户获取用户名、密码、权限等与认证信息相关的方法。</p>
<h3 id="UserDatailsService"><a href="#UserDatailsService" class="headerlink" title="UserDatailsService"></a>UserDatailsService</h3><p>UserDatails是通过UserDatailsService的loadUserByUsername(String username)方法加载的，而UserDatailsService也是一个接口，也需要实现自己的价值来加载自定义UserDatails。所以在等于认证的时候Spring Security将会通过UserDatailsService的loadUserByUsername方法来获取对应的UserDatails进行验证。<br>而验证后将会通过该UserDetails赋予认证通过的Auhentication的principal，之后Auhentication保存在SecurityContetHelder之中，在开发的过程中，如果需要使用用户信息，可以通过SecurityContetHelder获取存放在SecurityContext中存放于UserDetails实力里的Authentication、principal方法。</p>
<h3 id="GrantedAuthority"><a href="#GrantedAuthority" class="headerlink" title="GrantedAuthority"></a>GrantedAuthority</h3><p>GrantedAuthority是一个接口，通常是通过UserDetailsService进行加载，然后赋值给UserDetails。在Authentication的getAuthorities()方法可以返回当前Authentication对象拥有的权限，即返回一个GrantedAuthority类型的数组。</p>
<h3 id="DaoAuthenticationProvider"><a href="#DaoAuthenticationProvider" class="headerlink" title="DaoAuthenticationProvider"></a>DaoAuthenticationProvider</h3><p>在Spring Security的安全框架中，默认使用DaoAuthenticationProvider来实现AuthenticationProvider接口进行用户的认证处理。DaoAuthenticationProvider进行认证的时候需要一个UserDrtailsService来获取用户信息的UserDetails。</p>
<h3 id="PasswordEncoder"><a href="#PasswordEncoder" class="headerlink" title="PasswordEncoder"></a>PasswordEncoder</h3><p>在Spring Security安全框架中，通过PasswordEncoder接口完成对密码的加密，PasswordEncoder有多种实现，其中包含<code>MD55、SHA-256</code>的加密等，开发时可直接使用即可。在Spring boot之中，使用BCryptPasswordEncoder加密是比较不错的选择，BCryptPasswordEncoder使用BCrypt的强散列哈兮加密进行实现，并可由客户端指定加密的强度，从字面意思上来理解就是说强度越高、安全性就越高。</p>
<p>本书作为Spring boot 和Thymeleaf基础入门指导书，暂不对Spring Security有过多描述，作者也曾尝试着实现Spring Security，但实在太多，已经超出了本书的字数和章节范围，有兴趣的读者可自行阅读，下一次将会另出一本专门针对Spring Security的书籍。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/11.Spring boot and Thymeleaf Data visit this Spring Data and Hibernate/">Spring boot and Thymeleaf Data visit this Spring Data and Hibernate</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>本章节主要用于讲述和演示Spring boot配合Thymeleaf做数据访问的相关案例和技术演示，即通过本章章节“Spring boot and Thymeleaf Data visit”即“spring boot 和 Thymeleaf数据访问”。</p>
<p>本章将通过Spring Data JPA、Spring boot MyBatis、Spring boot REST、Spring boot MongoDB、Spring boot Redis、以及数据缓存Cache来进行讲解。Spring Data 是Spring 访问数据库的一大堆解决方案，包含大量的关系型数据库以及非关系型数据库的数据访问解决方案。</p>
<h2 id="Spring-Data-JPA"><a href="#Spring-Data-JPA" class="headerlink" title="Spring Data JPA"></a>Spring Data JPA</h2><p>Spring Data JPA从名称中我们可以得到，Spring Data JPA是Spring Data的子项目，在学习Spring Data Jpa之前，我们先学习下Hibernate，与其说是Spring Data JPA，更不如说是Hibernate，因为Spring Data JPA的功能，基本上都是由Hibernate所实现的。</p>
<p>从Spring Data JPA中我们可得知，Spring Data JPA的全程是Java Persistence API，即Java持久性映射，而Java持久性映射则是由官方提出的Java持久化规范，通过注解或XML描述对象的一种映射关系，将内存中的实体对象来操纵数据库，Spring Data JPA通过提供基于JPA的仓库极大的简化了JAP的写法，在不写实现类的时候，即可实现数据库的访问操作。    </p>
<h3 id="Spring-Data-体系结构"><a href="#Spring-Data-体系结构" class="headerlink" title="Spring Data 体系结构"></a>Spring Data 体系结构</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
<th>FD</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Persistence</td>
<td>用于获取EntityManagerFactory实例的静态方法类</td>
<td>EntityManagerFactory</td>
</tr>
<tr>
<td>2</td>
<td>EntityManagerFactory</td>
<td>是一个EntityManager的工厂类，创建并管理许多EntityManager的实例</td>
<td>EntityManager</td>
</tr>
<tr>
<td>3</td>
<td>EntityManager</td>
<td>是一个接口，用于查询实例并控制对象的持久化操作</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>Entity</td>
<td>Entity是作为记录存储在数据库中的持久性对象</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>Persistence Unit</td>
<td>Persistence Unit 定义了一组所有的实体类，在应用程序中由 EntityManager实例来管理（实体类集表示存储中的数据）</td>
<td>EntityManager</td>
</tr>
<tr>
<td>6</td>
<td>EntityTransaction</td>
<td>EntityTransaction class与EntityManager class有对应的关系，对于每个EntityManage，都是由EntityTransaction类进行维护</td>
<td>EntityTransaction</td>
</tr>
<tr>
<td>7</td>
<td>Query</td>
<td>由每一个JPA大熔炉实现的借口，用于获取满足条件的关系对相爱</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Spring-Data-对象映射关系"><a href="#Spring-Data-对象映射关系" class="headerlink" title="Spring Data 对象映射关系"></a>Spring Data 对象映射关系</h3><p>在对象映射关系（Object Relational Mapping）中，Java Object到数据库表的映射过程被称之为<strong>对象关系映射</strong>，对象关系映射被充当关系数据库和Java class\object之间的桥梁</p>
<h2 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h2><p>Hibernate是一个开源的对象关系映射框架，对JDBC进行了非常轻量级的对象封装，从文档中我们可以得知，他将<strong>普通Java对象</strong>，与数据库建立映射关系，是一个全自动的<strong>对象关系映射</strong>框架，Hibernate由于通过普通Java对象与数据库建立映射关系，所以从而可达到自动生成SQL语句并执行的功能，让开发人员摆脱烦恼，一盏到底。</p>
<h3 id="Hibernate-and-Spring-Data-JPA-区别"><a href="#Hibernate-and-Spring-Data-JPA-区别" class="headerlink" title="Hibernate and Spring Data JPA 区别"></a>Hibernate and Spring Data JPA 区别</h3><p>Jap可以理解为是一个标准接口，而Hibernate则是一个实现，但是功能什么的都是JPA所提供的，Hibernate主要通过三个组件来实现，分别时<code>hibernate-annotation、hibernate-entitymanager、Hibernate</code>三个组件来实现：</p>
<h4 id="hibernate-annotation"><a href="#hibernate-annotation" class="headerlink" title="hibernate-annotation"></a>hibernate-annotation</h4><p>hibernate-annotation是Hibernate支持annotatio方法配置的基础，主要包括了标准的Jpa annotation以及Hibernate自身功能的annotation。</p>
<h4 id="hibernate-core"><a href="#hibernate-core" class="headerlink" title="hibernate-core"></a>hibernate-core</h4><p>hibernate-core是Hibernate的核心，主要功能则是<strong>实现</strong>，因为最主要的，还是需要看到的。</p>
<h4 id="hibermate-entitymanager"><a href="#hibermate-entitymanager" class="headerlink" title="hibermate-entitymanager"></a>hibermate-entitymanager</h4><p>hibermate-entitymanager实现了标准的JPA，是一个hibernate-core和JPA的适配器，并不直接提供对象映射关系（Object Relational Mapping），而是对hibernate-core进行封装，让他符合JPA的代码规范。</p>
<h2 id="Spring-data-jpa-hibernate"><a href="#Spring-data-jpa-hibernate" class="headerlink" title="Spring data jpa + hibernate"></a>Spring data jpa + hibernate</h2><p>在项目创建完成后，通过访问<a target="_blank" rel="noopener" href="http://localhost:8080/demo/save/%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B9%8B%E5%90%8E%E5%BD%93%E6%98%BE%E7%A4%BA%E6%8F%92%E5%85%A5%E6%88%90%E5%8A%9F%E5%90%8E%E8%AE%BF%E9%97%AEhttp://localhst:8080/demo/findAll%E6%9D%A5%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%BD%93%E7%84%B6%E6%88%91%E4%BB%AC%E8%BF%98%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BF%E9%97%AEhttp://localhost:8080/demo/findByUsernameLike?username=k%EF%BC%8C%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2%EF%BC%8C%E9%99%A4%E6%AD%A4%E4%B9%8B%E5%A4%96%EF%BC%8C%E6%88%91%E4%BB%AC%E8%BF%98%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BF%E9%97%AEhttp://localhost:8080/demo/getOne?id=1%E6%9D%A5%E9%80%9A%E8%BF%87id%E8%BF%9B%E8%A1%8C%E6%9F%A5%E6%89%BE%E4%BF%A1%E6%81%AF%E3%80%82">http://localhost:8080/demo/save/来进行插入数据，之后当显示插入成功后访问http://localhst:8080/demo/findAll来查看所有用户信息，当然我们还可以通过访问http://localhost:8080/demo/findByUsernameLike?username=k，来进行模糊搜索，除此之外，我们还可以通过访问http://localhost:8080/demo/getOne?id=1来通过id进行查找信息。</a></p>
<h3 id="构建项目"><a href="#构建项目" class="headerlink" title="构建项目"></a>构建项目</h3><h4 id="Spring-data-jpa-and-thymeleaf"><a href="#Spring-data-jpa-and-thymeleaf" class="headerlink" title="Spring data jpa and thymeleaf"></a>Spring data jpa and thymeleaf</h4><p>在开始对项目编写之前，需要使用Spring Initializrl来创建spring boot项目，并添加Tthymeleaf、Spring Data JPA、Spring boot Web的支持，然后对项目pom.xml进行一定的配置。</p>
<h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><p>pom.xml在本次的过程中主要用于添加MySQL依赖，其MySQL版本为<code>5.6.50</code>，但由于版本过高并没有直接使用此版本的依赖而是使用<code>5.1.45</code>的数据库依赖，以下是pom.xml信息</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.45<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在这个过程中，如果xml配置文件出现问题，而这里的问题指的是xml文件下在mysql部分中存在红色的波浪线，可通过重新下载maven依赖包来解决：</p>
<blockquote>
<p>mvn -U idea:idea</p>
</blockquote>
<h4 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [servlet]</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/demo</span></span><br><span class="line"><span class="comment"># [thymeleaf] 关闭html缓存</span></span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># [datasource] 指定数据库</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/test?</span></span><br><span class="line"><span class="comment"># 数据库帐号与密码 username&amp;password</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">toor</span></span><br><span class="line"><span class="comment"># 加载数据库驱动 com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment"># [jpa] 指定数据库类型为MySQL</span></span><br><span class="line"><span class="attr">spring.jpa.database</span>=<span class="string">mysql</span></span><br><span class="line"><span class="comment"># 是否在日志中显示SQL语句</span></span><br><span class="line"><span class="attr">spring.jpa.show-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 是否自动创建、更新数据库表等配置信息，如果存在则不需要创建，不存在时才创建</span></span><br><span class="line"><span class="attr">spring.jpa.hibernate.ddl-auto</span>=<span class="string">update</span></span><br></pre></td></tr></table></figure>
<p>在spring boot的全局配置文件application.properties中，配置关闭thymleaf缓存来达到不用重启就能看到修改后结果的需求，并指定其目录、数据库、数据库类型等功能，详情可通过阅读配置文件即可。</p>
<h3 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h3><h4 id="MyUser-java"><a href="#MyUser-java" class="headerlink" title="MyUser.java"></a>MyUser.java</h4><p>在com.demo下创建example，然后在创建entity包，之后创建MyUser实体类，定义表名称为“user_name”和主键username、age、gender、id等</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user_name&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyUser</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        |-user_name 表中的主键分别为</span></span><br><span class="line"><span class="comment">        |----|- id int</span></span><br><span class="line"><span class="comment">        |----|- age int</span></span><br><span class="line"><span class="comment">        |----|- username string</span></span><br><span class="line"><span class="comment">        |----|- gender string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// id</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// age</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// username</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// gender</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="数据访问层"><a href="#数据访问层" class="headerlink" title="数据访问层"></a>数据访问层</h3><h4 id="UserRepository-java"><a href="#UserRepository-java" class="headerlink" title="UserRepository.java"></a>UserRepository.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.entity.MyUser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;MyUser, Integer&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt;findByUsernameLike(String username);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="创建业务层"><a href="#创建业务层" class="headerlink" title="创建业务层"></a>创建业务层</h3><h4 id="UserService-java"><a href="#UserService-java" class="headerlink" title="UserService.java"></a>UserService.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.entity.MyUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt;findAll();</span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt;findByUsernameLike(String username);</span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">getOne</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="UserServicelmpl-java"><a href="#UserServicelmpl-java" class="headerlink" title="UserServicelmpl.java"></a>UserServicelmpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.entity.MyUser;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.repository.UserRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MyUser</span> <span class="variable">myUser1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyUser</span>();</span><br><span class="line">            myUser1.setUsername(<span class="string">&quot;kunlunsiqu&quot;</span>);</span><br><span class="line">            myUser1.setGender(<span class="string">&quot;N&quot;</span>);</span><br><span class="line">            myUser1.setAge(<span class="number">20</span>);</span><br><span class="line">        <span class="type">MyUser</span> <span class="variable">myUser2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyUser</span>();</span><br><span class="line">            myUser2.setUsername(<span class="string">&quot;flydata&quot;</span>);</span><br><span class="line">            myUser2.setGender(<span class="string">&quot;M&quot;</span>);</span><br><span class="line">            myUser2.setAge(<span class="number">21</span>);</span><br><span class="line">        <span class="type">MyUser</span> <span class="variable">myUser3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyUser</span>();</span><br><span class="line">            myUser3.setUsername(<span class="string">&quot;gscssd&quot;</span>);</span><br><span class="line">            myUser3.setGender(<span class="string">&quot;N&quot;</span>);</span><br><span class="line">            myUser3.setAge(<span class="number">30</span>);</span><br><span class="line">        List&lt;MyUser&gt; users = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;MyUser&gt;();</span><br><span class="line">            users.add(myUser1);</span><br><span class="line">            users.add(myUser2);</span><br><span class="line">            users.add(myUser3);</span><br><span class="line">        userRepository.saveAll(users);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">findByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt; <span class="title function_">findByUsernameLike</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findByUsernameLike(<span class="string">&quot;%&quot;</span> + username + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">getOne</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.getOne(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="控制器类"><a href="#控制器类" class="headerlink" title="控制器类"></a>控制器类</h3><h4 id="UserController-java"><a href="#UserController-java" class="headerlink" title="UserController.java"></a>UserController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.service.UserService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">            userService.saveAll();</span><br><span class="line">            System.out.println(<span class="string">&quot;UserController&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;保存成功&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findByUsername&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findByUsername</span><span class="params">(String username, Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;根据名称查询&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;auser&quot;</span>, userService.findByUsername(username));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAuser&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getOne&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getOne</span><span class="params">(<span class="type">int</span> id, Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;根据名称id查询&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;auser&quot;</span>, userService.getOne(id));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAuser&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findAll</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;查询所有&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;allUsers&quot;</span>, userService.findAll());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAll&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findByUsernameLike&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findByUsernameLike</span><span class="params">(String username,Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;用户名模糊查询&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;allUsers&quot;</span>, userService.findByUsernameLike(username));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAll&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h3><h4 id="showAll-html"><a href="#showAll-html" class="headerlink" title="showAll.html"></a>showAll.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;showAll&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Spring Data JPA and MySQL + Thymeleaf&lt;/h5&gt;</span><br><span class="line">    &lt;p th:text=&quot;$&#123;title&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;序号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;名称&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;性别&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr th:each=&quot;user: $&#123;allUsers&#125;&quot;&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getId()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getUsername()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getGender()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getAge()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="showAuser-html"><a href="#showAuser-html" class="headerlink" title="showAuser.html"></a>showAuser.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;showAuser&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Spring Data JPA and MySQL + Thymeleaf&lt;/h5&gt;</span><br><span class="line">    &lt;p th:text=&quot;$&#123;title&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;序号&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;性别&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.id&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.username&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.gender&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.age&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/10.Spring boot and Thymeleaf Web/">Spring boot and Thymeleaf Web</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>在上述文章之中我们主要撰写并列举了常用的Thymeleaf标签及表达式，通过上述文章我们将会在本章中列举一些真实的项目案例如表单的提交、国际化页面的撰写等。</p>
<h2 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h2><p>表单是在前端页面中不可缺失的一部分，通常应用在搜索、登入&#x2F;注册、提交等页面之中，通过本书列举的Thymeleaf例子可更容易编写由Thymeleaf的动态页面：</p>
<h3 id="login-html"><a href="#login-html" class="headerlink" title="login.html"></a>login.html</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;login&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Thymeleaf is login&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;form action=&quot;#&quot; th:action=&quot;@&#123;/login&#125;&quot; th:object=&quot;$&#123;loginBean&#125;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;username: &lt;input type=&quot;text&quot; th:field=&quot;*&#123;username&#125;&quot; th:placeholder=&quot;username&quot; /&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;age: &lt;input type=&quot;text&quot; th:field=&quot;*&#123;age&#125;&quot; th:placeholder=&quot;age&quot; /&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;submit&quot; /&gt;&lt;input type=&quot;reset&quot; value=&quot;reset&quot; /&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="result-html"><a href="#result-html" class="headerlink" title="result.html"></a>result.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;result&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Thymeleaf submit an result&lt;/h5&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;p th:text=&quot;&#x27;username: &#x27; + $&#123;loginBean.username&#125;&quot; /&gt;</span><br><span class="line">    &lt;p th:text=&quot;&#x27;age: &#x27; + $&#123;loginBean.age&#125;&quot; /&gt;</span><br><span class="line">    &lt;a href=&quot;/toLogin&quot; th:text=&quot;@&#123;toLogin&#125;&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="LoginController-java"><a href="#LoginController-java" class="headerlink" title="LoginController.java"></a>LoginController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> com.example.model.LoginBean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;toLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;loginBean&quot;</span>,<span class="keyword">new</span> <span class="title class_">LoginBean</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">greetingSubmit</span><span class="params">(<span class="meta">@ModelAttribute</span> LoginBean loginBean)</span> &#123;</span><br><span class="line">        <span class="comment">// LoginBean username&amp;age</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Test one data:&quot;</span> + loginBean.getUsername());</span><br><span class="line">            System.out.println(<span class="string">&quot;Test two data:&quot;</span> + loginBean.getAge());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;result&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="LoginBean-java"><a href="#LoginBean-java" class="headerlink" title="LoginBean.java"></a>LoginBean.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginBean</span> &#123;</span><br><span class="line">    String username;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// username</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// age</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="国际化（i18n）"><a href="#国际化（i18n）" class="headerlink" title="国际化（i18n）"></a>国际化（i18n）</h2><p>国际化是一个大型网站中必备的一个服务之一，主要用于服务于不同种族、宗教信仰、国家和地区的人们沟通的一个非常重要的工具，通过Thymeleaf来实现站点国际化服务无非是一件非常不错的事情，甚至比原生的更加顺利。<br>至于标题中的国际化 i18n的意思为 国际化英文单词 internationalization，18为中间的字符数，是“国际化”的简称，通常在资讯领域，国际化是指让产品、出版物、软件，无需做大的改变就可适应不同的地区和语言需要，而对程序来说则是&#96;&#96;&#96;不需要修改内部代码的情况下，根据不同语言及其地区显示相应的页面。</p>
<h3 id="i18n-properties"><a href="#i18n-properties" class="headerlink" title="i18n properties"></a>i18n properties</h3><p>本书我们通过IDEA作为主要的集成开发环境进行开发，首先建立一个spring boot web + thymeleaf 的maven项目即通过spring Initializr工具构建的web项目，在<code>src/main/resources/static/</code>中新建目录为<code>i18n</code>用于存储i18n语言文件。</p>
<p>之后右键<code>resources/static/i18n/</code>目录选择 New-&gt;Resource Bundle，出现Create Resource Bundle窗口下，此时可通过项目语言（Project Locales）移动到（&gt;） 语言添加（Locales to Add）</p>
<p>在然后双击在IDEA中双击 <code>src/main/resources/static/i18n/Resource Bundle &#39;home&#39;</code>出现.properties配置页面，点击“+”号建立其各语言变量名。</p>
<h4 id="home-properties"><a href="#home-properties" class="headerlink" title="home.properties"></a>home.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为默认语言文件，可为空，但文件不可不存在。</span></span><br></pre></td></tr></table></figure>
<h4 id="home-en-US-properties"><a href="#home-en-US-properties" class="headerlink" title="home_en_US.properties"></a>home_en_US.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">home.i8n</span>=<span class="string">en_US</span></span><br><span class="line"><span class="attr">home.title</span>=<span class="string">Hello,world!</span></span><br></pre></td></tr></table></figure>
<h4 id="home-zh-CN-properties"><a href="#home-zh-CN-properties" class="headerlink" title="home_zh_CN.properties"></a>home_zh_CN.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">home.i8n</span>=<span class="string">zh_CN</span></span><br><span class="line"><span class="attr">home.title</span>=<span class="string">你好世界！</span></span><br></pre></td></tr></table></figure>

<h3 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h3><p>在application.yml中，主要存放于和<code>application.properties</code>同级目录下，用于配置我们的i18n文件所在目录和项目的编码信息，通过设置application.yml可设置 i18n文件目录及文件名（相对目录，不要使用绝对目录）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  messages:</span><br><span class="line">    basename: static/i18n/home</span><br><span class="line">    encoding: UTF-8</span><br></pre></td></tr></table></figure>
<h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">static/i18n/home</span></span><br></pre></td></tr></table></figure>
<h3 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h3><h4 id="LocaleConfigucation-java"><a href="#LocaleConfigucation-java" class="headerlink" title="LocaleConfigucation.java"></a>LocaleConfigucation.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.LocaleResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.i18n.LocaleChangeInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.i18n.SessionLocaleResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LocaleConfigucation</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> LocaleResolver <span class="title function_">localeResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 默认语言</span></span><br><span class="line">            <span class="type">SessionLocaleResolver</span> <span class="variable">sessionLocaleResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SessionLocaleResolver</span>();</span><br><span class="line">            sessionLocaleResolver.setDefaultLocale(Locale.US);</span><br><span class="line">            <span class="comment">// 断点测试拦截器是否执行</span></span><br><span class="line">            System.out.println(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sessionLocaleResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">localeInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry interceptorRegistry)</span> &#123;</span><br><span class="line">                <span class="type">LocaleChangeInterceptor</span> <span class="variable">localeInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LocaleChangeInterceptor</span>();</span><br><span class="line">                localeInterceptor.setParamName(<span class="string">&quot;lang&quot;</span>);</span><br><span class="line">                interceptorRegistry.addInterceptor(localeInterceptor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="首页文件"><a href="#首页文件" class="headerlink" title="首页文件"></a>首页文件</h3><h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;index&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf i18n &lt;span th:text=&quot;#&#123;home.i8n&#125;&quot;&gt;&lt;/span&gt; &lt;/h5&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=&quot;?lang=zh_CN&quot;&gt;中文&lt;/a&gt;/&lt;a href=&quot;/?lang=en_US&quot;&gt;English&lt;/a&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;h5 th:text=&quot;#&#123;home.title&#125;&quot;&gt;&lt;/h5&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/1.Spring boot 简介/">Spring Boot</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>spring与spring boot的明显区别可以从配置文件出发观察，spring开发框架虽然强大但问题在于“配置文件过多”，造成开发的效率降低且不方便，就如spring mvc而看，spring mvc共需要配置两个xml才可输出一个“hello,world”，所以就造成了开发效率和部署缓慢的问题。而spring boot的出现大而解决了这种看似不是问题又非常无语的过程。</p>
<h2 id="spring-boot-概述"><a href="#spring-boot-概述" class="headerlink" title="spring boot 概述"></a>spring boot 概述</h2><p>spring boot是由pivotal团队提供的全新框架，其设计的初衷和目的就是来简化spring应用部署及开发过程，名面上说就是不用在开发的过程中遭受spring xml折磨，使用spring boot框架可以用于做到一专注于spring的应用开发，从而不用关注太多的xml配置。<br>在spring boot框架中，使用“约定优于配置（Convention Over Configuration）”的设计理念，针对企业应用而开发，提供了符合各种应用场景的spring-boot-starter的自动化配置依赖横块，这些模块和spring boot都是基于“<strong>开箱即用</strong>”的原则，从而免于spring的各种折磨。</p>
<h2 id="spring-主要特征"><a href="#spring-主要特征" class="headerlink" title="spring 主要特征"></a>spring 主要特征</h2><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>约定优于配置</td>
<td>springboot遵循约定优于配置的规则很少需要配置，多数情况主要使用默认配置即可</td>
</tr>
<tr>
<td>独立运行</td>
<td>springboot可以以jar包的形式独立进行运行，可以使用“java -jar xxx”运行或者在项目的主程序中执行main方法执行springboot项目</td>
</tr>
<tr>
<td>内嵌web浏览器</td>
<td>内嵌servlet容器，可以选择内嵌tomcat等web容器</td>
</tr>
<tr>
<td>提供starter简化maven配置</td>
<td>springboot提供了一系列的starter pom来简化maven的依赖加载问题，<strong>基本上</strong>做到了自动化配置开箱即用。</td>
</tr>
<tr>
<td>自动化配置 spring</td>
<td>springboot根据项目依赖（在类的路径中的jar包和class），自动化配置spring框架，减少了spring项目开发前的各种问题。</td>
</tr>
<tr>
<td>提供生产监控</td>
<td>springboot提供了基于http、ssh、telnet对运行的项目进行跟踪监控</td>
</tr>
<tr>
<td>无代码生成 and xml配置</td>
<td>springboot不是借助代码来生成的，而是通过条件注解来实现的，提倡使用java配置相结合的配置，方便快捷</td>
</tr>
</tbody></table>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring alibaba/2.Spring Cloud Apache Dubbo/">Spring Cloud Apache Dubbo</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring-cloud-alibaba/" rel="tag">spring cloud alibaba</a>
			</span>
		
	</div>

	

	
		<p>Dubbos 是 Alibaba 于 2012 年开源，由于当时该项目是内部使用的一个分布式服务治理框架，并经历过多年的大规模业务验证，在短时间内收到很多开发者喜爱，但是处于某些原因在 2014 年停止了维护，所有就出现了当当网的 DubboX，但在 2017 年 9 月，Alibaba 又重启了 Dubbo 项目的维护，于 2018 年 2 月 进入了 Apache 孵化，这意味着 Dubbo 框架并不是只属于 Alibaba ，还属于开源社区的贡献。</p>
<p>在 2019 年 5 月 Dubbo 正式从孵化器中毕业，正式成为 “Apache Dubbo”，意味着这是 Apache 的顶级项目。在目前 Dubbo 主要的作用就是监控和服务注册两个非常常用的功能，除此之外他还提供了服务治理、服务注册、监控、路由容错等功能。</p>
<p>促使 Dubbo 项目产生的两个痛点就是服务提供者服务的连接，通常我们使用的是 URL，但如果服务提供者出现故障或者扩容时就需要来维护服务消费者或者服务中心的地址，因此这种维护方式非常麻烦。除</p>
<p>此我们还需要通过监控来发现那些服务需要进行扩容，那一些服务是不需要这么大性能的，因此需要一个判断的根据，所以可以通过监控来根据不同服务访问的情况来合理调用服务资源，提高机器的利用率。</p>
<blockquote>
<p>因此 Dubbo 也类似一个 RPC 框架，但和普通类似框架不同的是它还提供了一个服务治理的功能</p>
</blockquote>
<h2 id="Spring-Boot-in-Apache-Dubbo-and-Nacos"><a href="#Spring-Boot-in-Apache-Dubbo-and-Nacos" class="headerlink" title="Spring Boot in Apache Dubbo and Nacos"></a>Spring Boot in Apache Dubbo and Nacos</h2><p>Dubbo 除了支持 Spring Cloud 之外，它还支持 Spring Boot 的生态来实现微服务，因此我们在讲解 Spring Cloud Dubbo 之外还需要了解下 ZooKeeper 和 Apache Dubbo 所实现出的微服务效果。</p>
<h3 id="服务接口"><a href="#服务接口" class="headerlink" title="服务接口"></a>服务接口</h3><p>为了方便我们的的共用实体类，因此我们可以新建一个普通的 maven 文件，当开饭完成后导出为 jar 包，之后就可以在其他需要的时候直接调用依赖即可：</p>
<blockquote>
<p>可以理解为就是将实体类安装本地依赖中，然后用的时候直接引入依赖和工具类即可。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> model;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义接口</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> kunlun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/8/5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">heyService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回接口</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> load 服务消费者是</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">getData</span><span class="params">(String load)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当写好之后我们直接在项目的父目录运行 <code>mvn compile install</code> 直接安装到本地即可，之后可以通过其 <code>pom.xml</code> 定义的名称进行引入本地依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring alibaba/1.Spring Cloud Alibaba/">Spring Cloud Alibaba</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring-cloud-alibaba/" rel="tag">spring cloud alibaba</a>
			</span>
		
	</div>

	

	
		<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210804183754.png"><br>近年来随着互联网技术的发展，Alibaba 在微服务的贡献出的项目也非常得多，如 Dubbo 在 2021 年进行开源，之后迅速进行发展，直到 Spring Cloud 的出现来打破了传统的维度，之后 2017 年 Dubbo 项目又重新开始活跃，并拥抱 Spring Cloud 标准，也成为了目前国内为数不多可以替代 Netfilx 全家桶的一系列产品。</p>
<p>Spring Cloud Alibaba 系列的产品很受国内开发者喜爱，他也不仅仅是对本土开发者的支持和用户体验，而是这几年来 Alibaba 的产品经验，因此 Alibaba 的解决方案比 Netfile 更加更加人性化和好理解，但缺点在于文档支持没有 Netfile 的生态那么好。</p>
<p>对于 Spring Cloud Alibaba 中主要的组建就是 Dubbo、Nacos、Sentinel、Seata、RocketMQ</p>
<blockquote>
<p>Dubbo</p>
<blockquote>
<p>一个并不简单的 RPC 框架，用于实现多个系统之间的高性能、透明化调用、服务治理（注册、监控、路由、容错）</p>
</blockquote>
<p>ZooKeeper</p>
<blockquote>
<p>可以根据自身特性实现出注册中心，但他本身就是一个分布式协调中间件，因此实现注册中心也是合情合理。</p>
</blockquote>
<p>Nacos</p>
<blockquote>
<p>致力与解决为服务中的统一配置，服务注册与发现等问题，因此可以通过他来实现服务发现、服务配置、服务元数据和流量管理等</p>
</blockquote>
<p>Sentinel </p>
<blockquote>
<p>面向分布式服务架构的轻量级服务控制组建，可以实现对流量的降级和熔断以及一系列的限流规则。</p>
</blockquote>
<p>Seata</p>
<blockquote>
<p>开源的分布式事务解决方案，致力与在微服务中提供高性能和简单易用的分布式事务服务，提供了 AT、TCC、Saga、XA 事务模式</p>
</blockquote>
<p>RocketMQ</p>
<blockquote>
<p>是一个低延迟、高可靠、可伸缩易用于分布式消息中间件，经过 Alibaba 多年的 双 11 验证，因此具有了高吞吐、低延迟、海量消息堆积等特点，同时还提供了顺序消息，事物消息，定时消息，消息重试、消息追踪等特点。</p>
</blockquote>
</blockquote>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/8.Spring MVC/">Spring MVC</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>Spring MVC中的“MVC”,全称即“Model View Contorotoller，视图、模型、控制器”的三个部分，以这三个部分以最低的耦合进行协同工作，从而提高应用的可扩展性和维护性，而Spring MVC 基于MVC思想的而开发的一个框架，实现了Web MVC设计模式的轻量级的web框架。<br>而 Model、View、Controller，即模型、视图、控制器的大概设计为：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>Model</td>
<td>表示程序核心，包含了程序的数据，而数据可以是单个对象或对象的一个集合</td>
</tr>
<tr>
<td>View</td>
<td>以特定格式表示所提供的信息，他通常使用JSP—+JSTL用于创建视图页面</td>
</tr>
<tr>
<td>Controller</td>
<td>控制器包含了应用程序的业务逻辑，而通常使用<code>@Controller</code>的注解将用于表示此类是一个控制器</td>
</tr>
</tbody></table>
<h2 id="Spring-MVC-工作的原理"><a href="#Spring-MVC-工作的原理" class="headerlink" title="Spring MVC 工作的原理"></a>Spring MVC 工作的原理</h2><h3 id="Dispatcher-Select"><a href="#Dispatcher-Select" class="headerlink" title="Dispatcher Select"></a>Dispatcher Select</h3><p>从上图可的知Spring MVC的所有请求都经过了Dispatcher Select即分发器&#x2F;分派器来统一进行分发，之后将轻轻偶发送在Controller（控制器）之前，需要使用Spring MVC提供的Handler Mapping（处理器映射）来寻找处理器映射，从而找到指定的控制器。</p>
<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><p>Controller即控制器，主要完成和处理用户的请求，Controller处理完用户请求后，将会返回ModelAndView（模型和视图）对象给DispatcherSelect（分发器Serlect）而Controller则包含了模型（Model）&#x2F;视图（View）。</p>
<blockquote>
<p>这里作者从两个角度去考虑，如从宏观的角度而看，DispatcherServlet则是一个前端控制器i，而从微观的角度而看，DispatcherServlet则是一个请求处理过程的分派器或控制器。</p>
</blockquote>
<h3 id="ViewResolver"><a href="#ViewResolver" class="headerlink" title="ViewResolver"></a>ViewResolver</h3><p>ViewResolver接口即视图解析程序，主要工作和职能就是在Web应用中负责查找View，然后将相应的结果渲染给访问者。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/7.Java Spring JDBC/">Java Spring JDBC</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>Java Spring JDBC即互联网数据库开发的基础，Spring框架提供了JDBC的模板模式，即JDBCTemplate，可简化很多的沉于代码，但是在实际情况中jdbcTemeplate并不常用，但这对我们学习和理解Spring 和之后的微服务都会起到非常重要的作用，可容易我们以后理解微服务的流程、过程等，本书主要参考了tutorialspoint内的文档而成.<br>在正式开始学习之前，需要使用以下Jar外部依赖包:</p>
<blockquote>
<p>aspectjweaver-1.9.2.jar<br>commons-logging-1.2.jar<br>mysql-connector-java-8.0.22.jar<br>org.springframework.transaction-3.1.0.release.jar<br>spring-aop-5.1.4.RELEASE.jar<br>spring-beans-5.1.4.RELEASE.jar<br>spring-context-5.1.4.RELEASE.jar<br>spring-core-5.1.4.RELEASE.jar<br>spring-expression-5.1.4.RELEASE.jar<br>spring-jdbc-5.1.4.RELEASE.jar<br>spring-tx-5.1.4.RELEASE.jar</p>
</blockquote>
<p>以上jar外部部分依赖包可下载spring框架来引入，而另一部分依赖包需要自行进行查找和下载，可通过<a target="_blank" rel="noopener" href="https://www.findjar.com/">https://www.findjar.com/</a> jar包搜索来下载想要的jar包</p>
<h2 id="数据访问接口"><a href="#数据访问接口" class="headerlink" title="数据访问接口"></a>数据访问接口</h2><h3 id="TestuserDAO-java"><a href="#TestuserDAO-java" class="headerlink" title="TestuserDAO.java"></a>TestuserDAO.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestuserDAO</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 用于初始化数据库连接</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDaotaSource</span><span class="params">(DataSource ds)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 用于初始化数据库连接</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">(String name, <span class="type">int</span> age)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 用于列出方法的记录</span></span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">getStudent</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 用于列出表中的所有记录</span></span><br><span class="line">	<span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">listStudents</span><span class="params">()</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 用于删除的方法</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 用于更新方法即学生表中的记录</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Student-java"><a href="#Student-java" class="headerlink" title="Student.java"></a>Student.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// age</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getage</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// id</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getid</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// name</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getname</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="StudentMapper-java"><a href="#StudentMapper-java" class="headerlink" title="StudentMapper.java"></a>StudentMapper.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.RowMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapper</span> <span class="keyword">implements</span> <span class="title class_">RowMapper</span>&lt;Student&gt; &#123;</span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">mapRow</span><span class="params">(ResultSet rs,<span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">		<span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">			s.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">			s.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">			s.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> s;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现类"><a href="#实现类" class="headerlink" title="实现类"></a>实现类</h3><h4 id="StudentJDBCTemplate-java"><a href="#StudentJDBCTemplate-java" class="headerlink" title="StudentJDBCTemplate.java"></a>StudentJDBCTemplate.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentJDBCTemplate</span> <span class="keyword">implements</span> <span class="title class_">TestuserDAO</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">	<span class="keyword">private</span> JdbcTemplate jdbcTemplateObject;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDataSource</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">			<span class="built_in">this</span>.dataSource = dataSource;</span><br><span class="line">			<span class="built_in">this</span>.jdbcTemplateObject = <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(dataSource);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;insert into testuser (name,age) values (?,?)&quot;</span>;</span><br><span class="line">		jdbcTemplateObject.update(SQL,name,age);</span><br><span class="line">		System.out.println(<span class="string">&quot;Name:&quot;</span> + name + <span class="string">&quot;Age:&quot;</span> + age);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">getStudent</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;select * from testuser where id = ?&quot;</span>;</span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> jdbcTemplateObject.queryForObject(SQL,</span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">Object</span>[] &#123;id&#125;,<span class="keyword">new</span> <span class="title class_">StudentMapper</span>());</span><br><span class="line">		<span class="keyword">return</span> student;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">listStudents</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;select * from testuser&quot;</span>;</span><br><span class="line">		List &lt;Student&gt; students = jdbcTemplateObject.query(SQL, <span class="keyword">new</span> <span class="title class_">StudentMapper</span>());</span><br><span class="line">		<span class="keyword">return</span> students;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;delete from testuser where id = ?&quot;</span>;</span><br><span class="line">		jdbcTemplateObject.update(SQL, id);</span><br><span class="line">		System.out.println(<span class="string">&quot;Delete id:&quot;</span> + id);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;update testuser set age = ? where id = ?&quot;</span>;</span><br><span class="line">		jdbcTemplateObject.update(SQL,age,id);</span><br><span class="line">		System.out.println(<span class="string">&quot;Update id:&quot;</span> + id);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDaotaSource</span><span class="params">(DataSource ds)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MainApp-java"><a href="#MainApp-java" class="headerlink" title="MainApp.java"></a>MainApp.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> Dao.StudentJDBCTemplate;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApp</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">ApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;Beans.xml&quot;</span>);</span><br><span class="line">		<span class="type">StudentJDBCTemplate</span> <span class="variable">s</span> <span class="operator">=</span> </span><br><span class="line">				(StudentJDBCTemplate)application.getBean(<span class="string">&quot;StudentJDBCTemplate&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;_______________)s.create&quot;</span>);</span><br><span class="line">			s.create(<span class="string">&quot;sunone&quot;</span>, <span class="number">21</span>);</span><br><span class="line">			s.create(<span class="string">&quot;sunsun&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;_______________)List&lt;Student&gt; student&quot;</span>);</span><br><span class="line">			List&lt;Student&gt; student = s.listStudents();</span><br><span class="line">			<span class="keyword">for</span> (Student record: student) &#123;</span><br><span class="line">				System.out.println(<span class="string">&quot;age:&quot;</span> + record.getage());</span><br><span class="line">				System.out.println(<span class="string">&quot;id:&quot;</span> + record.getid());</span><br><span class="line">				System.out.println(<span class="string">&quot;name:&quot;</span> + record.getname());</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;________________)s.update&quot;</span>);</span><br><span class="line">			s.update(<span class="number">520</span>,<span class="number">1314</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;________________)Student student&quot;</span>);</span><br><span class="line">			<span class="type">Student</span> <span class="variable">students</span> <span class="operator">=</span> s.getStudent(<span class="number">2</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;id:&quot;</span> + students.getid());</span><br><span class="line">			System.out.println(<span class="string">&quot;age:&quot;</span> + students.getage());</span><br><span class="line">			System.out.println(<span class="string">&quot;name:&quot;</span> + students.getname());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="src"><a href="#src" class="headerlink" title="src"></a>src</h3><h4 id="Beans-xml"><a href="#Beans-xml" class="headerlink" title="Beans.xml"></a>Beans.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version = <span class="string">&quot;1.0&quot;</span> encoding = <span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span> = <span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xmlns:xsi</span> = <span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span> = <span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd &quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- Initialization for data source --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span> = <span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span> = <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;url&quot;</span> <span class="attr">value</span> = <span class="string">&quot;jdbc:mysql://localhost:3306/testsp&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;username&quot;</span> <span class="attr">value</span> = <span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;password&quot;</span> <span class="attr">value</span> = <span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- Definition for studentJDBCTemplate bean --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;StudentJDBCTemplate&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span> = <span class="string">&quot;Dao.StudentJDBCTemplate&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span> = <span class="string">&quot;dataSource&quot;</span> /&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">      </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>以上code可能会运行出错为：<br>Exception in thread “main” java.lang.NoSuchMethodError: org.springframework.dao.support.DataAccessUtils.nullableSingleResult(Ljava&#x2F;util&#x2F;Collection;)Ljava&#x2F;lang&#x2F;Object;<br>    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:784)<br>    at Dao.StudentJDBCTemplate.getStudent(StudentJDBCTemplate.java:30)<br>    at Dao.MainApp.main(MainApp.java:30)<br>细心的读者可通过搜索引擎自行解决，这个报错可能是spring与maven内的依赖版本过高、也可是jar依赖包导入顺序造成的。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/6.Spring Bean/">Java Spring Bean</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>Benan即Spring应用中的IoC容器可以创建、装配、配置的应用组件对象，而这些组件通常会被称之为“Spring Bean”。</p>
<h2 id="Spring-Bean-实例化"><a href="#Spring-Bean-实例化" class="headerlink" title="Spring Bean 实例化"></a>Spring Bean 实例化</h2><p>通常我们在面向对象编程中如果需要使用某某某对象需要事先对其实例化，同样在Spring框架中想使用Spring容器中的Bean即“春豆”，Spring共提供了三种方法，分别为<strong>构造方法、静态工厂实例化、实例工厂实例化，而在这其中最为经常使用的无非就是构造方法实例化</strong></p>
<h3 id="实例化包-instance"><a href="#实例化包-instance" class="headerlink" title="实例化包 instance"></a>实例化包 instance</h3><h4 id="调用构造方法实例化-BeanClass-java"><a href="#调用构造方法实例化-BeanClass-java" class="headerlink" title="调用构造方法实例化 BeanClass.java"></a>调用构造方法实例化 BeanClass.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanClass</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">BeanClass</span><span class="params">()</span> &#123;</span><br><span class="line">		name = <span class="string">&quot;调用构造方法实例化&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">BeanClass</span><span class="params">(String s)</span> &#123;</span><br><span class="line">		name = s;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="调用静态方法实例化-BeanInstanceFactory-java"><a href="#调用静态方法实例化-BeanInstanceFactory-java" class="headerlink" title="调用静态方法实例化 BeanInstanceFactory.java"></a>调用静态方法实例化 BeanInstanceFactory.java</h4><figure class="highlight plaintext"><figcaption><span>instance;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class BeanInstanceFactory &#123;</span><br><span class="line">	public BeanClass createBeanClassInstance() &#123;</span><br><span class="line">		return new BeanClass(&quot;调用实例工厂方法实例化&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="调用实例工厂实例化-BeanStaticFactory-java"><a href="#调用实例工厂实例化-BeanStaticFactory-java" class="headerlink" title="调用实例工厂实例化 BeanStaticFactory.java"></a>调用实例工厂实例化 BeanStaticFactory.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanStaticFactory</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="type">BeanClass</span> <span class="variable">beanInstance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanClass</span>(<span class="string">&quot;调用静态的方法实例化&quot;</span>);</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> BeanClass <span class="title function_">createInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> beanInstance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="建立测试包-config"><a href="#建立测试包-config" class="headerlink" title="建立测试包 config"></a>建立测试包 config</h3><h4 id="实例化类-JavaConfig-java"><a href="#实例化类-JavaConfig-java" class="headerlink" title="实例化类 JavaConfig.java"></a>实例化类 JavaConfig.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> instance.BeanClass;</span><br><span class="line"><span class="keyword">import</span> instance.BeanInstanceFactory;</span><br><span class="line"><span class="keyword">import</span> instance.BeanStaticFactory;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaConfig</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 构造方法实例化</span></span><br><span class="line">	<span class="meta">@Bean(&quot;beanClass&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> BeanClass <span class="title function_">getBeanClass</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanClass</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 静态工厂实例化</span></span><br><span class="line">	<span class="meta">@Bean(&quot;beanStaticFactory&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> BeanClass <span class="title function_">getBeanStaticFactory</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> BeanStaticFactory.createInstance();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 势力工厂实例化</span></span><br><span class="line">	<span class="meta">@Bean(&quot;beanInstanceFactory&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> BeanClass <span class="title function_">getBeanInstanceFactory</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">BeanInstanceFactory</span> <span class="variable">beaninstancefactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanInstanceFactory</span>();</span><br><span class="line">		<span class="keyword">return</span> beaninstancefactory.createBeanClassInstance();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="测试类-TestBean-java"><a href="#测试类-TestBean-java" class="headerlink" title="测试类 TestBean.java"></a>测试类 TestBean.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> instance.BeanClass;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span></span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(JavaConfig.class);</span><br><span class="line">		<span class="comment">// 调用构造方法实例化</span></span><br><span class="line">		<span class="type">BeanClass</span> <span class="variable">beanclassone</span> <span class="operator">=</span> (BeanClass)application.getBean(<span class="string">&quot;beanClass&quot;</span>);</span><br><span class="line">		System.out.println(beanclassone + beanclassone.name);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 调用静态的方法实例化</span></span><br><span class="line">		<span class="type">BeanClass</span> <span class="variable">beanclasstwo</span> <span class="operator">=</span> (BeanClass)application.getBean(<span class="string">&quot;beanStaticFactory&quot;</span>);</span><br><span class="line">		System.out.println(beanclasstwo + beanclasstwo.name);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 调用实例工厂方法实例化</span></span><br><span class="line">		<span class="type">BeanClass</span> <span class="variable">beanclassthree</span> <span class="operator">=</span> (BeanClass)application.getBean(<span class="string">&quot;beanInstanceFactory&quot;</span>);</span><br><span class="line">		System.out.println(beanclassthree + beanclassthree.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Bean-作用域"><a href="#Bean-作用域" class="headerlink" title="Bean 作用域"></a>Bean 作用域</h3><p>在Java Spring Bean作用域中，其中Bean的实例定义了六种作用域，主要可通过@Scope来实现 ：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>singleton</td>
<td>默认使用的作用域，通过使用singleton在Spring中只有一个Bean实例</td>
<td>1</td>
</tr>
<tr>
<td>prototype</td>
<td>Spring 容器每次获取Prototype定义的Bean，容器都将创建一个新的Bean实例</td>
<td>2</td>
</tr>
<tr>
<td>request</td>
<td>在HTTP请求中容器将返回一个Bean实例，仅可以在Web Spring应用上下文中使用</td>
<td>3</td>
</tr>
<tr>
<td>application</td>
<td>在每个ServletContexr对象上创建一个实例，即同一个应用共享一个Bean实例，仅可以在Web Spring应用程序上进行使用</td>
<td>4</td>
</tr>
<tr>
<td>websocket</td>
<td>为每个WebSocket对象中创建一个Bean实例，仅可以在Web Spring应用程序上下文中进行使用</td>
<td>5</td>
</tr>
</tbody></table>
<p>通常在以上的六种作用域中，singleton和prototype是最常用的两种，而其他的作用域使用在Web Spring应用程序上下文中，通过下一个实例来演示Bean作用域。</p>
<h4 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h4><h5 id="ScopeConfig-java"><a href="#ScopeConfig-java" class="headerlink" title="ScopeConfig.java"></a>ScopeConfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScopeConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="TestScope-java"><a href="#TestScope-java" class="headerlink" title="TestScope.java"></a>TestScope.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> service.PrototypeService;</span><br><span class="line"><span class="keyword">import</span> service.SingletonService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestScope</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> </span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(ScopeConfig.class);</span><br><span class="line">		<span class="type">SingletonService</span> <span class="variable">singletonserviceone</span> <span class="operator">=</span> application.getBean(SingletonService.class);</span><br><span class="line">		<span class="type">SingletonService</span> <span class="variable">singletonservicetwo</span> <span class="operator">=</span> application.getBean(SingletonService.class);</span><br><span class="line">		</span><br><span class="line">		System.out.println(singletonserviceone);</span><br><span class="line">		System.out.println(singletonservicetwo);</span><br><span class="line">		</span><br><span class="line">		<span class="type">PrototypeService</span> <span class="variable">prototypeserviceone</span> <span class="operator">=</span> application.getBean(PrototypeService.class);</span><br><span class="line">		<span class="type">PrototypeService</span> <span class="variable">prototypeservicetwo</span> <span class="operator">=</span> application.getBean(PrototypeService.class);</span><br><span class="line">		System.out.println(prototypeserviceone);</span><br><span class="line">		System.out.println(prototypeservicetwo);</span><br><span class="line">		</span><br><span class="line">		application.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><h5 id="PrototypeService-java"><a href="#PrototypeService-java" class="headerlink" title="PrototypeService.java"></a>PrototypeService.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>    </span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrototypeService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="SingletonService-java"><a href="#SingletonService-java" class="headerlink" title="SingletonService.java"></a>SingletonService.java</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>        <span class="comment">// 默认为 singleton 相当于@Scope(&quot;singleton&quot;);</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingletonService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上图的运行结果可以的出@Service与@Scope(“prototype”)两个一起使用和单个使用的不同是最后在“PrototypeService”中输出的信息会随之改变，如下：</p>
<blockquote>
<p>service.SingletonService@41089d<br>service.SingletonService@<strong>41089d</strong><br>service.PrototypeService@a068d1<br>service.PrototypeService@<strong>1cb5951</strong></p>
</blockquote>
<h3 id="Bean-的初始化和销毁"><a href="#Bean-的初始化和销毁" class="headerlink" title="Bean 的初始化和销毁"></a>Bean 的初始化和销毁</h3><p>在Java Spring Bean中，存在生命周期，即当一个bean被实例化的时候，他需要执行一些可用的状态，同样，如不需要则在容器中移除。通常情况下我们使用**@Bean注解的initMethod、destroyMethod**属性来对Bean进行初始化和销毁：</p>
<h4 id="Config-1"><a href="#Config-1" class="headerlink" title="Config"></a>Config</h4><h5 id="JavaConfig-java"><a href="#JavaConfig-java" class="headerlink" title="JavaConfig.java"></a>JavaConfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> service.MyService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean(initMethod=&quot;initService&quot;,destroyMethod=&quot;destroyService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> MyService <span class="title function_">getMyService</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyService</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="TesInitAndDestroy-java"><a href="#TesInitAndDestroy-java" class="headerlink" title="TesInitAndDestroy.java"></a>TesInitAndDestroy.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;initService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;构造方法 - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;destroyService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Service-1"><a href="#Service-1" class="headerlink" title="Service"></a>Service</h4><h5 id="MyService-java"><a href="#MyService-java" class="headerlink" title="MyService.java"></a>MyService.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;initService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;构造方法 - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;destroyService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/5.Java Spring Aspect-Oriented Programming/">Java Spring AOP</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<h2 id="Spring-AOP-面向切面，Asoect-Oriented-Programming"><a href="#Spring-AOP-面向切面，Asoect-Oriented-Programming" class="headerlink" title="Spring AOP(面向切面，Asoect-Oriented Programming)"></a>Spring AOP(面向切面，Asoect-Oriented Programming)</h2><p>Spring AOP（面向切面，Asoect-Oriented Programming）即面向切面变成，依赖并与OO（面向对象，Object Oriented）即面向对象编程相辅相成，这主要体现在当面向切面过程时，先对业务逻辑进行抽象，而这个业务逻辑抽象是由面向对象（OO，Object Oriented）。在面向切面编程之中，最基本的单元是切面（Aspect）:</p>
<h3 id="Asoect-Oriented-Programming-面向切面术语"><a href="#Asoect-Oriented-Programming-面向切面术语" class="headerlink" title="Asoect-Oriented Programming 面向切面术语"></a>Asoect-Oriented Programming 面向切面术语</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>切面 (Aspect)</td>
<td>至封装横切到系统功能（事物处理）的类;</td>
<td>1</td>
</tr>
<tr>
<td>连接点 (Joinpoint)</td>
<td>指程序运行中的一些时间点，如方法的异常或抛出</td>
<td>2</td>
</tr>
<tr>
<td>切入点 (Pointcut)</td>
<td>指需要处理的连接点</td>
<td>3</td>
</tr>
<tr>
<td>通知 (增强处理)</td>
<td>由切面添加到特定的连接点（满足切入点规则）的一段代码</td>
<td>4</td>
</tr>
<tr>
<td>引入 (Introduction)</td>
<td>允许在现有的实现类中添加自定义的方法以及属性</td>
<td>5</td>
</tr>
<tr>
<td>目标对象 (Target Object)</td>
<td>指所有被通知的对象</td>
<td>6</td>
</tr>
<tr>
<td>代理 (Proxy)</td>
<td>通知应用到目标对象之后，被动态创建的对象</td>
<td>7</td>
</tr>
<tr>
<td>织入 (Weaving)</td>
<td>将切面代码插入到目标对象上，从而生成代理对象的不同</td>
<td>8</td>
</tr>
</tbody></table>
<p>通俗点的来讲就是：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>切面</td>
<td>就是将所有共有或集成的功能实现，如我们可以将一块一块的组建合并为一个切面</td>
<td>1</td>
</tr>
<tr>
<td>通知</td>
<td>也就是且面的具体实现，以指定的切入点作为规则来寻找或添加的一段代码</td>
<td>2</td>
</tr>
<tr>
<td>连接点</td>
<td>也就是说程序运行中能够插入切面的连接地点</td>
<td>3</td>
</tr>
<tr>
<td>切入点</td>
<td>即用于定义通知应该切入到那些的链接点上（不同的通知用于需要切入不同的连接点上）</td>
<td>4</td>
</tr>
<tr>
<td>目标对象</td>
<td>也就是书所有被通知的对象，都是目标对象</td>
<td>5</td>
</tr>
<tr>
<td>代理对象</td>
<td>当通知到目标对象之后，就会被变成一个动态的对象 <strong>代理对象的功能等于目标对象的核心业务逻辑功能+共有对象功能</strong>是程序运行中的产物</td>
<td>6</td>
</tr>
<tr>
<td>织入</td>
<td>将切面代码插入到目标的对象上，生成代理对象的不同</td>
<td>7</td>
</tr>
</tbody></table>
<h4 id="切面（Aspect）"><a href="#切面（Aspect）" class="headerlink" title="切面（Aspect）"></a>切面（Aspect）</h4><p>通过上图可以看出，通过切面Aspect分别在，在业务类1和业务2中可以看出，分别加入了<code>日志记录、性能统计、安全控制、事物处理</code>等操作。也就是说在一个类中，加入了日志记录、性能统计、安全控制、事物处理等功能或构造方法。</p>
<h4 id="切入点（Pointcut）"><a href="#切入点（Pointcut）" class="headerlink" title="切入点（Pointcut）"></a>切入点（Pointcut）</h4><p>切入点（Pointcut）是指需要处理的连接点，在Spring AOP面向切面编程中，所有的方法执行都是连接点，而切入点是一个描述信息，修饰的是链接点，可通过切入点来链接需要被处理，而切面、连接点、切入点的关系如下;<br>而连接点即程序运行中的调用或异常抛出，但切入点主要处理需要处理的连接点（在Spring 面向切面中，所有方法都是连接点），而切面指的就是事物处理的类。</p>
<h3 id="AspectJ-基于注解开发"><a href="#AspectJ-基于注解开发" class="headerlink" title="AspectJ 基于注解开发"></a>AspectJ 基于注解开发</h3><p>AspectJ是一个面向切面AOP的一个框架，扩展了Java语言和定义了AOP语法，基于注解的开发AsoectJ会比和XML配置开发Aspect便捷许多没而Spring中通知的目标方法的连接点位置主要可以分为以下六种类型：</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>环绕通知</td>
<td>在目标方法执行前和执行后的实施增强</td>
<td>1</td>
</tr>
<tr>
<td>前置通知</td>
<td>在目标方法执行前实施的增强</td>
<td>2</td>
</tr>
<tr>
<td>后置返回通知</td>
<td>在目标方法成够执行后实施增强</td>
<td>3</td>
</tr>
<tr>
<td>最终通知即后置通知</td>
<td>目标方法执行后进行增强，与后置返回通知不同的不管发生异常，都要执行该通知</td>
<td>4</td>
</tr>
<tr>
<td>异常通知</td>
<td>在方法抛出异常后实施增加</td>
<td>5</td>
</tr>
<tr>
<td>引入通知</td>
<td>在目标类中添加一些新的方法和属性，用于修改目标类</td>
<td>6</td>
</tr>
</tbody></table>
<h4 id="AspectJ-注解"><a href="#AspectJ-注解" class="headerlink" title="AspectJ 注解"></a>AspectJ 注解</h4><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@Aspect</td>
<td>声明一个切面</td>
<td>1</td>
</tr>
<tr>
<td>@Pointcut</td>
<td>用于定义切入点，使用需要定义一个切入点的Viod方法，且方法体为空的普通方法</td>
<td>2</td>
</tr>
<tr>
<td>@Before</td>
<td>定义前置通知，通常为其指定value属性值</td>
<td>3</td>
</tr>
<tr>
<td>@AfterReturning</td>
<td>定义后置返回通知，使用时为其指定value属性值</td>
<td>4</td>
</tr>
<tr>
<td>@Around</td>
<td>用于定义一个环绕通知，在使用是也通常为其制定为value属性值 5</td>
<td></td>
</tr>
<tr>
<td>@AfterThrowing</td>
<td>定义一个异常通知，使用是通常为其指定value属性值</td>
<td>6</td>
</tr>
<tr>
<td>@After</td>
<td>用于定义后置即最终通知，使用时通常使用value属性值</td>
<td>7</td>
</tr>
</tbody></table>
<h4 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h4><p>在开发项目之前，需要使用六个Spring核心的依赖包，分别为<strong>aop、aspects、beans、context、core、expression</strong>，之后还需要<strong>commons-logging，下载地址为：“<a target="_blank" rel="noopener" href="https://downloads.apache.org//commons/logging/binaries/commons-logging-1.2-bin.zip%E2%80%9D">https://downloads.apache.org//commons/logging/binaries/commons-logging-1.2-bin.zip”</a></strong>，然后还需要一个外部第三方依赖包为<strong>aspectjweaver.jar，下载地址为：“<a target="_blank" rel="noopener" href="https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar%E2%80%9D">https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar”</a></strong></p>
<h4 id="创建实现类的接口-aspectj-dao"><a href="#创建实现类的接口-aspectj-dao" class="headerlink" title="创建实现类的接口 aspectj.dao"></a>创建实现类的接口 aspectj.dao</h4><h5 id="TestDao-java"><a href="#TestDao-java" class="headerlink" title="TestDao.java"></a>TestDao.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TestDaoImpl-java"><a href="#TestDaoImpl-java" class="headerlink" title="TestDaoImpl.java"></a>TestDaoImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository(&quot;testDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="comment">// @Override  用于方法重写</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;save - TestDaoImpl&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;modify - TestDaoImpl&quot;</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;delete - TestDaoImpl&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="创建切面类-aspectj-annotaition"><a href="#创建切面类-aspectj-annotaition" class="headerlink" title="创建切面类 aspectj.annotaition"></a>创建切面类 aspectj.annotaition</h4><h5 id="MyAspect-java"><a href="#MyAspect-java" class="headerlink" title="MyAspect.java"></a>MyAspect.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.annotaition;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span> 			<span class="comment">// 声明切面</span></span><br><span class="line"><span class="meta">@Component</span>		<span class="comment">// 让此且面成为Spring容器管理的Bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * Pointcut 定义了切入点</span></span><br><span class="line"><span class="comment">	 * 而&quot;execution(* aspectj.dao.*.*(..))&quot;定义了切入点表达式;</span></span><br><span class="line"><span class="comment">	 * 而切入点表达式的意思大概是匹配 “aspectj.dao“包中任意类的方法执行;</span></span><br><span class="line"><span class="comment">	 * 而execution()是表达式的主体;</span></span><br><span class="line"><span class="comment">	 * ”*“表示所有返回类型，而使用”*“可代表所有类型;</span></span><br><span class="line"><span class="comment">	 * 其中&quot;aspectj.dao&quot;表示的是需要匹配的包名，第二个&quot;*&quot;是类型，代表所有匹配的类</span></span><br><span class="line"><span class="comment">	 * 第三个”*“表示方法名，使用他表示所有方法;</span></span><br><span class="line"><span class="comment">	 * &quot;(...)&quot;是方法参数，其中”...“表示任意参数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Pointcut(&quot;execution(* aspectj.dao.*.*(..))&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">myPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Before(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinpoint)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;前置通知&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;目标类对象:&quot;</span> + joinpoint.getTarget()</span><br><span class="line">		+ <span class="string">&quot;被增强处理的方法:&quot;</span> + joinpoint.getSignature().getName());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 后置返回通知</span></span><br><span class="line">	<span class="meta">@AfterReturning(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturing</span><span class="params">(JoinPoint joinpoint)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;后置返回通知:&quot;</span> + <span class="string">&quot;模拟删除临时文件&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;被增强处理的方法&quot;</span> + joinpoint.getSignature().getName());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 环绕通知</span></span><br><span class="line">	<span class="meta">@Around(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint procedingjoinpoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		<span class="comment">// run</span></span><br><span class="line">		System.out.println(<span class="string">&quot;环绕开始，执行目标方法前模拟开启事物&quot;</span>);</span><br><span class="line">		<span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> procedingjoinpoint.proceed();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// end</span></span><br><span class="line">		System.out.println(<span class="string">&quot;环绕结束，执行目标方法后模拟关闭事物&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 异常通知</span></span><br><span class="line">	<span class="meta">@AfterThrowing(value=&quot;myPointCut()&quot;,throwing=&quot;e&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">except</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;异常通知&quot;</span> + <span class="string">&quot;程序执行异常&quot;</span> + e.getMessage());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// 最终通知</span></span><br><span class="line">	<span class="meta">@After(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;最终通知，模拟释放&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置类-aspectj-config"><a href="#配置类-aspectj-config" class="headerlink" title="配置类 aspectj.config"></a>配置类 aspectj.config</h4><h5 id="AOPTest-java"><a href="#AOPTest-java" class="headerlink" title="AOPTest.java"></a>AOPTest.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspecti.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> aspectj.dao.TestDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AOPTest</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="comment">// 初始化AnnotationConfigApplicationContext</span></span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AspectjAOPConfig.class);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 从容器中获取增强后的目标对象</span></span><br><span class="line">		<span class="type">TestDao</span> <span class="variable">testDaoAdvice</span> <span class="operator">=</span> application.getBean(TestDao.class);</span><br><span class="line">		<span class="comment">// 执行方法</span></span><br><span class="line">		testDaoAdvice.save();</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">		testDaoAdvice.modify();</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">		testDaoAdvice.delete();</span><br><span class="line">		<span class="comment">// 关闭</span></span><br><span class="line">		application.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="AspectjAOPconfig-java"><a href="#AspectjAOPconfig-java" class="headerlink" title="AspectjAOPconfig.java"></a>AspectjAOPconfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspecti.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span>					<span class="comment">// 声明一个配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;aspectj&quot;)</span>		<span class="comment">// 自动扫描指定包下的注解</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span>		<span class="comment">// 开启Spring对Aspectj的支持</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AspectjAOPConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
	

	

</article>





	<span class="different-posts">📖 <a href="/page/17">more posts</a> 📖</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
