<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>ç¼ç‘¶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="ç¼ç‘¶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">ç¼ç‘¶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">æ¢¦å…¥ç¼æ¥¼å¯’æœ‰æœˆï¼Œè¡Œè¿‡çŸ³æ ‘å†»æ— çƒŸ</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">ğŸ“– <a href="/page/15">earlier posts</a> ğŸ“–</span>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/12.Spring boot Security/">Spring boot Security</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>Spring boot Securityå³Springæ¨å‡ºçš„ä¸€ä¸ªä¸“é—¨é’ˆå¯¹äºSpringåº”ç”¨ç³»ç»Ÿçš„å®‰å…¨æ¡†æ¶ï¼Œå……åˆ†åˆ©ç”¨äº†spinrgæ¡†æ¶çš„æ•´ä½“åŠŸèƒ½ä¸ºSpinrgåº”ç”¨æä¾›äº†å®‰å…¨è®¿é—®æ§åˆ¶çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨Spring boot Securityä¹‹ä¸­æˆ–æ˜¯ç½‘ç»œå®‰å…¨ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µåˆ†åˆ«ä¸º**æˆæƒ(Authorization)<strong>å’Œ</strong>è®¤è¯(Authentication)**ä¸¤ä¸ªï¼Œæˆæƒå³ç¡®å®šç”¨æˆ·åœ¨å½“å‰åº”ç”¨ç³»ç»Ÿä¸‹æ‰€æœ‰çš„åŠŸèƒ½å’Œæƒé™ï¼Œè€Œè®¤è¯å³ç¡®è®¤æ˜¯å¦æœ‰çº§åˆ«ï¼Œæˆ–æ˜¯æ¡ä»¶æ¥è¿›å…¥å½“å‰ç³»ç»Ÿèº«ä»½ã€‚</p>
<h2 id="Spring-Security-è¯·æ±‚æˆæƒ"><a href="#Spring-Security-è¯·æ±‚æˆæƒ" class="headerlink" title="Spring Security è¯·æ±‚æˆæƒ"></a>Spring Security è¯·æ±‚æˆæƒ</h2><p>åœ¨Spring Securityä¹‹ä¸­çš„é€‚é…å™¨ç±»é‡Œï¼Œé€šè¿‡é‡å†™configure(HTTOSecurity http)æ–¹æ³•å®Œæˆç”¨æˆ·æˆæƒï¼Œåœ¨configure(HttpSecurity http)æ–¹æ³•ä¸­ï¼Œåœ¨åŒ¹é…è¯·æ±‚è·¯å¾„åï¼Œå¯ä»¥é’ˆå¯¹å½“å‰ç”¨æˆ·å¯¹è¯·æ±‚è¿›è¡Œå®‰å…¨çš„å¤„ç†ï¼ŒSpring bootæä¾›çš„å®‰å…¨æ–¹æ³•å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>anyRequest</td>
<td>åŒ¹é…æ‰€æœ‰è¯·æ±‚è·¯å¾„</td>
<td></td>
</tr>
<tr>
<td>access(String attribute)</td>
<td>Spring ELè¡¨è¾¾å¼ç»“æœä¸ºtrueæ—¶å¯ä»¥è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>anonymous()</td>
<td>åŒ¿åå¯ä»¥è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>authenticated()</td>
<td>ç”¨æˆ·ç™»å…¥åå¯ä»¥è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>denyAll()</td>
<td>ç”¨æˆ·ä¸èƒ½è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>fullyAuthenticated()</td>
<td>ç”¨æˆ·å®Œå…¨è®¤è¯å¯ä»¥è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>permitAll()</td>
<td>ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>remernberMe()</td>
<td>å…è®¸é€šè¿‡remember-meç™»å…¥çš„ç”¨æˆ·è®¿é—®</td>
<td></td>
</tr>
<tr>
<td>hasAnyAuthority(String)</td>
<td>å‚æ•°è¡¨ç¤ºæƒé™</td>
<td>ç”¨æˆ·ä¸ç¾¤çº¿ä»»ä¸€æƒé™ç›¸åŒå³å¯è®¿é—®</td>
</tr>
<tr>
<td>hasAnyRole(String)</td>
<td>å‚æ•°è¡¨ç¤ºè§’è‰²</td>
<td>ç”¨æˆ·è§’è‰²ä¸å…¶ä¸­ä»»ä¸€è§’è‰²ç›¸çˆ±å—¯ç—›å³å¯è®¿é—®</td>
</tr>
<tr>
<td>hasAuthority(String authority)</td>
<td>å‚æ•°è¡¨ç¤ºæƒé™</td>
<td>ç”¨æˆ·æƒé™ä¸å‚æ•°ç›¸åŒå³å¯è®¿é—®</td>
</tr>
<tr>
<td>hasIpAddress(String ipaddressExpression)</td>
<td>å‚æ•°è¡¨ç¤ºIPåœ°å€</td>
<td>ç”¨æˆ·IPå’Œå‚æ•°åŒ¹é…å³å¯è®¿é—®</td>
</tr>
<tr>
<td>hasRole(String role)</td>
<td>å‚æ•°è¡¨ç¤ºè§’è‰²</td>
<td>ç”¨æˆ·è§’è‰²ä¸å‚æ•°ç›¸åŒå³å¯è®¿é—®</td>
</tr>
</tbody></table>
<h2 id="Spring-boot-Security-æ ¸å¿ƒç±»"><a href="#Spring-boot-Security-æ ¸å¿ƒç±»" class="headerlink" title="Spring boot Security æ ¸å¿ƒç±»"></a>Spring boot Security æ ¸å¿ƒç±»</h2><p>Spring boot Security æ ¸å¿ƒç±»å…±åŒ…æ‹¬<code>Authenticationã€SecurityContextHolderã€UserDetailsã€UserDetailsServiceã€GrentedAuthorityã€DaoAuthenticatioProviderã€PasswordEncoder</code>ç­‰æ ¸å¿ƒç±»åˆ†åˆ«ä¸»è¦ç”¨äºï¼š</p>
<h3 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h3><p>authenticationç”¨äºå°è£…ç”¨æˆ·è®¤è¯çš„ä¿¡æ¯æ¥å£ï¼Œåœ¨ç”¨æˆ·ç™»å…¥ä¹‹å‰spring Securityå°†ç›¸å…³ä¿¡æ¯ä¼šåˆ†è£…æˆä¸€ä¸ªAuthenticationå…·ä½“çš„å®ç°ç±»å¯¹è±¡ï¼Œç™»å…¥åå°†ä¼šç”Ÿæˆä¸€ä¸ªæ›´åŠ å…¨é¢å’ŒåŒ…å«ç”¨æˆ·æƒé™çš„Authenticationå¯¹è±¡ï¼Œä¹‹åå°†å¯¹è±¡ä¿å­˜åœ¨SecurityContextHolderæ‰€æŒæœ‰çš„SecurityContextä¸­ã€‚</p>
<h3 id="SecurityContextHolder"><a href="#SecurityContextHolder" class="headerlink" title="SecurityContextHolder"></a>SecurityContextHolder</h3><p>SecurityContextHolderåŠæ˜¯SecurityContextçš„æ‰€æœ‰ç±»ï¼ŒSecurityContextä¸­å°†ä¼šåŒ…å«å½“å‰è®¤è¯ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯ã€‚Spring Securityä½¿ç”¨ä¸€ä¸ªAuthenticationå¯¹è±¡æè¿°å½“å‰è®¤è¯ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<h3 id="UserDetails"><a href="#UserDetails" class="headerlink" title="UserDetails"></a>UserDetails</h3><p>UserDetailsæ˜¯spring Securityçš„ä¸€ä¸ªæ ¸å¿ƒæ¥å£ï¼Œè¯¥æ¥å£å®šä¹‰äº†ä¸€äº›å¯ä»¥ç”¨æˆ·è·å–ç”¨æˆ·åã€å¯†ç ã€æƒé™ç­‰ä¸è®¤è¯ä¿¡æ¯ç›¸å…³çš„æ–¹æ³•ã€‚</p>
<h3 id="UserDatailsService"><a href="#UserDatailsService" class="headerlink" title="UserDatailsService"></a>UserDatailsService</h3><p>UserDatailsæ˜¯é€šè¿‡UserDatailsServiceçš„loadUserByUsername(String username)æ–¹æ³•åŠ è½½çš„ï¼Œè€ŒUserDatailsServiceä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿéœ€è¦å®ç°è‡ªå·±çš„ä»·å€¼æ¥åŠ è½½è‡ªå®šä¹‰UserDatailsã€‚æ‰€ä»¥åœ¨ç­‰äºè®¤è¯çš„æ—¶å€™Spring Securityå°†ä¼šé€šè¿‡UserDatailsServiceçš„loadUserByUsernameæ–¹æ³•æ¥è·å–å¯¹åº”çš„UserDatailsè¿›è¡ŒéªŒè¯ã€‚<br>è€ŒéªŒè¯åå°†ä¼šé€šè¿‡è¯¥UserDetailsèµ‹äºˆè®¤è¯é€šè¿‡çš„Auhenticationçš„principalï¼Œä¹‹åAuhenticationä¿å­˜åœ¨SecurityContetHelderä¹‹ä¸­ï¼Œåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡SecurityContetHelderè·å–å­˜æ”¾åœ¨SecurityContextä¸­å­˜æ”¾äºUserDetailså®åŠ›é‡Œçš„Authenticationã€principalæ–¹æ³•ã€‚</p>
<h3 id="GrantedAuthority"><a href="#GrantedAuthority" class="headerlink" title="GrantedAuthority"></a>GrantedAuthority</h3><p>GrantedAuthorityæ˜¯ä¸€ä¸ªæ¥å£ï¼Œé€šå¸¸æ˜¯é€šè¿‡UserDetailsServiceè¿›è¡ŒåŠ è½½ï¼Œç„¶åèµ‹å€¼ç»™UserDetailsã€‚åœ¨Authenticationçš„getAuthorities()æ–¹æ³•å¯ä»¥è¿”å›å½“å‰Authenticationå¯¹è±¡æ‹¥æœ‰çš„æƒé™ï¼Œå³è¿”å›ä¸€ä¸ªGrantedAuthorityç±»å‹çš„æ•°ç»„ã€‚</p>
<h3 id="DaoAuthenticationProvider"><a href="#DaoAuthenticationProvider" class="headerlink" title="DaoAuthenticationProvider"></a>DaoAuthenticationProvider</h3><p>åœ¨Spring Securityçš„å®‰å…¨æ¡†æ¶ä¸­ï¼Œé»˜è®¤ä½¿ç”¨DaoAuthenticationProvideræ¥å®ç°AuthenticationProvideræ¥å£è¿›è¡Œç”¨æˆ·çš„è®¤è¯å¤„ç†ã€‚DaoAuthenticationProviderè¿›è¡Œè®¤è¯çš„æ—¶å€™éœ€è¦ä¸€ä¸ªUserDrtailsServiceæ¥è·å–ç”¨æˆ·ä¿¡æ¯çš„UserDetailsã€‚</p>
<h3 id="PasswordEncoder"><a href="#PasswordEncoder" class="headerlink" title="PasswordEncoder"></a>PasswordEncoder</h3><p>åœ¨Spring Securityå®‰å…¨æ¡†æ¶ä¸­ï¼Œé€šè¿‡PasswordEncoderæ¥å£å®Œæˆå¯¹å¯†ç çš„åŠ å¯†ï¼ŒPasswordEncoderæœ‰å¤šç§å®ç°ï¼Œå…¶ä¸­åŒ…å«<code>MD55ã€SHA-256</code>çš„åŠ å¯†ç­‰ï¼Œå¼€å‘æ—¶å¯ç›´æ¥ä½¿ç”¨å³å¯ã€‚åœ¨Spring bootä¹‹ä¸­ï¼Œä½¿ç”¨BCryptPasswordEncoderåŠ å¯†æ˜¯æ¯”è¾ƒä¸é”™çš„é€‰æ‹©ï¼ŒBCryptPasswordEncoderä½¿ç”¨BCryptçš„å¼ºæ•£åˆ—å“ˆå…®åŠ å¯†è¿›è¡Œå®ç°ï¼Œå¹¶å¯ç”±å®¢æˆ·ç«¯æŒ‡å®šåŠ å¯†çš„å¼ºåº¦ï¼Œä»å­—é¢æ„æ€ä¸Šæ¥ç†è§£å°±æ˜¯è¯´å¼ºåº¦è¶Šé«˜ã€å®‰å…¨æ€§å°±è¶Šé«˜ã€‚</p>
<p>æœ¬ä¹¦ä½œä¸ºSpring boot å’ŒThymeleafåŸºç¡€å…¥é—¨æŒ‡å¯¼ä¹¦ï¼Œæš‚ä¸å¯¹Spring Securityæœ‰è¿‡å¤šæè¿°ï¼Œä½œè€…ä¹Ÿæ›¾å°è¯•ç€å®ç°Spring Securityï¼Œä½†å®åœ¨å¤ªå¤šï¼Œå·²ç»è¶…å‡ºäº†æœ¬ä¹¦çš„å­—æ•°å’Œç« èŠ‚èŒƒå›´ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯è‡ªè¡Œé˜…è¯»ï¼Œä¸‹ä¸€æ¬¡å°†ä¼šå¦å‡ºä¸€æœ¬ä¸“é—¨é’ˆå¯¹Spring Securityçš„ä¹¦ç±ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/11.Spring boot and Thymeleaf Data visit this Spring Data and Hibernate/">Spring boot and Thymeleaf Data visit this Spring Data and Hibernate</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>æœ¬ç« èŠ‚ä¸»è¦ç”¨äºè®²è¿°å’Œæ¼”ç¤ºSpring booté…åˆThymeleafåšæ•°æ®è®¿é—®çš„ç›¸å…³æ¡ˆä¾‹å’ŒæŠ€æœ¯æ¼”ç¤ºï¼Œå³é€šè¿‡æœ¬ç« ç« èŠ‚â€œSpring boot and Thymeleaf Data visitâ€å³â€œspring boot å’Œ Thymeleafæ•°æ®è®¿é—®â€ã€‚</p>
<p>æœ¬ç« å°†é€šè¿‡Spring Data JPAã€Spring boot MyBatisã€Spring boot RESTã€Spring boot MongoDBã€Spring boot Redisã€ä»¥åŠæ•°æ®ç¼“å­˜Cacheæ¥è¿›è¡Œè®²è§£ã€‚Spring Data æ˜¯Spring è®¿é—®æ•°æ®åº“çš„ä¸€å¤§å †è§£å†³æ–¹æ¡ˆï¼ŒåŒ…å«å¤§é‡çš„å…³ç³»å‹æ•°æ®åº“ä»¥åŠéå…³ç³»å‹æ•°æ®åº“çš„æ•°æ®è®¿é—®è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 id="Spring-Data-JPA"><a href="#Spring-Data-JPA" class="headerlink" title="Spring Data JPA"></a>Spring Data JPA</h2><p>Spring Data JPAä»åç§°ä¸­æˆ‘ä»¬å¯ä»¥å¾—åˆ°ï¼ŒSpring Data JPAæ˜¯Spring Dataçš„å­é¡¹ç›®ï¼Œåœ¨å­¦ä¹ Spring Data Jpaä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ ä¸‹Hibernateï¼Œä¸å…¶è¯´æ˜¯Spring Data JPAï¼Œæ›´ä¸å¦‚è¯´æ˜¯Hibernateï¼Œå› ä¸ºSpring Data JPAçš„åŠŸèƒ½ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯ç”±Hibernateæ‰€å®ç°çš„ã€‚</p>
<p>ä»Spring Data JPAä¸­æˆ‘ä»¬å¯å¾—çŸ¥ï¼ŒSpring Data JPAçš„å…¨ç¨‹æ˜¯Java Persistence APIï¼Œå³JavaæŒä¹…æ€§æ˜ å°„ï¼Œè€ŒJavaæŒä¹…æ€§æ˜ å°„åˆ™æ˜¯ç”±å®˜æ–¹æå‡ºçš„JavaæŒä¹…åŒ–è§„èŒƒï¼Œé€šè¿‡æ³¨è§£æˆ–XMLæè¿°å¯¹è±¡çš„ä¸€ç§æ˜ å°„å…³ç³»ï¼Œå°†å†…å­˜ä¸­çš„å®ä½“å¯¹è±¡æ¥æ“çºµæ•°æ®åº“ï¼ŒSpring Data JPAé€šè¿‡æä¾›åŸºäºJPAçš„ä»“åº“æå¤§çš„ç®€åŒ–äº†JAPçš„å†™æ³•ï¼Œåœ¨ä¸å†™å®ç°ç±»çš„æ—¶å€™ï¼Œå³å¯å®ç°æ•°æ®åº“çš„è®¿é—®æ“ä½œã€‚    </p>
<h3 id="Spring-Data-ä½“ç³»ç»“æ„"><a href="#Spring-Data-ä½“ç³»ç»“æ„" class="headerlink" title="Spring Data ä½“ç³»ç»“æ„"></a>Spring Data ä½“ç³»ç»“æ„</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
<th>FD</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Persistence</td>
<td>ç”¨äºè·å–EntityManagerFactoryå®ä¾‹çš„é™æ€æ–¹æ³•ç±»</td>
<td>EntityManagerFactory</td>
</tr>
<tr>
<td>2</td>
<td>EntityManagerFactory</td>
<td>æ˜¯ä¸€ä¸ªEntityManagerçš„å·¥å‚ç±»ï¼Œåˆ›å»ºå¹¶ç®¡ç†è®¸å¤šEntityManagerçš„å®ä¾‹</td>
<td>EntityManager</td>
</tr>
<tr>
<td>3</td>
<td>EntityManager</td>
<td>æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç”¨äºæŸ¥è¯¢å®ä¾‹å¹¶æ§åˆ¶å¯¹è±¡çš„æŒä¹…åŒ–æ“ä½œ</td>
<td></td>
</tr>
<tr>
<td>4</td>
<td>Entity</td>
<td>Entityæ˜¯ä½œä¸ºè®°å½•å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æŒä¹…æ€§å¯¹è±¡</td>
<td></td>
</tr>
<tr>
<td>5</td>
<td>Persistence Unit</td>
<td>Persistence Unit å®šä¹‰äº†ä¸€ç»„æ‰€æœ‰çš„å®ä½“ç±»ï¼Œåœ¨åº”ç”¨ç¨‹åºä¸­ç”± EntityManagerå®ä¾‹æ¥ç®¡ç†ï¼ˆå®ä½“ç±»é›†è¡¨ç¤ºå­˜å‚¨ä¸­çš„æ•°æ®ï¼‰</td>
<td>EntityManager</td>
</tr>
<tr>
<td>6</td>
<td>EntityTransaction</td>
<td>EntityTransaction classä¸EntityManager classæœ‰å¯¹åº”çš„å…³ç³»ï¼Œå¯¹äºæ¯ä¸ªEntityManageï¼Œéƒ½æ˜¯ç”±EntityTransactionç±»è¿›è¡Œç»´æŠ¤</td>
<td>EntityTransaction</td>
</tr>
<tr>
<td>7</td>
<td>Query</td>
<td>ç”±æ¯ä¸€ä¸ªJPAå¤§ç†”ç‚‰å®ç°çš„å€Ÿå£ï¼Œç”¨äºè·å–æ»¡è¶³æ¡ä»¶çš„å…³ç³»å¯¹ç›¸çˆ±</td>
<td></td>
</tr>
</tbody></table>
<h3 id="Spring-Data-å¯¹è±¡æ˜ å°„å…³ç³»"><a href="#Spring-Data-å¯¹è±¡æ˜ å°„å…³ç³»" class="headerlink" title="Spring Data å¯¹è±¡æ˜ å°„å…³ç³»"></a>Spring Data å¯¹è±¡æ˜ å°„å…³ç³»</h3><p>åœ¨å¯¹è±¡æ˜ å°„å…³ç³»ï¼ˆObject Relational Mappingï¼‰ä¸­ï¼ŒJava Objectåˆ°æ•°æ®åº“è¡¨çš„æ˜ å°„è¿‡ç¨‹è¢«ç§°ä¹‹ä¸º<strong>å¯¹è±¡å…³ç³»æ˜ å°„</strong>ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„è¢«å……å½“å…³ç³»æ•°æ®åº“å’ŒJava class\objectä¹‹é—´çš„æ¡¥æ¢</p>
<h2 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h2><p>Hibernateæ˜¯ä¸€ä¸ªå¼€æºçš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æ¶ï¼Œå¯¹JDBCè¿›è¡Œäº†éå¸¸è½»é‡çº§çš„å¯¹è±¡å°è£…ï¼Œä»æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œä»–å°†<strong>æ™®é€šJavaå¯¹è±¡</strong>ï¼Œä¸æ•°æ®åº“å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªå…¨è‡ªåŠ¨çš„<strong>å¯¹è±¡å…³ç³»æ˜ å°„</strong>æ¡†æ¶ï¼ŒHibernateç”±äºé€šè¿‡æ™®é€šJavaå¯¹è±¡ä¸æ•°æ®åº“å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæ‰€ä»¥ä»è€Œå¯è¾¾åˆ°è‡ªåŠ¨ç”ŸæˆSQLè¯­å¥å¹¶æ‰§è¡Œçš„åŠŸèƒ½ï¼Œè®©å¼€å‘äººå‘˜æ‘†è„±çƒ¦æ¼ï¼Œä¸€ç›åˆ°åº•ã€‚</p>
<h3 id="Hibernate-and-Spring-Data-JPA-åŒºåˆ«"><a href="#Hibernate-and-Spring-Data-JPA-åŒºåˆ«" class="headerlink" title="Hibernate and Spring Data JPA åŒºåˆ«"></a>Hibernate and Spring Data JPA åŒºåˆ«</h3><p>Japå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªæ ‡å‡†æ¥å£ï¼Œè€ŒHibernateåˆ™æ˜¯ä¸€ä¸ªå®ç°ï¼Œä½†æ˜¯åŠŸèƒ½ä»€ä¹ˆçš„éƒ½æ˜¯JPAæ‰€æä¾›çš„ï¼ŒHibernateä¸»è¦é€šè¿‡ä¸‰ä¸ªç»„ä»¶æ¥å®ç°ï¼Œåˆ†åˆ«æ—¶<code>hibernate-annotationã€hibernate-entitymanagerã€Hibernate</code>ä¸‰ä¸ªç»„ä»¶æ¥å®ç°ï¼š</p>
<h4 id="hibernate-annotation"><a href="#hibernate-annotation" class="headerlink" title="hibernate-annotation"></a>hibernate-annotation</h4><p>hibernate-annotationæ˜¯Hibernateæ”¯æŒannotatioæ–¹æ³•é…ç½®çš„åŸºç¡€ï¼Œä¸»è¦åŒ…æ‹¬äº†æ ‡å‡†çš„Jpa annotationä»¥åŠHibernateè‡ªèº«åŠŸèƒ½çš„annotationã€‚</p>
<h4 id="hibernate-core"><a href="#hibernate-core" class="headerlink" title="hibernate-core"></a>hibernate-core</h4><p>hibernate-coreæ˜¯Hibernateçš„æ ¸å¿ƒï¼Œä¸»è¦åŠŸèƒ½åˆ™æ˜¯<strong>å®ç°</strong>ï¼Œå› ä¸ºæœ€ä¸»è¦çš„ï¼Œè¿˜æ˜¯éœ€è¦çœ‹åˆ°çš„ã€‚</p>
<h4 id="hibermate-entitymanager"><a href="#hibermate-entitymanager" class="headerlink" title="hibermate-entitymanager"></a>hibermate-entitymanager</h4><p>hibermate-entitymanagerå®ç°äº†æ ‡å‡†çš„JPAï¼Œæ˜¯ä¸€ä¸ªhibernate-coreå’ŒJPAçš„é€‚é…å™¨ï¼Œå¹¶ä¸ç›´æ¥æä¾›å¯¹è±¡æ˜ å°„å…³ç³»ï¼ˆObject Relational Mappingï¼‰ï¼Œè€Œæ˜¯å¯¹hibernate-coreè¿›è¡Œå°è£…ï¼Œè®©ä»–ç¬¦åˆJPAçš„ä»£ç è§„èŒƒã€‚</p>
<h2 id="Spring-data-jpa-hibernate"><a href="#Spring-data-jpa-hibernate" class="headerlink" title="Spring data jpa + hibernate"></a>Spring data jpa + hibernate</h2><p>åœ¨é¡¹ç›®åˆ›å»ºå®Œæˆåï¼Œé€šè¿‡è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:8080/demo/save/%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B9%8B%E5%90%8E%E5%BD%93%E6%98%BE%E7%A4%BA%E6%8F%92%E5%85%A5%E6%88%90%E5%8A%9F%E5%90%8E%E8%AE%BF%E9%97%AEhttp://localhst:8080/demo/findAll%E6%9D%A5%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%EF%BC%8C%E5%BD%93%E7%84%B6%E6%88%91%E4%BB%AC%E8%BF%98%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BF%E9%97%AEhttp://localhost:8080/demo/findByUsernameLike?username=k%EF%BC%8C%E6%9D%A5%E8%BF%9B%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2%EF%BC%8C%E9%99%A4%E6%AD%A4%E4%B9%8B%E5%A4%96%EF%BC%8C%E6%88%91%E4%BB%AC%E8%BF%98%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E8%AE%BF%E9%97%AEhttp://localhost:8080/demo/getOne?id=1%E6%9D%A5%E9%80%9A%E8%BF%87id%E8%BF%9B%E8%A1%8C%E6%9F%A5%E6%89%BE%E4%BF%A1%E6%81%AF%E3%80%82">http://localhost:8080/demo/save/æ¥è¿›è¡Œæ’å…¥æ•°æ®ï¼Œä¹‹åå½“æ˜¾ç¤ºæ’å…¥æˆåŠŸåè®¿é—®http://localhst:8080/demo/findAllæ¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œå½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è®¿é—®http://localhost:8080/demo/findByUsernameLike?username=kï¼Œæ¥è¿›è¡Œæ¨¡ç³Šæœç´¢ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è®¿é—®http://localhost:8080/demo/getOne?id=1æ¥é€šè¿‡idè¿›è¡ŒæŸ¥æ‰¾ä¿¡æ¯ã€‚</a></p>
<h3 id="æ„å»ºé¡¹ç›®"><a href="#æ„å»ºé¡¹ç›®" class="headerlink" title="æ„å»ºé¡¹ç›®"></a>æ„å»ºé¡¹ç›®</h3><h4 id="Spring-data-jpa-and-thymeleaf"><a href="#Spring-data-jpa-and-thymeleaf" class="headerlink" title="Spring data jpa and thymeleaf"></a>Spring data jpa and thymeleaf</h4><p>åœ¨å¼€å§‹å¯¹é¡¹ç›®ç¼–å†™ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨Spring Initializrlæ¥åˆ›å»ºspring booté¡¹ç›®ï¼Œå¹¶æ·»åŠ Tthymeleafã€Spring Data JPAã€Spring boot Webçš„æ”¯æŒï¼Œç„¶åå¯¹é¡¹ç›®pom.xmlè¿›è¡Œä¸€å®šçš„é…ç½®ã€‚</p>
<h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><p>pom.xmlåœ¨æœ¬æ¬¡çš„è¿‡ç¨‹ä¸­ä¸»è¦ç”¨äºæ·»åŠ MySQLä¾èµ–ï¼Œå…¶MySQLç‰ˆæœ¬ä¸º<code>5.6.50</code>ï¼Œä½†ç”±äºç‰ˆæœ¬è¿‡é«˜å¹¶æ²¡æœ‰ç›´æ¥ä½¿ç”¨æ­¤ç‰ˆæœ¬çš„ä¾èµ–è€Œæ˜¯ä½¿ç”¨<code>5.1.45</code>çš„æ•°æ®åº“ä¾èµ–ï¼Œä»¥ä¸‹æ˜¯pom.xmlä¿¡æ¯</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.45<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœxmlé…ç½®æ–‡ä»¶å‡ºç°é—®é¢˜ï¼Œè€Œè¿™é‡Œçš„é—®é¢˜æŒ‡çš„æ˜¯xmlæ–‡ä»¶ä¸‹åœ¨mysqléƒ¨åˆ†ä¸­å­˜åœ¨çº¢è‰²çš„æ³¢æµªçº¿ï¼Œå¯é€šè¿‡é‡æ–°ä¸‹è½½mavenä¾èµ–åŒ…æ¥è§£å†³ï¼š</p>
<blockquote>
<p>mvn -U idea:idea</p>
</blockquote>
<h4 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [servlet]</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/demo</span></span><br><span class="line"><span class="comment"># [thymeleaf] å…³é—­htmlç¼“å­˜</span></span><br><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># [datasource] æŒ‡å®šæ•°æ®åº“</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/test?</span></span><br><span class="line"><span class="comment"># æ•°æ®åº“å¸å·ä¸å¯†ç  username&amp;password</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">toor</span></span><br><span class="line"><span class="comment"># åŠ è½½æ•°æ®åº“é©±åŠ¨ com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment"># [jpa] æŒ‡å®šæ•°æ®åº“ç±»å‹ä¸ºMySQL</span></span><br><span class="line"><span class="attr">spring.jpa.database</span>=<span class="string">mysql</span></span><br><span class="line"><span class="comment"># æ˜¯å¦åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºSQLè¯­å¥</span></span><br><span class="line"><span class="attr">spring.jpa.show-sql</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># æ˜¯å¦è‡ªåŠ¨åˆ›å»ºã€æ›´æ–°æ•°æ®åº“è¡¨ç­‰é…ç½®ä¿¡æ¯ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸éœ€è¦åˆ›å»ºï¼Œä¸å­˜åœ¨æ—¶æ‰åˆ›å»º</span></span><br><span class="line"><span class="attr">spring.jpa.hibernate.ddl-auto</span>=<span class="string">update</span></span><br></pre></td></tr></table></figure>
<p>åœ¨spring bootçš„å…¨å±€é…ç½®æ–‡ä»¶application.propertiesä¸­ï¼Œé…ç½®å…³é—­thymleafç¼“å­˜æ¥è¾¾åˆ°ä¸ç”¨é‡å¯å°±èƒ½çœ‹åˆ°ä¿®æ”¹åç»“æœçš„éœ€æ±‚ï¼Œå¹¶æŒ‡å®šå…¶ç›®å½•ã€æ•°æ®åº“ã€æ•°æ®åº“ç±»å‹ç­‰åŠŸèƒ½ï¼Œè¯¦æƒ…å¯é€šè¿‡é˜…è¯»é…ç½®æ–‡ä»¶å³å¯ã€‚</p>
<h3 id="å®ä½“"><a href="#å®ä½“" class="headerlink" title="å®ä½“"></a>å®ä½“</h3><h4 id="MyUser-java"><a href="#MyUser-java" class="headerlink" title="MyUser.java"></a>MyUser.java</h4><p>åœ¨com.demoä¸‹åˆ›å»ºexampleï¼Œç„¶ååœ¨åˆ›å»ºentityåŒ…ï¼Œä¹‹ååˆ›å»ºMyUserå®ä½“ç±»ï¼Œå®šä¹‰è¡¨åç§°ä¸ºâ€œuser_nameâ€å’Œä¸»é”®usernameã€ageã€genderã€idç­‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Entity;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GeneratedValue;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.GenerationType;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Id;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.Table;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Table(name = &quot;user_name&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyUser</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        |-user_name è¡¨ä¸­çš„ä¸»é”®åˆ†åˆ«ä¸º</span></span><br><span class="line"><span class="comment">        |----|- id int</span></span><br><span class="line"><span class="comment">        |----|- age int</span></span><br><span class="line"><span class="comment">        |----|- username string</span></span><br><span class="line"><span class="comment">        |----|- gender string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// id</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// age</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// username</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// gender</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®è®¿é—®å±‚"><a href="#æ•°æ®è®¿é—®å±‚" class="headerlink" title="æ•°æ®è®¿é—®å±‚"></a>æ•°æ®è®¿é—®å±‚</h3><h4 id="UserRepository-java"><a href="#UserRepository-java" class="headerlink" title="UserRepository.java"></a>UserRepository.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.entity.MyUser;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;MyUser, Integer&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt;findByUsernameLike(String username);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºä¸šåŠ¡å±‚"><a href="#åˆ›å»ºä¸šåŠ¡å±‚" class="headerlink" title="åˆ›å»ºä¸šåŠ¡å±‚"></a>åˆ›å»ºä¸šåŠ¡å±‚</h3><h4 id="UserService-java"><a href="#UserService-java" class="headerlink" title="UserService.java"></a>UserService.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.entity.MyUser;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveAll</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt;findAll();</span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">findByUsername</span><span class="params">(String username)</span>;</span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt;findByUsernameLike(String username);</span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">getOne</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="UserServicelmpl-java"><a href="#UserServicelmpl-java" class="headerlink" title="UserServicelmpl.java"></a>UserServicelmpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.entity.MyUser;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.repository.UserRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MyUser</span> <span class="variable">myUser1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyUser</span>();</span><br><span class="line">            myUser1.setUsername(<span class="string">&quot;kunlunsiqu&quot;</span>);</span><br><span class="line">            myUser1.setGender(<span class="string">&quot;N&quot;</span>);</span><br><span class="line">            myUser1.setAge(<span class="number">20</span>);</span><br><span class="line">        <span class="type">MyUser</span> <span class="variable">myUser2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyUser</span>();</span><br><span class="line">            myUser2.setUsername(<span class="string">&quot;flydata&quot;</span>);</span><br><span class="line">            myUser2.setGender(<span class="string">&quot;M&quot;</span>);</span><br><span class="line">            myUser2.setAge(<span class="number">21</span>);</span><br><span class="line">        <span class="type">MyUser</span> <span class="variable">myUser3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyUser</span>();</span><br><span class="line">            myUser3.setUsername(<span class="string">&quot;gscssd&quot;</span>);</span><br><span class="line">            myUser3.setGender(<span class="string">&quot;N&quot;</span>);</span><br><span class="line">            myUser3.setAge(<span class="number">30</span>);</span><br><span class="line">        List&lt;MyUser&gt; users = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;MyUser&gt;();</span><br><span class="line">            users.add(myUser1);</span><br><span class="line">            users.add(myUser2);</span><br><span class="line">            users.add(myUser3);</span><br><span class="line">        userRepository.saveAll(users);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">findByUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findByUsername(username);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;MyUser&gt; <span class="title function_">findByUsernameLike</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findByUsernameLike(<span class="string">&quot;%&quot;</span> + username + <span class="string">&quot;%&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> MyUser <span class="title function_">getOne</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.getOne(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ§åˆ¶å™¨ç±»"><a href="#æ§åˆ¶å™¨ç±»" class="headerlink" title="æ§åˆ¶å™¨ç±»"></a>æ§åˆ¶å™¨ç±»</h3><h4 id="UserController-java"><a href="#UserController-java" class="headerlink" title="UserController.java"></a>UserController.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> com.demo.example.service.UserService;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/save&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">            userService.saveAll();</span><br><span class="line">            System.out.println(<span class="string">&quot;UserController&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ä¿å­˜æˆåŠŸ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findByUsername&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findByUsername</span><span class="params">(String username, Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;æ ¹æ®åç§°æŸ¥è¯¢&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;auser&quot;</span>, userService.findByUsername(username));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAuser&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/getOne&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getOne</span><span class="params">(<span class="type">int</span> id, Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;æ ¹æ®åç§°idæŸ¥è¯¢&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;auser&quot;</span>, userService.getOne(id));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAuser&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;findAll&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findAll</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>, <span class="string">&quot;æŸ¥è¯¢æ‰€æœ‰&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;allUsers&quot;</span>, userService.findAll());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAll&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/findByUsernameLike&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">findByUsernameLike</span><span class="params">(String username,Model model)</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;title&quot;</span>,<span class="string">&quot;ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢&quot;</span>);</span><br><span class="line">            model.addAttribute(<span class="string">&quot;allUsers&quot;</span>, userService.findByUsernameLike(username));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;showAll&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Thymeleaf"><a href="#Thymeleaf" class="headerlink" title="Thymeleaf"></a>Thymeleaf</h3><h4 id="showAll-html"><a href="#showAll-html" class="headerlink" title="showAll.html"></a>showAll.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;showAll&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Spring Data JPA and MySQL + Thymeleaf&lt;/h5&gt;</span><br><span class="line">    &lt;p th:text=&quot;$&#123;title&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;åç§°&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr th:each=&quot;user: $&#123;allUsers&#125;&quot;&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getId()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getUsername()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getGender()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;user.getAge()&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="showAuser-html"><a href="#showAuser-html" class="headerlink" title="showAuser.html"></a>showAuser.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;showAuser&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Spring Data JPA and MySQL + Thymeleaf&lt;/h5&gt;</span><br><span class="line">    &lt;p th:text=&quot;$&#123;title&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.id&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.username&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.gender&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;p th:text=&quot;$&#123;auser.age&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/10.Spring boot and Thymeleaf Web/">Spring boot and Thymeleaf Web</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>åœ¨ä¸Šè¿°æ–‡ç« ä¹‹ä¸­æˆ‘ä»¬ä¸»è¦æ’°å†™å¹¶åˆ—ä¸¾äº†å¸¸ç”¨çš„Thymeleafæ ‡ç­¾åŠè¡¨è¾¾å¼ï¼Œé€šè¿‡ä¸Šè¿°æ–‡ç« æˆ‘ä»¬å°†ä¼šåœ¨æœ¬ç« ä¸­åˆ—ä¸¾ä¸€äº›çœŸå®çš„é¡¹ç›®æ¡ˆä¾‹å¦‚è¡¨å•çš„æäº¤ã€å›½é™…åŒ–é¡µé¢çš„æ’°å†™ç­‰ã€‚</p>
<h2 id="è¡¨å•"><a href="#è¡¨å•" class="headerlink" title="è¡¨å•"></a>è¡¨å•</h2><p>è¡¨å•æ˜¯åœ¨å‰ç«¯é¡µé¢ä¸­ä¸å¯ç¼ºå¤±çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸åº”ç”¨åœ¨æœç´¢ã€ç™»å…¥&#x2F;æ³¨å†Œã€æäº¤ç­‰é¡µé¢ä¹‹ä¸­ï¼Œé€šè¿‡æœ¬ä¹¦åˆ—ä¸¾çš„Thymeleafä¾‹å­å¯æ›´å®¹æ˜“ç¼–å†™ç”±Thymeleafçš„åŠ¨æ€é¡µé¢ï¼š</p>
<h3 id="login-html"><a href="#login-html" class="headerlink" title="login.html"></a>login.html</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;login&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Thymeleaf is login&lt;/h5&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;form action=&quot;#&quot; th:action=&quot;@&#123;/login&#125;&quot; th:object=&quot;$&#123;loginBean&#125;&quot; method=&quot;post&quot;&gt;</span><br><span class="line">        &lt;p&gt;username: &lt;input type=&quot;text&quot; th:field=&quot;*&#123;username&#125;&quot; th:placeholder=&quot;username&quot; /&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;age: &lt;input type=&quot;text&quot; th:field=&quot;*&#123;age&#125;&quot; th:placeholder=&quot;age&quot; /&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;submit&quot; /&gt;&lt;input type=&quot;reset&quot; value=&quot;reset&quot; /&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="result-html"><a href="#result-html" class="headerlink" title="result.html"></a>result.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;result&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Thymeleaf submit an result&lt;/h5&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;p th:text=&quot;&#x27;username: &#x27; + $&#123;loginBean.username&#125;&quot; /&gt;</span><br><span class="line">    &lt;p th:text=&quot;&#x27;age: &#x27; + $&#123;loginBean.age&#125;&quot; /&gt;</span><br><span class="line">    &lt;a href=&quot;/toLogin&quot; th:text=&quot;@&#123;toLogin&#125;&quot;&gt;&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="LoginController-java"><a href="#LoginController-java" class="headerlink" title="LoginController.java"></a>LoginController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> com.example.model.LoginBean;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;toLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;loginBean&quot;</span>,<span class="keyword">new</span> <span class="title class_">LoginBean</span>());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">greetingSubmit</span><span class="params">(<span class="meta">@ModelAttribute</span> LoginBean loginBean)</span> &#123;</span><br><span class="line">        <span class="comment">// LoginBean username&amp;age</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Test one data:&quot;</span> + loginBean.getUsername());</span><br><span class="line">            System.out.println(<span class="string">&quot;Test two data:&quot;</span> + loginBean.getAge());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;result&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="LoginBean-java"><a href="#LoginBean-java" class="headerlink" title="LoginBean.java"></a>LoginBean.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginBean</span> &#123;</span><br><span class="line">    String username;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// username</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// age</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å›½é™…åŒ–ï¼ˆi18nï¼‰"><a href="#å›½é™…åŒ–ï¼ˆi18nï¼‰" class="headerlink" title="å›½é™…åŒ–ï¼ˆi18nï¼‰"></a>å›½é™…åŒ–ï¼ˆi18nï¼‰</h2><p>å›½é™…åŒ–æ˜¯ä¸€ä¸ªå¤§å‹ç½‘ç«™ä¸­å¿…å¤‡çš„ä¸€ä¸ªæœåŠ¡ä¹‹ä¸€ï¼Œä¸»è¦ç”¨äºæœåŠ¡äºä¸åŒç§æ—ã€å®—æ•™ä¿¡ä»°ã€å›½å®¶å’Œåœ°åŒºçš„äººä»¬æ²Ÿé€šçš„ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥å…·ï¼Œé€šè¿‡Thymeleafæ¥å®ç°ç«™ç‚¹å›½é™…åŒ–æœåŠ¡æ— éæ˜¯ä¸€ä»¶éå¸¸ä¸é”™çš„äº‹æƒ…ï¼Œç”šè‡³æ¯”åŸç”Ÿçš„æ›´åŠ é¡ºåˆ©ã€‚<br>è‡³äºæ ‡é¢˜ä¸­çš„å›½é™…åŒ– i18nçš„æ„æ€ä¸º å›½é™…åŒ–è‹±æ–‡å•è¯ internationalizationï¼Œ18ä¸ºä¸­é—´çš„å­—ç¬¦æ•°ï¼Œæ˜¯â€œå›½é™…åŒ–â€çš„ç®€ç§°ï¼Œé€šå¸¸åœ¨èµ„è®¯é¢†åŸŸï¼Œå›½é™…åŒ–æ˜¯æŒ‡è®©äº§å“ã€å‡ºç‰ˆç‰©ã€è½¯ä»¶ï¼Œæ— éœ€åšå¤§çš„æ”¹å˜å°±å¯é€‚åº”ä¸åŒçš„åœ°åŒºå’Œè¯­è¨€éœ€è¦ï¼Œè€Œå¯¹ç¨‹åºæ¥è¯´åˆ™æ˜¯&#96;&#96;&#96;ä¸éœ€è¦ä¿®æ”¹å†…éƒ¨ä»£ç çš„æƒ…å†µä¸‹ï¼Œæ ¹æ®ä¸åŒè¯­è¨€åŠå…¶åœ°åŒºæ˜¾ç¤ºç›¸åº”çš„é¡µé¢ã€‚</p>
<h3 id="i18n-properties"><a href="#i18n-properties" class="headerlink" title="i18n properties"></a>i18n properties</h3><p>æœ¬ä¹¦æˆ‘ä»¬é€šè¿‡IDEAä½œä¸ºä¸»è¦çš„é›†æˆå¼€å‘ç¯å¢ƒè¿›è¡Œå¼€å‘ï¼Œé¦–å…ˆå»ºç«‹ä¸€ä¸ªspring boot web + thymeleaf çš„mavené¡¹ç›®å³é€šè¿‡spring Initializrå·¥å…·æ„å»ºçš„webé¡¹ç›®ï¼Œåœ¨<code>src/main/resources/static/</code>ä¸­æ–°å»ºç›®å½•ä¸º<code>i18n</code>ç”¨äºå­˜å‚¨i18nè¯­è¨€æ–‡ä»¶ã€‚</p>
<p>ä¹‹åå³é”®<code>resources/static/i18n/</code>ç›®å½•é€‰æ‹© New-&gt;Resource Bundleï¼Œå‡ºç°Create Resource Bundleçª—å£ä¸‹ï¼Œæ­¤æ—¶å¯é€šè¿‡é¡¹ç›®è¯­è¨€ï¼ˆProject Localesï¼‰ç§»åŠ¨åˆ°ï¼ˆ&gt;ï¼‰ è¯­è¨€æ·»åŠ ï¼ˆLocales to Addï¼‰</p>
<p>åœ¨ç„¶ååŒå‡»åœ¨IDEAä¸­åŒå‡» <code>src/main/resources/static/i18n/Resource Bundle &#39;home&#39;</code>å‡ºç°.propertiesé…ç½®é¡µé¢ï¼Œç‚¹å‡»â€œ+â€å·å»ºç«‹å…¶å„è¯­è¨€å˜é‡åã€‚</p>
<h4 id="home-properties"><a href="#home-properties" class="headerlink" title="home.properties"></a>home.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ºé»˜è®¤è¯­è¨€æ–‡ä»¶ï¼Œå¯ä¸ºç©ºï¼Œä½†æ–‡ä»¶ä¸å¯ä¸å­˜åœ¨ã€‚</span></span><br></pre></td></tr></table></figure>
<h4 id="home-en-US-properties"><a href="#home-en-US-properties" class="headerlink" title="home_en_US.properties"></a>home_en_US.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">home.i8n</span>=<span class="string">en_US</span></span><br><span class="line"><span class="attr">home.title</span>=<span class="string">Hello,world!</span></span><br></pre></td></tr></table></figure>
<h4 id="home-zh-CN-properties"><a href="#home-zh-CN-properties" class="headerlink" title="home_zh_CN.properties"></a>home_zh_CN.properties</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">home.i8n</span>=<span class="string">zh_CN</span></span><br><span class="line"><span class="attr">home.title</span>=<span class="string">ä½ å¥½ä¸–ç•Œï¼</span></span><br></pre></td></tr></table></figure>

<h3 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h3><p>åœ¨application.ymlä¸­ï¼Œä¸»è¦å­˜æ”¾äºå’Œ<code>application.properties</code>åŒçº§ç›®å½•ä¸‹ï¼Œç”¨äºé…ç½®æˆ‘ä»¬çš„i18næ–‡ä»¶æ‰€åœ¨ç›®å½•å’Œé¡¹ç›®çš„ç¼–ç ä¿¡æ¯ï¼Œé€šè¿‡è®¾ç½®application.ymlå¯è®¾ç½® i18næ–‡ä»¶ç›®å½•åŠæ–‡ä»¶åï¼ˆç›¸å¯¹ç›®å½•ï¼Œä¸è¦ä½¿ç”¨ç»å¯¹ç›®å½•ï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  messages:</span><br><span class="line">    basename: static/i18n/home</span><br><span class="line">    encoding: UTF-8</span><br></pre></td></tr></table></figure>
<h3 id="application-properties"><a href="#application-properties" class="headerlink" title="application.properties"></a>application.properties</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.thymeleaf.cache</span>=<span class="string">false</span></span><br><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">static/i18n/home</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><h4 id="LocaleConfigucation-java"><a href="#LocaleConfigucation-java" class="headerlink" title="LocaleConfigucation.java"></a>LocaleConfigucation.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.LocaleResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.i18n.LocaleChangeInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.i18n.SessionLocaleResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LocaleConfigucation</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> LocaleResolver <span class="title function_">localeResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤è¯­è¨€</span></span><br><span class="line">            <span class="type">SessionLocaleResolver</span> <span class="variable">sessionLocaleResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SessionLocaleResolver</span>();</span><br><span class="line">            sessionLocaleResolver.setDefaultLocale(Locale.US);</span><br><span class="line">            <span class="comment">// æ–­ç‚¹æµ‹è¯•æ‹¦æˆªå™¨æ˜¯å¦æ‰§è¡Œ</span></span><br><span class="line">            System.out.println(<span class="string">&quot;yes&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sessionLocaleResolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> WebMvcConfigurer <span class="title function_">localeInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">WebMvcConfigurer</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry interceptorRegistry)</span> &#123;</span><br><span class="line">                <span class="type">LocaleChangeInterceptor</span> <span class="variable">localeInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LocaleChangeInterceptor</span>();</span><br><span class="line">                localeInterceptor.setParamName(<span class="string">&quot;lang&quot;</span>);</span><br><span class="line">                interceptorRegistry.addInterceptor(localeInterceptor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="é¦–é¡µæ–‡ä»¶"><a href="#é¦–é¡µæ–‡ä»¶" class="headerlink" title="é¦–é¡µæ–‡ä»¶"></a>é¦–é¡µæ–‡ä»¶</h3><h4 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;index&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h5&gt;Java Thymeleaf i18n &lt;span th:text=&quot;#&#123;home.i8n&#125;&quot;&gt;&lt;/span&gt; &lt;/h5&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=&quot;?lang=zh_CN&quot;&gt;ä¸­æ–‡&lt;/a&gt;/&lt;a href=&quot;/?lang=en_US&quot;&gt;English&lt;/a&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">    &lt;h5 th:text=&quot;#&#123;home.title&#125;&quot;&gt;&lt;/h5&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring boot/1.Spring boot ç®€ä»‹/">Spring Boot</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a> <a class="article__tag-none-link" href="/tags/spring-boot/" rel="tag">spring boot</a>
			</span>
		
	</div>

	

	
		<p>springä¸spring bootçš„æ˜æ˜¾åŒºåˆ«å¯ä»¥ä»é…ç½®æ–‡ä»¶å‡ºå‘è§‚å¯Ÿï¼Œspringå¼€å‘æ¡†æ¶è™½ç„¶å¼ºå¤§ä½†é—®é¢˜åœ¨äºâ€œé…ç½®æ–‡ä»¶è¿‡å¤šâ€ï¼Œé€ æˆå¼€å‘çš„æ•ˆç‡é™ä½ä¸”ä¸æ–¹ä¾¿ï¼Œå°±å¦‚spring mvcè€Œçœ‹ï¼Œspring mvcå…±éœ€è¦é…ç½®ä¸¤ä¸ªxmlæ‰å¯è¾“å‡ºä¸€ä¸ªâ€œhello,worldâ€ï¼Œæ‰€ä»¥å°±é€ æˆäº†å¼€å‘æ•ˆç‡å’Œéƒ¨ç½²ç¼“æ…¢çš„é—®é¢˜ã€‚è€Œspring bootçš„å‡ºç°å¤§è€Œè§£å†³äº†è¿™ç§çœ‹ä¼¼ä¸æ˜¯é—®é¢˜åˆéå¸¸æ— è¯­çš„è¿‡ç¨‹ã€‚</p>
<h2 id="spring-boot-æ¦‚è¿°"><a href="#spring-boot-æ¦‚è¿°" class="headerlink" title="spring boot æ¦‚è¿°"></a>spring boot æ¦‚è¿°</h2><p>spring bootæ˜¯ç”±pivotalå›¢é˜Ÿæä¾›çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡çš„åˆè¡·å’Œç›®çš„å°±æ˜¯æ¥ç®€åŒ–springåº”ç”¨éƒ¨ç½²åŠå¼€å‘è¿‡ç¨‹ï¼Œåé¢ä¸Šè¯´å°±æ˜¯ä¸ç”¨åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­é­å—spring xmlæŠ˜ç£¨ï¼Œä½¿ç”¨spring bootæ¡†æ¶å¯ä»¥ç”¨äºåšåˆ°ä¸€ä¸“æ³¨äºspringçš„åº”ç”¨å¼€å‘ï¼Œä»è€Œä¸ç”¨å…³æ³¨å¤ªå¤šçš„xmlé…ç½®ã€‚<br>åœ¨spring bootæ¡†æ¶ä¸­ï¼Œä½¿ç”¨â€œçº¦å®šä¼˜äºé…ç½®ï¼ˆConvention Over Configurationï¼‰â€çš„è®¾è®¡ç†å¿µï¼Œé’ˆå¯¹ä¼ä¸šåº”ç”¨è€Œå¼€å‘ï¼Œæä¾›äº†ç¬¦åˆå„ç§åº”ç”¨åœºæ™¯çš„spring-boot-starterçš„è‡ªåŠ¨åŒ–é…ç½®ä¾èµ–æ¨ªå—ï¼Œè¿™äº›æ¨¡å—å’Œspring bootéƒ½æ˜¯åŸºäºâ€œ<strong>å¼€ç®±å³ç”¨</strong>â€çš„åŸåˆ™ï¼Œä»è€Œå…äºspringçš„å„ç§æŠ˜ç£¨ã€‚</p>
<h2 id="spring-ä¸»è¦ç‰¹å¾"><a href="#spring-ä¸»è¦ç‰¹å¾" class="headerlink" title="spring ä¸»è¦ç‰¹å¾"></a>spring ä¸»è¦ç‰¹å¾</h2><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>çº¦å®šä¼˜äºé…ç½®</td>
<td>springbootéµå¾ªçº¦å®šä¼˜äºé…ç½®çš„è§„åˆ™å¾ˆå°‘éœ€è¦é…ç½®ï¼Œå¤šæ•°æƒ…å†µä¸»è¦ä½¿ç”¨é»˜è®¤é…ç½®å³å¯</td>
</tr>
<tr>
<td>ç‹¬ç«‹è¿è¡Œ</td>
<td>springbootå¯ä»¥ä»¥jaråŒ…çš„å½¢å¼ç‹¬ç«‹è¿›è¡Œè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨â€œjava -jar xxxâ€è¿è¡Œæˆ–è€…åœ¨é¡¹ç›®çš„ä¸»ç¨‹åºä¸­æ‰§è¡Œmainæ–¹æ³•æ‰§è¡Œspringbooté¡¹ç›®</td>
</tr>
<tr>
<td>å†…åµŒwebæµè§ˆå™¨</td>
<td>å†…åµŒservletå®¹å™¨ï¼Œå¯ä»¥é€‰æ‹©å†…åµŒtomcatç­‰webå®¹å™¨</td>
</tr>
<tr>
<td>æä¾›starterç®€åŒ–mavené…ç½®</td>
<td>springbootæä¾›äº†ä¸€ç³»åˆ—çš„starter pomæ¥ç®€åŒ–mavençš„ä¾èµ–åŠ è½½é—®é¢˜ï¼Œ<strong>åŸºæœ¬ä¸Š</strong>åšåˆ°äº†è‡ªåŠ¨åŒ–é…ç½®å¼€ç®±å³ç”¨ã€‚</td>
</tr>
<tr>
<td>è‡ªåŠ¨åŒ–é…ç½® spring</td>
<td>springbootæ ¹æ®é¡¹ç›®ä¾èµ–ï¼ˆåœ¨ç±»çš„è·¯å¾„ä¸­çš„jaråŒ…å’Œclassï¼‰ï¼Œè‡ªåŠ¨åŒ–é…ç½®springæ¡†æ¶ï¼Œå‡å°‘äº†springé¡¹ç›®å¼€å‘å‰çš„å„ç§é—®é¢˜ã€‚</td>
</tr>
<tr>
<td>æä¾›ç”Ÿäº§ç›‘æ§</td>
<td>springbootæä¾›äº†åŸºäºhttpã€sshã€telnetå¯¹è¿è¡Œçš„é¡¹ç›®è¿›è¡Œè·Ÿè¸ªç›‘æ§</td>
</tr>
<tr>
<td>æ— ä»£ç ç”Ÿæˆ and xmlé…ç½®</td>
<td>springbootä¸æ˜¯å€ŸåŠ©ä»£ç æ¥ç”Ÿæˆçš„ï¼Œè€Œæ˜¯é€šè¿‡æ¡ä»¶æ³¨è§£æ¥å®ç°çš„ï¼Œæå€¡ä½¿ç”¨javaé…ç½®ç›¸ç»“åˆçš„é…ç½®ï¼Œæ–¹ä¾¿å¿«æ·</td>
</tr>
</tbody></table>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring alibaba/2.Spring Cloud Apache Dubbo/">Spring Cloud Apache Dubbo</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring-cloud-alibaba/" rel="tag">spring cloud alibaba</a>
			</span>
		
	</div>

	

	
		<p>Dubbos æ˜¯ Alibaba äº 2012 å¹´å¼€æºï¼Œç”±äºå½“æ—¶è¯¥é¡¹ç›®æ˜¯å†…éƒ¨ä½¿ç”¨çš„ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ²»ç†æ¡†æ¶ï¼Œå¹¶ç»å†è¿‡å¤šå¹´çš„å¤§è§„æ¨¡ä¸šåŠ¡éªŒè¯ï¼Œåœ¨çŸ­æ—¶é—´å†…æ”¶åˆ°å¾ˆå¤šå¼€å‘è€…å–œçˆ±ï¼Œä½†æ˜¯å¤„äºæŸäº›åŸå› åœ¨ 2014 å¹´åœæ­¢äº†ç»´æŠ¤ï¼Œæ‰€æœ‰å°±å‡ºç°äº†å½“å½“ç½‘çš„ DubboXï¼Œä½†åœ¨ 2017 å¹´ 9 æœˆï¼ŒAlibaba åˆé‡å¯äº† Dubbo é¡¹ç›®çš„ç»´æŠ¤ï¼Œäº 2018 å¹´ 2 æœˆ è¿›å…¥äº† Apache å­µåŒ–ï¼Œè¿™æ„å‘³ç€ Dubbo æ¡†æ¶å¹¶ä¸æ˜¯åªå±äº Alibaba ï¼Œè¿˜å±äºå¼€æºç¤¾åŒºçš„è´¡çŒ®ã€‚</p>
<p>åœ¨ 2019 å¹´ 5 æœˆ Dubbo æ­£å¼ä»å­µåŒ–å™¨ä¸­æ¯•ä¸šï¼Œæ­£å¼æˆä¸º â€œApache Dubboâ€ï¼Œæ„å‘³ç€è¿™æ˜¯ Apache çš„é¡¶çº§é¡¹ç›®ã€‚åœ¨ç›®å‰ Dubbo ä¸»è¦çš„ä½œç”¨å°±æ˜¯ç›‘æ§å’ŒæœåŠ¡æ³¨å†Œä¸¤ä¸ªéå¸¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œé™¤æ­¤ä¹‹å¤–ä»–è¿˜æä¾›äº†æœåŠ¡æ²»ç†ã€æœåŠ¡æ³¨å†Œã€ç›‘æ§ã€è·¯ç”±å®¹é”™ç­‰åŠŸèƒ½ã€‚</p>
<p>ä¿ƒä½¿ Dubbo é¡¹ç›®äº§ç”Ÿçš„ä¸¤ä¸ªç—›ç‚¹å°±æ˜¯æœåŠ¡æä¾›è€…æœåŠ¡çš„è¿æ¥ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ URLï¼Œä½†å¦‚æœæœåŠ¡æä¾›è€…å‡ºç°æ•…éšœæˆ–è€…æ‰©å®¹æ—¶å°±éœ€è¦æ¥ç»´æŠ¤æœåŠ¡æ¶ˆè´¹è€…æˆ–è€…æœåŠ¡ä¸­å¿ƒçš„åœ°å€ï¼Œå› æ­¤è¿™ç§ç»´æŠ¤æ–¹å¼éå¸¸éº»çƒ¦ã€‚é™¤</p>
<p>æ­¤æˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡ç›‘æ§æ¥å‘ç°é‚£äº›æœåŠ¡éœ€è¦è¿›è¡Œæ‰©å®¹ï¼Œé‚£ä¸€äº›æœåŠ¡æ˜¯ä¸éœ€è¦è¿™ä¹ˆå¤§æ€§èƒ½çš„ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªåˆ¤æ–­çš„æ ¹æ®ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ç›‘æ§æ¥æ ¹æ®ä¸åŒæœåŠ¡è®¿é—®çš„æƒ…å†µæ¥åˆç†è°ƒç”¨æœåŠ¡èµ„æºï¼Œæé«˜æœºå™¨çš„åˆ©ç”¨ç‡ã€‚</p>
<blockquote>
<p>å› æ­¤ Dubbo ä¹Ÿç±»ä¼¼ä¸€ä¸ª RPC æ¡†æ¶ï¼Œä½†å’Œæ™®é€šç±»ä¼¼æ¡†æ¶ä¸åŒçš„æ˜¯å®ƒè¿˜æä¾›äº†ä¸€ä¸ªæœåŠ¡æ²»ç†çš„åŠŸèƒ½</p>
</blockquote>
<h2 id="Spring-Boot-in-Apache-Dubbo-and-Nacos"><a href="#Spring-Boot-in-Apache-Dubbo-and-Nacos" class="headerlink" title="Spring Boot in Apache Dubbo and Nacos"></a>Spring Boot in Apache Dubbo and Nacos</h2><p>Dubbo é™¤äº†æ”¯æŒ Spring Cloud ä¹‹å¤–ï¼Œå®ƒè¿˜æ”¯æŒ Spring Boot çš„ç”Ÿæ€æ¥å®ç°å¾®æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è®²è§£ Spring Cloud Dubbo ä¹‹å¤–è¿˜éœ€è¦äº†è§£ä¸‹ ZooKeeper å’Œ Apache Dubbo æ‰€å®ç°å‡ºçš„å¾®æœåŠ¡æ•ˆæœã€‚</p>
<h3 id="æœåŠ¡æ¥å£"><a href="#æœåŠ¡æ¥å£" class="headerlink" title="æœåŠ¡æ¥å£"></a>æœåŠ¡æ¥å£</h3><p>ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬çš„çš„å…±ç”¨å®ä½“ç±»ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªæ™®é€šçš„ maven æ–‡ä»¶ï¼Œå½“å¼€é¥­å®Œæˆåå¯¼å‡ºä¸º jar åŒ…ï¼Œä¹‹åå°±å¯ä»¥åœ¨å…¶ä»–éœ€è¦çš„æ—¶å€™ç›´æ¥è°ƒç”¨ä¾èµ–å³å¯ï¼š</p>
<blockquote>
<p>å¯ä»¥ç†è§£ä¸ºå°±æ˜¯å°†å®ä½“ç±»å®‰è£…æœ¬åœ°ä¾èµ–ä¸­ï¼Œç„¶åç”¨çš„æ—¶å€™ç›´æ¥å¼•å…¥ä¾èµ–å’Œå·¥å…·ç±»å³å¯ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> model;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å®šä¹‰æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> kunlun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2021/8/5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">heyService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æ¥å£</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> load æœåŠ¡æ¶ˆè´¹è€…æ˜¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">getData</span><span class="params">(String load)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“å†™å¥½ä¹‹åæˆ‘ä»¬ç›´æ¥åœ¨é¡¹ç›®çš„çˆ¶ç›®å½•è¿è¡Œ <code>mvn compile install</code> ç›´æ¥å®‰è£…åˆ°æœ¬åœ°å³å¯ï¼Œä¹‹åå¯ä»¥é€šè¿‡å…¶ <code>pom.xml</code> å®šä¹‰çš„åç§°è¿›è¡Œå¼•å…¥æœ¬åœ°ä¾èµ–ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring alibaba/1.Spring Cloud Alibaba/">Spring Cloud Alibaba</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring-cloud-alibaba/" rel="tag">spring cloud alibaba</a>
			</span>
		
	</div>

	

	
		<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210804183754.png"><br>è¿‘å¹´æ¥éšç€äº’è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼ŒAlibaba åœ¨å¾®æœåŠ¡çš„è´¡çŒ®å‡ºçš„é¡¹ç›®ä¹Ÿéå¸¸å¾—å¤šï¼Œå¦‚ Dubbo åœ¨ 2021 å¹´è¿›è¡Œå¼€æºï¼Œä¹‹åè¿…é€Ÿè¿›è¡Œå‘å±•ï¼Œç›´åˆ° Spring Cloud çš„å‡ºç°æ¥æ‰“ç ´äº†ä¼ ç»Ÿçš„ç»´åº¦ï¼Œä¹‹å 2017 å¹´ Dubbo é¡¹ç›®åˆé‡æ–°å¼€å§‹æ´»è·ƒï¼Œå¹¶æ‹¥æŠ± Spring Cloud æ ‡å‡†ï¼Œä¹Ÿæˆä¸ºäº†ç›®å‰å›½å†…ä¸ºæ•°ä¸å¤šå¯ä»¥æ›¿ä»£ Netfilx å…¨å®¶æ¡¶çš„ä¸€ç³»åˆ—äº§å“ã€‚</p>
<p>Spring Cloud Alibaba ç³»åˆ—çš„äº§å“å¾ˆå—å›½å†…å¼€å‘è€…å–œçˆ±ï¼Œä»–ä¹Ÿä¸ä»…ä»…æ˜¯å¯¹æœ¬åœŸå¼€å‘è€…çš„æ”¯æŒå’Œç”¨æˆ·ä½“éªŒï¼Œè€Œæ˜¯è¿™å‡ å¹´æ¥ Alibaba çš„äº§å“ç»éªŒï¼Œå› æ­¤ Alibaba çš„è§£å†³æ–¹æ¡ˆæ¯” Netfile æ›´åŠ æ›´åŠ äººæ€§åŒ–å’Œå¥½ç†è§£ï¼Œä½†ç¼ºç‚¹åœ¨äºæ–‡æ¡£æ”¯æŒæ²¡æœ‰ Netfile çš„ç”Ÿæ€é‚£ä¹ˆå¥½ã€‚</p>
<p>å¯¹äº Spring Cloud Alibaba ä¸­ä¸»è¦çš„ç»„å»ºå°±æ˜¯ Dubboã€Nacosã€Sentinelã€Seataã€RocketMQ</p>
<blockquote>
<p>Dubbo</p>
<blockquote>
<p>ä¸€ä¸ªå¹¶ä¸ç®€å•çš„ RPC æ¡†æ¶ï¼Œç”¨äºå®ç°å¤šä¸ªç³»ç»Ÿä¹‹é—´çš„é«˜æ€§èƒ½ã€é€æ˜åŒ–è°ƒç”¨ã€æœåŠ¡æ²»ç†ï¼ˆæ³¨å†Œã€ç›‘æ§ã€è·¯ç”±ã€å®¹é”™ï¼‰</p>
</blockquote>
<p>ZooKeeper</p>
<blockquote>
<p>å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹æ€§å®ç°å‡ºæ³¨å†Œä¸­å¿ƒï¼Œä½†ä»–æœ¬èº«å°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åè°ƒä¸­é—´ä»¶ï¼Œå› æ­¤å®ç°æ³¨å†Œä¸­å¿ƒä¹Ÿæ˜¯åˆæƒ…åˆç†ã€‚</p>
</blockquote>
<p>Nacos</p>
<blockquote>
<p>è‡´åŠ›ä¸è§£å†³ä¸ºæœåŠ¡ä¸­çš„ç»Ÿä¸€é…ç½®ï¼ŒæœåŠ¡æ³¨å†Œä¸å‘ç°ç­‰é—®é¢˜ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä»–æ¥å®ç°æœåŠ¡å‘ç°ã€æœåŠ¡é…ç½®ã€æœåŠ¡å…ƒæ•°æ®å’Œæµé‡ç®¡ç†ç­‰</p>
</blockquote>
<p>Sentinel </p>
<blockquote>
<p>é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„è½»é‡çº§æœåŠ¡æ§åˆ¶ç»„å»ºï¼Œå¯ä»¥å®ç°å¯¹æµé‡çš„é™çº§å’Œç†”æ–­ä»¥åŠä¸€ç³»åˆ—çš„é™æµè§„åˆ™ã€‚</p>
</blockquote>
<p>Seata</p>
<blockquote>
<p>å¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œè‡´åŠ›ä¸åœ¨å¾®æœåŠ¡ä¸­æä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ï¼Œæä¾›äº† ATã€TCCã€Sagaã€XA äº‹åŠ¡æ¨¡å¼</p>
</blockquote>
<p>RocketMQ</p>
<blockquote>
<p>æ˜¯ä¸€ä¸ªä½å»¶è¿Ÿã€é«˜å¯é ã€å¯ä¼¸ç¼©æ˜“ç”¨äºåˆ†å¸ƒå¼æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç»è¿‡ Alibaba å¤šå¹´çš„ åŒ 11 éªŒè¯ï¼Œå› æ­¤å…·æœ‰äº†é«˜ååã€ä½å»¶è¿Ÿã€æµ·é‡æ¶ˆæ¯å †ç§¯ç­‰ç‰¹ç‚¹ï¼ŒåŒæ—¶è¿˜æä¾›äº†é¡ºåºæ¶ˆæ¯ï¼Œäº‹ç‰©æ¶ˆæ¯ï¼Œå®šæ—¶æ¶ˆæ¯ï¼Œæ¶ˆæ¯é‡è¯•ã€æ¶ˆæ¯è¿½è¸ªç­‰ç‰¹ç‚¹ã€‚</p>
</blockquote>
</blockquote>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/8.Spring MVC/">Spring MVC</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>Spring MVCä¸­çš„â€œMVCâ€,å…¨ç§°å³â€œModel View Contorotollerï¼Œè§†å›¾ã€æ¨¡å‹ã€æ§åˆ¶å™¨â€çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼Œä»¥è¿™ä¸‰ä¸ªéƒ¨åˆ†ä»¥æœ€ä½çš„è€¦åˆè¿›è¡ŒååŒå·¥ä½œï¼Œä»è€Œæé«˜åº”ç”¨çš„å¯æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ï¼Œè€ŒSpring MVC åŸºäºMVCæ€æƒ³çš„è€Œå¼€å‘çš„ä¸€ä¸ªæ¡†æ¶ï¼Œå®ç°äº†Web MVCè®¾è®¡æ¨¡å¼çš„è½»é‡çº§çš„webæ¡†æ¶ã€‚<br>è€Œ Modelã€Viewã€Controllerï¼Œå³æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨çš„å¤§æ¦‚è®¾è®¡ä¸ºï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>Model</td>
<td>è¡¨ç¤ºç¨‹åºæ ¸å¿ƒï¼ŒåŒ…å«äº†ç¨‹åºçš„æ•°æ®ï¼Œè€Œæ•°æ®å¯ä»¥æ˜¯å•ä¸ªå¯¹è±¡æˆ–å¯¹è±¡çš„ä¸€ä¸ªé›†åˆ</td>
</tr>
<tr>
<td>View</td>
<td>ä»¥ç‰¹å®šæ ¼å¼è¡¨ç¤ºæ‰€æä¾›çš„ä¿¡æ¯ï¼Œä»–é€šå¸¸ä½¿ç”¨JSPâ€”+JSTLç”¨äºåˆ›å»ºè§†å›¾é¡µé¢</td>
</tr>
<tr>
<td>Controller</td>
<td>æ§åˆ¶å™¨åŒ…å«äº†åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œé€šå¸¸ä½¿ç”¨<code>@Controller</code>çš„æ³¨è§£å°†ç”¨äºè¡¨ç¤ºæ­¤ç±»æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨</td>
</tr>
</tbody></table>
<h2 id="Spring-MVC-å·¥ä½œçš„åŸç†"><a href="#Spring-MVC-å·¥ä½œçš„åŸç†" class="headerlink" title="Spring MVC å·¥ä½œçš„åŸç†"></a>Spring MVC å·¥ä½œçš„åŸç†</h2><h3 id="Dispatcher-Select"><a href="#Dispatcher-Select" class="headerlink" title="Dispatcher Select"></a>Dispatcher Select</h3><p>ä»ä¸Šå›¾å¯çš„çŸ¥Spring MVCçš„æ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡äº†Dispatcher Selectå³åˆ†å‘å™¨&#x2F;åˆ†æ´¾å™¨æ¥ç»Ÿä¸€è¿›è¡Œåˆ†å‘ï¼Œä¹‹åå°†è½»è½»å¶å‘é€åœ¨Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨Spring MVCæä¾›çš„Handler Mappingï¼ˆå¤„ç†å™¨æ˜ å°„ï¼‰æ¥å¯»æ‰¾å¤„ç†å™¨æ˜ å°„ï¼Œä»è€Œæ‰¾åˆ°æŒ‡å®šçš„æ§åˆ¶å™¨ã€‚</p>
<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><p>Controllerå³æ§åˆ¶å™¨ï¼Œä¸»è¦å®Œæˆå’Œå¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼ŒControllerå¤„ç†å®Œç”¨æˆ·è¯·æ±‚åï¼Œå°†ä¼šè¿”å›ModelAndViewï¼ˆæ¨¡å‹å’Œè§†å›¾ï¼‰å¯¹è±¡ç»™DispatcherSelectï¼ˆåˆ†å‘å™¨Serlectï¼‰è€ŒControlleråˆ™åŒ…å«äº†æ¨¡å‹ï¼ˆModelï¼‰&#x2F;è§†å›¾ï¼ˆViewï¼‰ã€‚</p>
<blockquote>
<p>è¿™é‡Œä½œè€…ä»ä¸¤ä¸ªè§’åº¦å»è€ƒè™‘ï¼Œå¦‚ä»å®è§‚çš„è§’åº¦è€Œçœ‹ï¼ŒDispatcherServletåˆ™æ˜¯ä¸€ä¸ªå‰ç«¯æ§åˆ¶å™¨iï¼Œè€Œä»å¾®è§‚çš„è§’åº¦è€Œçœ‹ï¼ŒDispatcherServletåˆ™æ˜¯ä¸€ä¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹çš„åˆ†æ´¾å™¨æˆ–æ§åˆ¶å™¨ã€‚</p>
</blockquote>
<h3 id="ViewResolver"><a href="#ViewResolver" class="headerlink" title="ViewResolver"></a>ViewResolver</h3><p>ViewResolveræ¥å£å³è§†å›¾è§£æç¨‹åºï¼Œä¸»è¦å·¥ä½œå’ŒèŒèƒ½å°±æ˜¯åœ¨Webåº”ç”¨ä¸­è´Ÿè´£æŸ¥æ‰¾Viewï¼Œç„¶åå°†ç›¸åº”çš„ç»“æœæ¸²æŸ“ç»™è®¿é—®è€…ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/7.Java Spring JDBC/">Java Spring JDBC</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>Java Spring JDBCå³äº’è”ç½‘æ•°æ®åº“å¼€å‘çš„åŸºç¡€ï¼ŒSpringæ¡†æ¶æä¾›äº†JDBCçš„æ¨¡æ¿æ¨¡å¼ï¼Œå³JDBCTemplateï¼Œå¯ç®€åŒ–å¾ˆå¤šçš„æ²‰äºä»£ç ï¼Œä½†æ˜¯åœ¨å®é™…æƒ…å†µä¸­jdbcTemeplateå¹¶ä¸å¸¸ç”¨ï¼Œä½†è¿™å¯¹æˆ‘ä»¬å­¦ä¹ å’Œç†è§£Spring å’Œä¹‹åçš„å¾®æœåŠ¡éƒ½ä¼šèµ·åˆ°éå¸¸é‡è¦çš„ä½œç”¨ï¼Œå¯å®¹æ˜“æˆ‘ä»¬ä»¥åç†è§£å¾®æœåŠ¡çš„æµç¨‹ã€è¿‡ç¨‹ç­‰ï¼Œæœ¬ä¹¦ä¸»è¦å‚è€ƒäº†tutorialspointå†…çš„æ–‡æ¡£è€Œæˆ.<br>åœ¨æ­£å¼å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹Jarå¤–éƒ¨ä¾èµ–åŒ…:</p>
<blockquote>
<p>aspectjweaver-1.9.2.jar<br>commons-logging-1.2.jar<br>mysql-connector-java-8.0.22.jar<br>org.springframework.transaction-3.1.0.release.jar<br>spring-aop-5.1.4.RELEASE.jar<br>spring-beans-5.1.4.RELEASE.jar<br>spring-context-5.1.4.RELEASE.jar<br>spring-core-5.1.4.RELEASE.jar<br>spring-expression-5.1.4.RELEASE.jar<br>spring-jdbc-5.1.4.RELEASE.jar<br>spring-tx-5.1.4.RELEASE.jar</p>
</blockquote>
<p>ä»¥ä¸Šjarå¤–éƒ¨éƒ¨åˆ†ä¾èµ–åŒ…å¯ä¸‹è½½springæ¡†æ¶æ¥å¼•å…¥ï¼Œè€Œå¦ä¸€éƒ¨åˆ†ä¾èµ–åŒ…éœ€è¦è‡ªè¡Œè¿›è¡ŒæŸ¥æ‰¾å’Œä¸‹è½½ï¼Œå¯é€šè¿‡<a target="_blank" rel="noopener" href="https://www.findjar.com/">https://www.findjar.com/</a> jaråŒ…æœç´¢æ¥ä¸‹è½½æƒ³è¦çš„jaråŒ…</p>
<h2 id="æ•°æ®è®¿é—®æ¥å£"><a href="#æ•°æ®è®¿é—®æ¥å£" class="headerlink" title="æ•°æ®è®¿é—®æ¥å£"></a>æ•°æ®è®¿é—®æ¥å£</h2><h3 id="TestuserDAO-java"><a href="#TestuserDAO-java" class="headerlink" title="TestuserDAO.java"></a>TestuserDAO.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestuserDAO</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ç”¨äºåˆå§‹åŒ–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDaotaSource</span><span class="params">(DataSource ds)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ç”¨äºåˆå§‹åŒ–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">(String name, <span class="type">int</span> age)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ç”¨äºåˆ—å‡ºæ–¹æ³•çš„è®°å½•</span></span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">getStudent</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ç”¨äºåˆ—å‡ºè¡¨ä¸­çš„æ‰€æœ‰è®°å½•</span></span><br><span class="line">	<span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">listStudents</span><span class="params">()</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ç”¨äºåˆ é™¤çš„æ–¹æ³•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ç”¨äºæ›´æ–°æ–¹æ³•å³å­¦ç”Ÿè¡¨ä¸­çš„è®°å½•</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Student-java"><a href="#Student-java" class="headerlink" title="Student.java"></a>Student.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">	<span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// age</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getage</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// id</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.id = id;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getid</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// name</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getname</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="StudentMapper-java"><a href="#StudentMapper-java" class="headerlink" title="StudentMapper.java"></a>StudentMapper.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.RowMapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentMapper</span> <span class="keyword">implements</span> <span class="title class_">RowMapper</span>&lt;Student&gt; &#123;</span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">mapRow</span><span class="params">(ResultSet rs,<span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">		<span class="type">Student</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">			s.setId(rs.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">			s.setAge(rs.getInt(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">			s.setName(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">		<span class="keyword">return</span> s;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°ç±»"><a href="#å®ç°ç±»" class="headerlink" title="å®ç°ç±»"></a>å®ç°ç±»</h3><h4 id="StudentJDBCTemplate-java"><a href="#StudentJDBCTemplate-java" class="headerlink" title="StudentJDBCTemplate.java"></a>StudentJDBCTemplate.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentJDBCTemplate</span> <span class="keyword">implements</span> <span class="title class_">TestuserDAO</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">	<span class="keyword">private</span> JdbcTemplate jdbcTemplateObject;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDataSource</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">			<span class="built_in">this</span>.dataSource = dataSource;</span><br><span class="line">			<span class="built_in">this</span>.jdbcTemplateObject = <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(dataSource);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">create</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;insert into testuser (name,age) values (?,?)&quot;</span>;</span><br><span class="line">		jdbcTemplateObject.update(SQL,name,age);</span><br><span class="line">		System.out.println(<span class="string">&quot;Name:&quot;</span> + name + <span class="string">&quot;Age:&quot;</span> + age);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Student <span class="title function_">getStudent</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;select * from testuser where id = ?&quot;</span>;</span><br><span class="line">		<span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> jdbcTemplateObject.queryForObject(SQL,</span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">Object</span>[] &#123;id&#125;,<span class="keyword">new</span> <span class="title class_">StudentMapper</span>());</span><br><span class="line">		<span class="keyword">return</span> student;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">listStudents</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;select * from testuser&quot;</span>;</span><br><span class="line">		List &lt;Student&gt; students = jdbcTemplateObject.query(SQL, <span class="keyword">new</span> <span class="title class_">StudentMapper</span>());</span><br><span class="line">		<span class="keyword">return</span> students;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;delete from testuser where id = ?&quot;</span>;</span><br><span class="line">		jdbcTemplateObject.update(SQL, id);</span><br><span class="line">		System.out.println(<span class="string">&quot;Delete id:&quot;</span> + id);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> id, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="type">String</span> <span class="variable">SQL</span> <span class="operator">=</span> <span class="string">&quot;update testuser set age = ? where id = ?&quot;</span>;</span><br><span class="line">		jdbcTemplateObject.update(SQL,age,id);</span><br><span class="line">		System.out.println(<span class="string">&quot;Update id:&quot;</span> + id);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDaotaSource</span><span class="params">(DataSource ds)</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="MainApp-java"><a href="#MainApp-java" class="headerlink" title="MainApp.java"></a>MainApp.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"><span class="keyword">import</span> Dao.StudentJDBCTemplate;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainApp</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">ApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;Beans.xml&quot;</span>);</span><br><span class="line">		<span class="type">StudentJDBCTemplate</span> <span class="variable">s</span> <span class="operator">=</span> </span><br><span class="line">				(StudentJDBCTemplate)application.getBean(<span class="string">&quot;StudentJDBCTemplate&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;_______________)s.create&quot;</span>);</span><br><span class="line">			s.create(<span class="string">&quot;sunone&quot;</span>, <span class="number">21</span>);</span><br><span class="line">			s.create(<span class="string">&quot;sunsun&quot;</span>, <span class="number">22</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;_______________)List&lt;Student&gt; student&quot;</span>);</span><br><span class="line">			List&lt;Student&gt; student = s.listStudents();</span><br><span class="line">			<span class="keyword">for</span> (Student record: student) &#123;</span><br><span class="line">				System.out.println(<span class="string">&quot;age:&quot;</span> + record.getage());</span><br><span class="line">				System.out.println(<span class="string">&quot;id:&quot;</span> + record.getid());</span><br><span class="line">				System.out.println(<span class="string">&quot;name:&quot;</span> + record.getname());</span><br><span class="line">			&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;________________)s.update&quot;</span>);</span><br><span class="line">			s.update(<span class="number">520</span>,<span class="number">1314</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;________________)Student student&quot;</span>);</span><br><span class="line">			<span class="type">Student</span> <span class="variable">students</span> <span class="operator">=</span> s.getStudent(<span class="number">2</span>);</span><br><span class="line">			System.out.println(<span class="string">&quot;id:&quot;</span> + students.getid());</span><br><span class="line">			System.out.println(<span class="string">&quot;age:&quot;</span> + students.getage());</span><br><span class="line">			System.out.println(<span class="string">&quot;name:&quot;</span> + students.getname());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="src"><a href="#src" class="headerlink" title="src"></a>src</h3><h4 id="Beans-xml"><a href="#Beans-xml" class="headerlink" title="Beans.xml"></a>Beans.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version = <span class="string">&quot;1.0&quot;</span> encoding = <span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span> = <span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xmlns:xsi</span> = <span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> </span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span> = <span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd &quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- Initialization for data source --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span> = <span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span> = <span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;url&quot;</span> <span class="attr">value</span> = <span class="string">&quot;jdbc:mysql://localhost:3306/testsp&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;username&quot;</span> <span class="attr">value</span> = <span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;password&quot;</span> <span class="attr">value</span> = <span class="string">&quot;password&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- Definition for studentJDBCTemplate bean --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span> = <span class="string">&quot;StudentJDBCTemplate&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span> = <span class="string">&quot;Dao.StudentJDBCTemplate&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span> = <span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span> = <span class="string">&quot;dataSource&quot;</span> /&gt;</span>    </span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">      </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šcodeå¯èƒ½ä¼šè¿è¡Œå‡ºé”™ä¸ºï¼š<br>Exception in thread â€œmainâ€ java.lang.NoSuchMethodError: org.springframework.dao.support.DataAccessUtils.nullableSingleResult(Ljava&#x2F;util&#x2F;Collection;)Ljava&#x2F;lang&#x2F;Object;<br>    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:784)<br>    at Dao.StudentJDBCTemplate.getStudent(StudentJDBCTemplate.java:30)<br>    at Dao.MainApp.main(MainApp.java:30)<br>ç»†å¿ƒçš„è¯»è€…å¯é€šè¿‡æœç´¢å¼•æ“è‡ªè¡Œè§£å†³ï¼Œè¿™ä¸ªæŠ¥é”™å¯èƒ½æ˜¯springä¸mavenå†…çš„ä¾èµ–ç‰ˆæœ¬è¿‡é«˜ã€ä¹Ÿå¯æ˜¯jarä¾èµ–åŒ…å¯¼å…¥é¡ºåºé€ æˆçš„ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/6.Spring Bean/">Java Spring Bean</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<p>Benanå³Springåº”ç”¨ä¸­çš„IoCå®¹å™¨å¯ä»¥åˆ›å»ºã€è£…é…ã€é…ç½®çš„åº”ç”¨ç»„ä»¶å¯¹è±¡ï¼Œè€Œè¿™äº›ç»„ä»¶é€šå¸¸ä¼šè¢«ç§°ä¹‹ä¸ºâ€œSpring Beanâ€ã€‚</p>
<h2 id="Spring-Bean-å®ä¾‹åŒ–"><a href="#Spring-Bean-å®ä¾‹åŒ–" class="headerlink" title="Spring Bean å®ä¾‹åŒ–"></a>Spring Bean å®ä¾‹åŒ–</h2><p>é€šå¸¸æˆ‘ä»¬åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­å¦‚æœéœ€è¦ä½¿ç”¨æŸæŸæŸå¯¹è±¡éœ€è¦äº‹å…ˆå¯¹å…¶å®ä¾‹åŒ–ï¼ŒåŒæ ·åœ¨Springæ¡†æ¶ä¸­æƒ³ä½¿ç”¨Springå®¹å™¨ä¸­çš„Beanå³â€œæ˜¥è±†â€ï¼ŒSpringå…±æä¾›äº†ä¸‰ç§æ–¹æ³•ï¼Œåˆ†åˆ«ä¸º<strong>æ„é€ æ–¹æ³•ã€é™æ€å·¥å‚å®ä¾‹åŒ–ã€å®ä¾‹å·¥å‚å®ä¾‹åŒ–ï¼Œè€Œåœ¨è¿™å…¶ä¸­æœ€ä¸ºç»å¸¸ä½¿ç”¨çš„æ— éå°±æ˜¯æ„é€ æ–¹æ³•å®ä¾‹åŒ–</strong></p>
<h3 id="å®ä¾‹åŒ–åŒ…-instance"><a href="#å®ä¾‹åŒ–åŒ…-instance" class="headerlink" title="å®ä¾‹åŒ–åŒ… instance"></a>å®ä¾‹åŒ–åŒ… instance</h3><h4 id="è°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ–-BeanClass-java"><a href="#è°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ–-BeanClass-java" class="headerlink" title="è°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ– BeanClass.java"></a>è°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ– BeanClass.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanClass</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> String name;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">BeanClass</span><span class="params">()</span> &#123;</span><br><span class="line">		name = <span class="string">&quot;è°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ–&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">BeanClass</span><span class="params">(String s)</span> &#123;</span><br><span class="line">		name = s;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è°ƒç”¨é™æ€æ–¹æ³•å®ä¾‹åŒ–-BeanInstanceFactory-java"><a href="#è°ƒç”¨é™æ€æ–¹æ³•å®ä¾‹åŒ–-BeanInstanceFactory-java" class="headerlink" title="è°ƒç”¨é™æ€æ–¹æ³•å®ä¾‹åŒ– BeanInstanceFactory.java"></a>è°ƒç”¨é™æ€æ–¹æ³•å®ä¾‹åŒ– BeanInstanceFactory.java</h4><figure class="highlight plaintext"><figcaption><span>instance;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class BeanInstanceFactory &#123;</span><br><span class="line">	public BeanClass createBeanClassInstance() &#123;</span><br><span class="line">		return new BeanClass(&quot;è°ƒç”¨å®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–&quot;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è°ƒç”¨å®ä¾‹å·¥å‚å®ä¾‹åŒ–-BeanStaticFactory-java"><a href="#è°ƒç”¨å®ä¾‹å·¥å‚å®ä¾‹åŒ–-BeanStaticFactory-java" class="headerlink" title="è°ƒç”¨å®ä¾‹å·¥å‚å®ä¾‹åŒ– BeanStaticFactory.java"></a>è°ƒç”¨å®ä¾‹å·¥å‚å®ä¾‹åŒ– BeanStaticFactory.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> instance;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanStaticFactory</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="type">BeanClass</span> <span class="variable">beanInstance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanClass</span>(<span class="string">&quot;è°ƒç”¨é™æ€çš„æ–¹æ³•å®ä¾‹åŒ–&quot;</span>);</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> BeanClass <span class="title function_">createInstance</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> beanInstance;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å»ºç«‹æµ‹è¯•åŒ…-config"><a href="#å»ºç«‹æµ‹è¯•åŒ…-config" class="headerlink" title="å»ºç«‹æµ‹è¯•åŒ… config"></a>å»ºç«‹æµ‹è¯•åŒ… config</h3><h4 id="å®ä¾‹åŒ–ç±»-JavaConfig-java"><a href="#å®ä¾‹åŒ–ç±»-JavaConfig-java" class="headerlink" title="å®ä¾‹åŒ–ç±» JavaConfig.java"></a>å®ä¾‹åŒ–ç±» JavaConfig.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> instance.BeanClass;</span><br><span class="line"><span class="keyword">import</span> instance.BeanInstanceFactory;</span><br><span class="line"><span class="keyword">import</span> instance.BeanStaticFactory;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaConfig</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// æ„é€ æ–¹æ³•å®ä¾‹åŒ–</span></span><br><span class="line">	<span class="meta">@Bean(&quot;beanClass&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> BeanClass <span class="title function_">getBeanClass</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BeanClass</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// é™æ€å·¥å‚å®ä¾‹åŒ–</span></span><br><span class="line">	<span class="meta">@Bean(&quot;beanStaticFactory&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> BeanClass <span class="title function_">getBeanStaticFactory</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> BeanStaticFactory.createInstance();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// åŠ¿åŠ›å·¥å‚å®ä¾‹åŒ–</span></span><br><span class="line">	<span class="meta">@Bean(&quot;beanInstanceFactory&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> BeanClass <span class="title function_">getBeanInstanceFactory</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="type">BeanInstanceFactory</span> <span class="variable">beaninstancefactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BeanInstanceFactory</span>();</span><br><span class="line">		<span class="keyword">return</span> beaninstancefactory.createBeanClassInstance();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•ç±»-TestBean-java"><a href="#æµ‹è¯•ç±»-TestBean-java" class="headerlink" title="æµ‹è¯•ç±» TestBean.java"></a>æµ‹è¯•ç±» TestBean.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> instance.BeanClass;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBean</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span> <span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span></span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(JavaConfig.class);</span><br><span class="line">		<span class="comment">// è°ƒç”¨æ„é€ æ–¹æ³•å®ä¾‹åŒ–</span></span><br><span class="line">		<span class="type">BeanClass</span> <span class="variable">beanclassone</span> <span class="operator">=</span> (BeanClass)application.getBean(<span class="string">&quot;beanClass&quot;</span>);</span><br><span class="line">		System.out.println(beanclassone + beanclassone.name);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// è°ƒç”¨é™æ€çš„æ–¹æ³•å®ä¾‹åŒ–</span></span><br><span class="line">		<span class="type">BeanClass</span> <span class="variable">beanclasstwo</span> <span class="operator">=</span> (BeanClass)application.getBean(<span class="string">&quot;beanStaticFactory&quot;</span>);</span><br><span class="line">		System.out.println(beanclasstwo + beanclasstwo.name);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// è°ƒç”¨å®ä¾‹å·¥å‚æ–¹æ³•å®ä¾‹åŒ–</span></span><br><span class="line">		<span class="type">BeanClass</span> <span class="variable">beanclassthree</span> <span class="operator">=</span> (BeanClass)application.getBean(<span class="string">&quot;beanInstanceFactory&quot;</span>);</span><br><span class="line">		System.out.println(beanclassthree + beanclassthree.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Bean-ä½œç”¨åŸŸ"><a href="#Bean-ä½œç”¨åŸŸ" class="headerlink" title="Bean ä½œç”¨åŸŸ"></a>Bean ä½œç”¨åŸŸ</h3><p>åœ¨Java Spring Beanä½œç”¨åŸŸä¸­ï¼Œå…¶ä¸­Beançš„å®ä¾‹å®šä¹‰äº†å…­ç§ä½œç”¨åŸŸï¼Œä¸»è¦å¯é€šè¿‡@Scopeæ¥å®ç° ï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>singleton</td>
<td>é»˜è®¤ä½¿ç”¨çš„ä½œç”¨åŸŸï¼Œé€šè¿‡ä½¿ç”¨singletonåœ¨Springä¸­åªæœ‰ä¸€ä¸ªBeanå®ä¾‹</td>
<td>1</td>
</tr>
<tr>
<td>prototype</td>
<td>Spring å®¹å™¨æ¯æ¬¡è·å–Prototypeå®šä¹‰çš„Beanï¼Œå®¹å™¨éƒ½å°†åˆ›å»ºä¸€ä¸ªæ–°çš„Beanå®ä¾‹</td>
<td>2</td>
</tr>
<tr>
<td>request</td>
<td>åœ¨HTTPè¯·æ±‚ä¸­å®¹å™¨å°†è¿”å›ä¸€ä¸ªBeanå®ä¾‹ï¼Œä»…å¯ä»¥åœ¨Web Springåº”ç”¨ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨</td>
<td>3</td>
</tr>
<tr>
<td>application</td>
<td>åœ¨æ¯ä¸ªServletContexrå¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå³åŒä¸€ä¸ªåº”ç”¨å…±äº«ä¸€ä¸ªBeanå®ä¾‹ï¼Œä»…å¯ä»¥åœ¨Web Springåº”ç”¨ç¨‹åºä¸Šè¿›è¡Œä½¿ç”¨</td>
<td>4</td>
</tr>
<tr>
<td>websocket</td>
<td>ä¸ºæ¯ä¸ªWebSocketå¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªBeanå®ä¾‹ï¼Œä»…å¯ä»¥åœ¨Web Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­è¿›è¡Œä½¿ç”¨</td>
<td>5</td>
</tr>
</tbody></table>
<p>é€šå¸¸åœ¨ä»¥ä¸Šçš„å…­ç§ä½œç”¨åŸŸä¸­ï¼Œsingletonå’Œprototypeæ˜¯æœ€å¸¸ç”¨çš„ä¸¤ç§ï¼Œè€Œå…¶ä»–çš„ä½œç”¨åŸŸä½¿ç”¨åœ¨Web Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸­ï¼Œé€šè¿‡ä¸‹ä¸€ä¸ªå®ä¾‹æ¥æ¼”ç¤ºBeanä½œç”¨åŸŸã€‚</p>
<h4 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h4><h5 id="ScopeConfig-java"><a href="#ScopeConfig-java" class="headerlink" title="ScopeConfig.java"></a>ScopeConfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;service&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScopeConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="TestScope-java"><a href="#TestScope-java" class="headerlink" title="TestScope.java"></a>TestScope.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> service.PrototypeService;</span><br><span class="line"><span class="keyword">import</span> service.SingletonService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestScope</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> </span><br><span class="line">				<span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(ScopeConfig.class);</span><br><span class="line">		<span class="type">SingletonService</span> <span class="variable">singletonserviceone</span> <span class="operator">=</span> application.getBean(SingletonService.class);</span><br><span class="line">		<span class="type">SingletonService</span> <span class="variable">singletonservicetwo</span> <span class="operator">=</span> application.getBean(SingletonService.class);</span><br><span class="line">		</span><br><span class="line">		System.out.println(singletonserviceone);</span><br><span class="line">		System.out.println(singletonservicetwo);</span><br><span class="line">		</span><br><span class="line">		<span class="type">PrototypeService</span> <span class="variable">prototypeserviceone</span> <span class="operator">=</span> application.getBean(PrototypeService.class);</span><br><span class="line">		<span class="type">PrototypeService</span> <span class="variable">prototypeservicetwo</span> <span class="operator">=</span> application.getBean(PrototypeService.class);</span><br><span class="line">		System.out.println(prototypeserviceone);</span><br><span class="line">		System.out.println(prototypeservicetwo);</span><br><span class="line">		</span><br><span class="line">		application.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h4><h5 id="PrototypeService-java"><a href="#PrototypeService-java" class="headerlink" title="PrototypeService.java"></a>PrototypeService.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Scope;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>    </span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrototypeService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="SingletonService-java"><a href="#SingletonService-java" class="headerlink" title="SingletonService.java"></a>SingletonService.java</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>        <span class="comment">// é»˜è®¤ä¸º singleton ç›¸å½“äº@Scope(&quot;singleton&quot;);</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SingletonService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šå›¾çš„è¿è¡Œç»“æœå¯ä»¥çš„å‡º@Serviceä¸@Scope(â€œprototypeâ€)ä¸¤ä¸ªä¸€èµ·ä½¿ç”¨å’Œå•ä¸ªä½¿ç”¨çš„ä¸åŒæ˜¯æœ€ååœ¨â€œPrototypeServiceâ€ä¸­è¾“å‡ºçš„ä¿¡æ¯ä¼šéšä¹‹æ”¹å˜ï¼Œå¦‚ä¸‹ï¼š</p>
<blockquote>
<p>service.SingletonService@41089d<br>service.SingletonService@<strong>41089d</strong><br>service.PrototypeService@a068d1<br>service.PrototypeService@<strong>1cb5951</strong></p>
</blockquote>
<h3 id="Bean-çš„åˆå§‹åŒ–å’Œé”€æ¯"><a href="#Bean-çš„åˆå§‹åŒ–å’Œé”€æ¯" class="headerlink" title="Bean çš„åˆå§‹åŒ–å’Œé”€æ¯"></a>Bean çš„åˆå§‹åŒ–å’Œé”€æ¯</h3><p>åœ¨Java Spring Beanä¸­ï¼Œå­˜åœ¨ç”Ÿå‘½å‘¨æœŸï¼Œå³å½“ä¸€ä¸ªbeanè¢«å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œä»–éœ€è¦æ‰§è¡Œä¸€äº›å¯ç”¨çš„çŠ¶æ€ï¼ŒåŒæ ·ï¼Œå¦‚ä¸éœ€è¦åˆ™åœ¨å®¹å™¨ä¸­ç§»é™¤ã€‚é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨**@Beanæ³¨è§£çš„initMethodã€destroyMethod**å±æ€§æ¥å¯¹Beanè¿›è¡Œåˆå§‹åŒ–å’Œé”€æ¯ï¼š</p>
<h4 id="Config-1"><a href="#Config-1" class="headerlink" title="Config"></a>Config</h4><h5 id="JavaConfig-java"><a href="#JavaConfig-java" class="headerlink" title="JavaConfig.java"></a>JavaConfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> service.MyService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaConfig</span> &#123;</span><br><span class="line"><span class="meta">@Bean(initMethod=&quot;initService&quot;,destroyMethod=&quot;destroyService&quot;)</span></span><br><span class="line"><span class="keyword">public</span> MyService <span class="title function_">getMyService</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyService</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="TesInitAndDestroy-java"><a href="#TesInitAndDestroy-java" class="headerlink" title="TesInitAndDestroy.java"></a>TesInitAndDestroy.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;initService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³• - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;destroyService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Service-1"><a href="#Service-1" class="headerlink" title="Service"></a>Service</h4><h5 id="MyService-java"><a href="#MyService-java" class="headerlink" title="MyService.java"></a>MyService.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;initService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="title function_">MyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æ„é€ æ–¹æ³• - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyService</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;destroyService - MyService&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/java/spring/5.Java Spring Aspect-Oriented Programming/">Java Spring AOP</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/java/" rel="tag">java</a> <a class="article__tag-none-link" href="/tags/spring/" rel="tag">spring</a>
			</span>
		
	</div>

	

	
		<h2 id="Spring-AOP-é¢å‘åˆ‡é¢ï¼ŒAsoect-Oriented-Programming"><a href="#Spring-AOP-é¢å‘åˆ‡é¢ï¼ŒAsoect-Oriented-Programming" class="headerlink" title="Spring AOP(é¢å‘åˆ‡é¢ï¼ŒAsoect-Oriented Programming)"></a>Spring AOP(é¢å‘åˆ‡é¢ï¼ŒAsoect-Oriented Programming)</h2><p>Spring AOPï¼ˆé¢å‘åˆ‡é¢ï¼ŒAsoect-Oriented Programmingï¼‰å³é¢å‘åˆ‡é¢å˜æˆï¼Œä¾èµ–å¹¶ä¸OOï¼ˆé¢å‘å¯¹è±¡ï¼ŒObject Orientedï¼‰å³é¢å‘å¯¹è±¡ç¼–ç¨‹ç›¸è¾…ç›¸æˆï¼Œè¿™ä¸»è¦ä½“ç°åœ¨å½“é¢å‘åˆ‡é¢è¿‡ç¨‹æ—¶ï¼Œå…ˆå¯¹ä¸šåŠ¡é€»è¾‘è¿›è¡ŒæŠ½è±¡ï¼Œè€Œè¿™ä¸ªä¸šåŠ¡é€»è¾‘æŠ½è±¡æ˜¯ç”±é¢å‘å¯¹è±¡ï¼ˆOOï¼ŒObject Orientedï¼‰ã€‚åœ¨é¢å‘åˆ‡é¢ç¼–ç¨‹ä¹‹ä¸­ï¼Œæœ€åŸºæœ¬çš„å•å…ƒæ˜¯åˆ‡é¢ï¼ˆAspectï¼‰:</p>
<h3 id="Asoect-Oriented-Programming-é¢å‘åˆ‡é¢æœ¯è¯­"><a href="#Asoect-Oriented-Programming-é¢å‘åˆ‡é¢æœ¯è¯­" class="headerlink" title="Asoect-Oriented Programming é¢å‘åˆ‡é¢æœ¯è¯­"></a>Asoect-Oriented Programming é¢å‘åˆ‡é¢æœ¯è¯­</h3><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>åˆ‡é¢ (Aspect)</td>
<td>è‡³å°è£…æ¨ªåˆ‡åˆ°ç³»ç»ŸåŠŸèƒ½ï¼ˆäº‹ç‰©å¤„ç†ï¼‰çš„ç±»;</td>
<td>1</td>
</tr>
<tr>
<td>è¿æ¥ç‚¹ (Joinpoint)</td>
<td>æŒ‡ç¨‹åºè¿è¡Œä¸­çš„ä¸€äº›æ—¶é—´ç‚¹ï¼Œå¦‚æ–¹æ³•çš„å¼‚å¸¸æˆ–æŠ›å‡º</td>
<td>2</td>
</tr>
<tr>
<td>åˆ‡å…¥ç‚¹ (Pointcut)</td>
<td>æŒ‡éœ€è¦å¤„ç†çš„è¿æ¥ç‚¹</td>
<td>3</td>
</tr>
<tr>
<td>é€šçŸ¥ (å¢å¼ºå¤„ç†)</td>
<td>ç”±åˆ‡é¢æ·»åŠ åˆ°ç‰¹å®šçš„è¿æ¥ç‚¹ï¼ˆæ»¡è¶³åˆ‡å…¥ç‚¹è§„åˆ™ï¼‰çš„ä¸€æ®µä»£ç </td>
<td>4</td>
</tr>
<tr>
<td>å¼•å…¥ (Introduction)</td>
<td>å…è®¸åœ¨ç°æœ‰çš„å®ç°ç±»ä¸­æ·»åŠ è‡ªå®šä¹‰çš„æ–¹æ³•ä»¥åŠå±æ€§</td>
<td>5</td>
</tr>
<tr>
<td>ç›®æ ‡å¯¹è±¡ (Target Object)</td>
<td>æŒ‡æ‰€æœ‰è¢«é€šçŸ¥çš„å¯¹è±¡</td>
<td>6</td>
</tr>
<tr>
<td>ä»£ç† (Proxy)</td>
<td>é€šçŸ¥åº”ç”¨åˆ°ç›®æ ‡å¯¹è±¡ä¹‹åï¼Œè¢«åŠ¨æ€åˆ›å»ºçš„å¯¹è±¡</td>
<td>7</td>
</tr>
<tr>
<td>ç»‡å…¥ (Weaving)</td>
<td>å°†åˆ‡é¢ä»£ç æ’å…¥åˆ°ç›®æ ‡å¯¹è±¡ä¸Šï¼Œä»è€Œç”Ÿæˆä»£ç†å¯¹è±¡çš„ä¸åŒ</td>
<td>8</td>
</tr>
</tbody></table>
<p>é€šä¿—ç‚¹çš„æ¥è®²å°±æ˜¯ï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>åˆ‡é¢</td>
<td>å°±æ˜¯å°†æ‰€æœ‰å…±æœ‰æˆ–é›†æˆçš„åŠŸèƒ½å®ç°ï¼Œå¦‚æˆ‘ä»¬å¯ä»¥å°†ä¸€å—ä¸€å—çš„ç»„å»ºåˆå¹¶ä¸ºä¸€ä¸ªåˆ‡é¢</td>
<td>1</td>
</tr>
<tr>
<td>é€šçŸ¥</td>
<td>ä¹Ÿå°±æ˜¯ä¸”é¢çš„å…·ä½“å®ç°ï¼Œä»¥æŒ‡å®šçš„åˆ‡å…¥ç‚¹ä½œä¸ºè§„åˆ™æ¥å¯»æ‰¾æˆ–æ·»åŠ çš„ä¸€æ®µä»£ç </td>
<td>2</td>
</tr>
<tr>
<td>è¿æ¥ç‚¹</td>
<td>ä¹Ÿå°±æ˜¯è¯´ç¨‹åºè¿è¡Œä¸­èƒ½å¤Ÿæ’å…¥åˆ‡é¢çš„è¿æ¥åœ°ç‚¹</td>
<td>3</td>
</tr>
<tr>
<td>åˆ‡å…¥ç‚¹</td>
<td>å³ç”¨äºå®šä¹‰é€šçŸ¥åº”è¯¥åˆ‡å…¥åˆ°é‚£äº›çš„é“¾æ¥ç‚¹ä¸Šï¼ˆä¸åŒçš„é€šçŸ¥ç”¨äºéœ€è¦åˆ‡å…¥ä¸åŒçš„è¿æ¥ç‚¹ä¸Šï¼‰</td>
<td>4</td>
</tr>
<tr>
<td>ç›®æ ‡å¯¹è±¡</td>
<td>ä¹Ÿå°±æ˜¯ä¹¦æ‰€æœ‰è¢«é€šçŸ¥çš„å¯¹è±¡ï¼Œéƒ½æ˜¯ç›®æ ‡å¯¹è±¡</td>
<td>5</td>
</tr>
<tr>
<td>ä»£ç†å¯¹è±¡</td>
<td>å½“é€šçŸ¥åˆ°ç›®æ ‡å¯¹è±¡ä¹‹åï¼Œå°±ä¼šè¢«å˜æˆä¸€ä¸ªåŠ¨æ€çš„å¯¹è±¡ <strong>ä»£ç†å¯¹è±¡çš„åŠŸèƒ½ç­‰äºç›®æ ‡å¯¹è±¡çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åŠŸèƒ½+å…±æœ‰å¯¹è±¡åŠŸèƒ½</strong>æ˜¯ç¨‹åºè¿è¡Œä¸­çš„äº§ç‰©</td>
<td>6</td>
</tr>
<tr>
<td>ç»‡å…¥</td>
<td>å°†åˆ‡é¢ä»£ç æ’å…¥åˆ°ç›®æ ‡çš„å¯¹è±¡ä¸Šï¼Œç”Ÿæˆä»£ç†å¯¹è±¡çš„ä¸åŒ</td>
<td>7</td>
</tr>
</tbody></table>
<h4 id="åˆ‡é¢ï¼ˆAspectï¼‰"><a href="#åˆ‡é¢ï¼ˆAspectï¼‰" class="headerlink" title="åˆ‡é¢ï¼ˆAspectï¼‰"></a>åˆ‡é¢ï¼ˆAspectï¼‰</h4><p>é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡åˆ‡é¢Aspectåˆ†åˆ«åœ¨ï¼Œåœ¨ä¸šåŠ¡ç±»1å’Œä¸šåŠ¡2ä¸­å¯ä»¥çœ‹å‡ºï¼Œåˆ†åˆ«åŠ å…¥äº†<code>æ—¥å¿—è®°å½•ã€æ€§èƒ½ç»Ÿè®¡ã€å®‰å…¨æ§åˆ¶ã€äº‹ç‰©å¤„ç†</code>ç­‰æ“ä½œã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªç±»ä¸­ï¼ŒåŠ å…¥äº†æ—¥å¿—è®°å½•ã€æ€§èƒ½ç»Ÿè®¡ã€å®‰å…¨æ§åˆ¶ã€äº‹ç‰©å¤„ç†ç­‰åŠŸèƒ½æˆ–æ„é€ æ–¹æ³•ã€‚</p>
<h4 id="åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰"><a href="#åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰" class="headerlink" title="åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰"></a>åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰</h4><p>åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰æ˜¯æŒ‡éœ€è¦å¤„ç†çš„è¿æ¥ç‚¹ï¼Œåœ¨Spring AOPé¢å‘åˆ‡é¢ç¼–ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„æ–¹æ³•æ‰§è¡Œéƒ½æ˜¯è¿æ¥ç‚¹ï¼Œè€Œåˆ‡å…¥ç‚¹æ˜¯ä¸€ä¸ªæè¿°ä¿¡æ¯ï¼Œä¿®é¥°çš„æ˜¯é“¾æ¥ç‚¹ï¼Œå¯é€šè¿‡åˆ‡å…¥ç‚¹æ¥é“¾æ¥éœ€è¦è¢«å¤„ç†ï¼Œè€Œåˆ‡é¢ã€è¿æ¥ç‚¹ã€åˆ‡å…¥ç‚¹çš„å…³ç³»å¦‚ä¸‹;<br>è€Œè¿æ¥ç‚¹å³ç¨‹åºè¿è¡Œä¸­çš„è°ƒç”¨æˆ–å¼‚å¸¸æŠ›å‡ºï¼Œä½†åˆ‡å…¥ç‚¹ä¸»è¦å¤„ç†éœ€è¦å¤„ç†çš„è¿æ¥ç‚¹ï¼ˆåœ¨Spring é¢å‘åˆ‡é¢ä¸­ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯è¿æ¥ç‚¹ï¼‰ï¼Œè€Œåˆ‡é¢æŒ‡çš„å°±æ˜¯äº‹ç‰©å¤„ç†çš„ç±»ã€‚</p>
<h3 id="AspectJ-åŸºäºæ³¨è§£å¼€å‘"><a href="#AspectJ-åŸºäºæ³¨è§£å¼€å‘" class="headerlink" title="AspectJ åŸºäºæ³¨è§£å¼€å‘"></a>AspectJ åŸºäºæ³¨è§£å¼€å‘</h3><p>AspectJæ˜¯ä¸€ä¸ªé¢å‘åˆ‡é¢AOPçš„ä¸€ä¸ªæ¡†æ¶ï¼Œæ‰©å±•äº†Javaè¯­è¨€å’Œå®šä¹‰äº†AOPè¯­æ³•ï¼ŒåŸºäºæ³¨è§£çš„å¼€å‘AsoectJä¼šæ¯”å’ŒXMLé…ç½®å¼€å‘Aspectä¾¿æ·è®¸å¤šæ²¡è€ŒSpringä¸­é€šçŸ¥çš„ç›®æ ‡æ–¹æ³•çš„è¿æ¥ç‚¹ä½ç½®ä¸»è¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å…­ç§ç±»å‹ï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>ç¯ç»•é€šçŸ¥</td>
<td>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å’Œæ‰§è¡Œåçš„å®æ–½å¢å¼º</td>
<td>1</td>
</tr>
<tr>
<td>å‰ç½®é€šçŸ¥</td>
<td>åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰å®æ–½çš„å¢å¼º</td>
<td>2</td>
</tr>
<tr>
<td>åç½®è¿”å›é€šçŸ¥</td>
<td>åœ¨ç›®æ ‡æ–¹æ³•æˆå¤Ÿæ‰§è¡Œåå®æ–½å¢å¼º</td>
<td>3</td>
</tr>
<tr>
<td>æœ€ç»ˆé€šçŸ¥å³åç½®é€šçŸ¥</td>
<td>ç›®æ ‡æ–¹æ³•æ‰§è¡Œåè¿›è¡Œå¢å¼ºï¼Œä¸åç½®è¿”å›é€šçŸ¥ä¸åŒçš„ä¸ç®¡å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½è¦æ‰§è¡Œè¯¥é€šçŸ¥</td>
<td>4</td>
</tr>
<tr>
<td>å¼‚å¸¸é€šçŸ¥</td>
<td>åœ¨æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åå®æ–½å¢åŠ </td>
<td>5</td>
</tr>
<tr>
<td>å¼•å…¥é€šçŸ¥</td>
<td>åœ¨ç›®æ ‡ç±»ä¸­æ·»åŠ ä¸€äº›æ–°çš„æ–¹æ³•å’Œå±æ€§ï¼Œç”¨äºä¿®æ”¹ç›®æ ‡ç±»</td>
<td>6</td>
</tr>
</tbody></table>
<h4 id="AspectJ-æ³¨è§£"><a href="#AspectJ-æ³¨è§£" class="headerlink" title="AspectJ æ³¨è§£"></a>AspectJ æ³¨è§£</h4><table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>@Aspect</td>
<td>å£°æ˜ä¸€ä¸ªåˆ‡é¢</td>
<td>1</td>
</tr>
<tr>
<td>@Pointcut</td>
<td>ç”¨äºå®šä¹‰åˆ‡å…¥ç‚¹ï¼Œä½¿ç”¨éœ€è¦å®šä¹‰ä¸€ä¸ªåˆ‡å…¥ç‚¹çš„Viodæ–¹æ³•ï¼Œä¸”æ–¹æ³•ä½“ä¸ºç©ºçš„æ™®é€šæ–¹æ³•</td>
<td>2</td>
</tr>
<tr>
<td>@Before</td>
<td>å®šä¹‰å‰ç½®é€šçŸ¥ï¼Œé€šå¸¸ä¸ºå…¶æŒ‡å®švalueå±æ€§å€¼</td>
<td>3</td>
</tr>
<tr>
<td>@AfterReturning</td>
<td>å®šä¹‰åç½®è¿”å›é€šçŸ¥ï¼Œä½¿ç”¨æ—¶ä¸ºå…¶æŒ‡å®švalueå±æ€§å€¼</td>
<td>4</td>
</tr>
<tr>
<td>@Around</td>
<td>ç”¨äºå®šä¹‰ä¸€ä¸ªç¯ç»•é€šçŸ¥ï¼Œåœ¨ä½¿ç”¨æ˜¯ä¹Ÿé€šå¸¸ä¸ºå…¶åˆ¶å®šä¸ºvalueå±æ€§å€¼ 5</td>
<td></td>
</tr>
<tr>
<td>@AfterThrowing</td>
<td>å®šä¹‰ä¸€ä¸ªå¼‚å¸¸é€šçŸ¥ï¼Œä½¿ç”¨æ˜¯é€šå¸¸ä¸ºå…¶æŒ‡å®švalueå±æ€§å€¼</td>
<td>6</td>
</tr>
<tr>
<td>@After</td>
<td>ç”¨äºå®šä¹‰åç½®å³æœ€ç»ˆé€šçŸ¥ï¼Œä½¿ç”¨æ—¶é€šå¸¸ä½¿ç”¨valueå±æ€§å€¼</td>
<td>7</td>
</tr>
</tbody></table>
<h4 id="å‰ææ¡ä»¶"><a href="#å‰ææ¡ä»¶" class="headerlink" title="å‰ææ¡ä»¶"></a>å‰ææ¡ä»¶</h4><p>åœ¨å¼€å‘é¡¹ç›®ä¹‹å‰ï¼Œéœ€è¦ä½¿ç”¨å…­ä¸ªSpringæ ¸å¿ƒçš„ä¾èµ–åŒ…ï¼Œåˆ†åˆ«ä¸º<strong>aopã€aspectsã€beansã€contextã€coreã€expression</strong>ï¼Œä¹‹åè¿˜éœ€è¦<strong>commons-loggingï¼Œä¸‹è½½åœ°å€ä¸ºï¼šâ€œ<a target="_blank" rel="noopener" href="https://downloads.apache.org//commons/logging/binaries/commons-logging-1.2-bin.zip%E2%80%9D">https://downloads.apache.org//commons/logging/binaries/commons-logging-1.2-bin.zipâ€</a></strong>ï¼Œç„¶åè¿˜éœ€è¦ä¸€ä¸ªå¤–éƒ¨ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ä¸º<strong>aspectjweaver.jarï¼Œä¸‹è½½åœ°å€ä¸ºï¼šâ€œ<a target="_blank" rel="noopener" href="https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jar%E2%80%9D">https://repo1.maven.org/maven2/org/aspectj/aspectjweaver/1.9.2/aspectjweaver-1.9.2.jarâ€</a></strong></p>
<h4 id="åˆ›å»ºå®ç°ç±»çš„æ¥å£-aspectj-dao"><a href="#åˆ›å»ºå®ç°ç±»çš„æ¥å£-aspectj-dao" class="headerlink" title="åˆ›å»ºå®ç°ç±»çš„æ¥å£ aspectj.dao"></a>åˆ›å»ºå®ç°ç±»çš„æ¥å£ aspectj.dao</h4><h5 id="TestDao-java"><a href="#TestDao-java" class="headerlink" title="TestDao.java"></a>TestDao.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span>;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="TestDaoImpl-java"><a href="#TestDaoImpl-java" class="headerlink" title="TestDaoImpl.java"></a>TestDaoImpl.java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository(&quot;testDao&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">TestDao</span> &#123;</span><br><span class="line">	<span class="comment">// @Override  ç”¨äºæ–¹æ³•é‡å†™</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;save - TestDaoImpl&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">modify</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;modify - TestDaoImpl&quot;</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">&quot;delete - TestDaoImpl&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ›å»ºåˆ‡é¢ç±»-aspectj-annotaition"><a href="#åˆ›å»ºåˆ‡é¢ç±»-aspectj-annotaition" class="headerlink" title="åˆ›å»ºåˆ‡é¢ç±» aspectj.annotaition"></a>åˆ›å»ºåˆ‡é¢ç±» aspectj.annotaition</h4><h5 id="MyAspect-java"><a href="#MyAspect-java" class="headerlink" title="MyAspect.java"></a>MyAspect.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspectj.annotaition;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.After;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterReturning;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span> 			<span class="comment">// å£°æ˜åˆ‡é¢</span></span><br><span class="line"><span class="meta">@Component</span>		<span class="comment">// è®©æ­¤ä¸”é¢æˆä¸ºSpringå®¹å™¨ç®¡ç†çš„Bean</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * Pointcut å®šä¹‰äº†åˆ‡å…¥ç‚¹</span></span><br><span class="line"><span class="comment">	 * è€Œ&quot;execution(* aspectj.dao.*.*(..))&quot;å®šä¹‰äº†åˆ‡å…¥ç‚¹è¡¨è¾¾å¼;</span></span><br><span class="line"><span class="comment">	 * è€Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„æ„æ€å¤§æ¦‚æ˜¯åŒ¹é… â€œaspectj.daoâ€œåŒ…ä¸­ä»»æ„ç±»çš„æ–¹æ³•æ‰§è¡Œ;</span></span><br><span class="line"><span class="comment">	 * è€Œexecution()æ˜¯è¡¨è¾¾å¼çš„ä¸»ä½“;</span></span><br><span class="line"><span class="comment">	 * â€*â€œè¡¨ç¤ºæ‰€æœ‰è¿”å›ç±»å‹ï¼Œè€Œä½¿ç”¨â€*â€œå¯ä»£è¡¨æ‰€æœ‰ç±»å‹;</span></span><br><span class="line"><span class="comment">	 * å…¶ä¸­&quot;aspectj.dao&quot;è¡¨ç¤ºçš„æ˜¯éœ€è¦åŒ¹é…çš„åŒ…åï¼Œç¬¬äºŒä¸ª&quot;*&quot;æ˜¯ç±»å‹ï¼Œä»£è¡¨æ‰€æœ‰åŒ¹é…çš„ç±»</span></span><br><span class="line"><span class="comment">	 * ç¬¬ä¸‰ä¸ªâ€*â€œè¡¨ç¤ºæ–¹æ³•åï¼Œä½¿ç”¨ä»–è¡¨ç¤ºæ‰€æœ‰æ–¹æ³•;</span></span><br><span class="line"><span class="comment">	 * &quot;(...)&quot;æ˜¯æ–¹æ³•å‚æ•°ï¼Œå…¶ä¸­â€...â€œè¡¨ç¤ºä»»æ„å‚æ•°</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Pointcut(&quot;execution(* aspectj.dao.*.*(..))&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">myPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Before(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinpoint)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å‰ç½®é€šçŸ¥&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;ç›®æ ‡ç±»å¯¹è±¡:&quot;</span> + joinpoint.getTarget()</span><br><span class="line">		+ <span class="string">&quot;è¢«å¢å¼ºå¤„ç†çš„æ–¹æ³•:&quot;</span> + joinpoint.getSignature().getName());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// åç½®è¿”å›é€šçŸ¥</span></span><br><span class="line">	<span class="meta">@AfterReturning(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturing</span><span class="params">(JoinPoint joinpoint)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;åç½®è¿”å›é€šçŸ¥:&quot;</span> + <span class="string">&quot;æ¨¡æ‹Ÿåˆ é™¤ä¸´æ—¶æ–‡ä»¶&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;è¢«å¢å¼ºå¤„ç†çš„æ–¹æ³•&quot;</span> + joinpoint.getSignature().getName());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// ç¯ç»•é€šçŸ¥</span></span><br><span class="line">	<span class="meta">@Around(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint procedingjoinpoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		<span class="comment">// run</span></span><br><span class="line">		System.out.println(<span class="string">&quot;ç¯ç»•å¼€å§‹ï¼Œæ‰§è¡Œç›®æ ‡æ–¹æ³•å‰æ¨¡æ‹Ÿå¼€å¯äº‹ç‰©&quot;</span>);</span><br><span class="line">		<span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> procedingjoinpoint.proceed();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// end</span></span><br><span class="line">		System.out.println(<span class="string">&quot;ç¯ç»•ç»“æŸï¼Œæ‰§è¡Œç›®æ ‡æ–¹æ³•åæ¨¡æ‹Ÿå…³é—­äº‹ç‰©&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> object;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// å¼‚å¸¸é€šçŸ¥</span></span><br><span class="line">	<span class="meta">@AfterThrowing(value=&quot;myPointCut()&quot;,throwing=&quot;e&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">except</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;å¼‚å¸¸é€šçŸ¥&quot;</span> + <span class="string">&quot;ç¨‹åºæ‰§è¡Œå¼‚å¸¸&quot;</span> + e.getMessage());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// æœ€ç»ˆé€šçŸ¥</span></span><br><span class="line">	<span class="meta">@After(&quot;myPointCut()&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;æœ€ç»ˆé€šçŸ¥ï¼Œæ¨¡æ‹Ÿé‡Šæ”¾&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®ç±»-aspectj-config"><a href="#é…ç½®ç±»-aspectj-config" class="headerlink" title="é…ç½®ç±» aspectj.config"></a>é…ç½®ç±» aspectj.config</h4><h5 id="AOPTest-java"><a href="#AOPTest-java" class="headerlink" title="AOPTest.java"></a>AOPTest.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspecti.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> aspectj.dao.TestDao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AOPTest</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String args[])</span> &#123;</span><br><span class="line">		<span class="comment">// åˆå§‹åŒ–AnnotationConfigApplicationContext</span></span><br><span class="line">		<span class="type">AnnotationConfigApplicationContext</span> <span class="variable">application</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(AspectjAOPConfig.class);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">// ä»å®¹å™¨ä¸­è·å–å¢å¼ºåçš„ç›®æ ‡å¯¹è±¡</span></span><br><span class="line">		<span class="type">TestDao</span> <span class="variable">testDaoAdvice</span> <span class="operator">=</span> application.getBean(TestDao.class);</span><br><span class="line">		<span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">		testDaoAdvice.save();</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">		testDaoAdvice.modify();</span><br><span class="line">		System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">		testDaoAdvice.delete();</span><br><span class="line">		<span class="comment">// å…³é—­</span></span><br><span class="line">		application.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="AspectjAOPconfig-java"><a href="#AspectjAOPconfig-java" class="headerlink" title="AspectjAOPconfig.java"></a>AspectjAOPconfig.java</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> aspecti.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.EnableAspectJAutoProxy;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span>					<span class="comment">// å£°æ˜ä¸€ä¸ªé…ç½®ç±»</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;aspectj&quot;)</span>		<span class="comment">// è‡ªåŠ¨æ‰«ææŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span>		<span class="comment">// å¼€å¯Springå¯¹Aspectjçš„æ”¯æŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AspectjAOPConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
	

	

</article>





	<span class="different-posts">ğŸ“– <a href="/page/17">more posts</a> ğŸ“–</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„ blog <br><br> é€šè¿‡ <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> è¿›è¡Œæ„å»ºçš„ï¼Œå­˜æ”¾åœ¨ <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> ä¸Šã€‚</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
