<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>琼瑶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="琼瑶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">琼瑶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">梦入琼楼寒有月，行过石树冻无烟</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">📖 <a href="/page/21">earlier posts</a> 📖</span>




	<article>
	
		<h1><a href="/2022/04/21/blockchain/web3.0/python/3.Web3.0 swap query/">Web3.0 Swap query</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/blockchain/" rel="tag">blockchain</a> <a class="article__tag-none-link" href="/tags/python/" rel="tag">python</a> <a class="article__tag-none-link" href="/tags/web3-0/" rel="tag">web3.0</a>
			</span>
		
	</div>

	

	
		<p>在上述的过程中我们了解到了各类型的方式，本文的作用主要是通过 BSC 链中的 Swap 方法来获取交易数据，并通过 Swap 方法所获取的交易 hash 来进行过滤。</p>
<p>在此之前，我们主要用到两个文件，一个是 <code>helpers.py</code> 来作为基础类，而另一个则为是 <code>event_list.py</code> 作为一个执行类，因为在大型项目中我们需要遵循项目的规范，因此我们会使用 <code>class</code> 来定义不同的类以及通过 <code>def</code> 定义方法。</p>
<p>我们需要做的是，<code>helpers.py</code> 中定义了一系列的基础类，先于 BSC 建立连接，同时定义 Redis 的连接方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json  </span><br><span class="line"><span class="keyword">import</span> time  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> redis  </span><br><span class="line"><span class="keyword">from</span> web3 <span class="keyword">import</span> Web3  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RedisConnectionPoolSingleton</span>(<span class="title class_ inherited__">object</span>):  </span><br><span class="line">    _instance = <span class="literal">None</span>  </span><br><span class="line">  </span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">__new__</span>(<span class="params">cls, *args, **kwargs</span>):  </span><br><span class="line">        <span class="keyword">if</span> cls._instance <span class="keyword">is</span> <span class="literal">None</span>:  </span><br><span class="line">            cls._instance = redis.ConnectionPool(max_connections=<span class="number">1000</span>, host=<span class="string">&#x27;127.0.0.1&#x27;</span>, port=<span class="number">6379</span>, db=<span class="number">1</span>)  </span><br><span class="line">        <span class="keyword">return</span> cls._instance  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">web</span>:  </span><br><span class="line">    <span class="comment"># 连接 Redis @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">redis_client</span>():  </span><br><span class="line">        <span class="keyword">return</span> redis.Redis(connection_pool=RedisConnectionPoolSingleton())  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 保存数据  </span></span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">save_task_result</span>(<span class="params">param, task_key</span>):  </span><br><span class="line">        redis_con = redis.Redis(connection_pool=RedisConnectionPoolSingleton())  </span><br><span class="line">        redis_con.rpush(task_key, json.dumps(param))  </span><br><span class="line">        redis_con.close()  </span><br><span class="line">  </span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_web</span>():  </span><br><span class="line">        bsc = <span class="string">&quot;https://bsc-dataseed.binance.org/&quot;</span>  </span><br><span class="line"> <span class="keyword">return</span> Web3(Web3.HTTPProvider(bsc))  </span><br><span class="line">  </span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_wbnb</span>():  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c&#x27;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_busb</span>():  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56&#x27;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_callback_key</span>():  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;laravel_database_task:callback&#x27;</span>  </span><br><span class="line">  </span><br><span class="line"> <span class="comment">#https://www.bscscan.com/tx/0xbbff0b938a1265265d36eddc2fc9274eadced1e19f43084211790b79ec7a36d8#eventlog  </span></span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_swap</span>():  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822&#x27;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_tran</span>():  </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#x27;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_unique_md5</span>(<span class="params">unique</span>):  </span><br><span class="line">        <span class="keyword">import</span> hashlib  </span><br><span class="line">        <span class="keyword">return</span> hashlib.md5(unique.encode(encoding=<span class="string">&#x27;UTF-8&#x27;</span>)).hexdigest()  </span><br><span class="line">  </span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">set_task_implement_status</span>(<span class="params">unique</span>):  </span><br><span class="line">        key = <span class="string">&#x27;tesk:implement&#x27;</span>  </span><br><span class="line"> unique = web.get_unique_md5(unique)  </span><br><span class="line">        redis_client = web.redis_client()  </span><br><span class="line">        <span class="keyword">if</span> redis_client.sismember(key,unique):  </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span>  </span><br><span class="line"> redis_client.sadd(key,unique)  </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span>  </span><br><span class="line">  </span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">analyse_receipt</span>(<span class="params">txhash</span>):  </span><br><span class="line">        <span class="keyword">global</span> returnjson  </span><br><span class="line">        web3 = web.get_web()  </span><br><span class="line">        receipt = web3.eth.getTransactionReceipt(txhash)  </span><br><span class="line">        logs = receipt[<span class="string">&#x27;logs&#x27;</span>]  </span><br><span class="line">        returnJson = &#123;&#125;  </span><br><span class="line">        common = &#123;&#125;  </span><br><span class="line">        common[<span class="string">&#x27;0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c&#x27;</span>] = <span class="string">&#x27;BNB&#x27;</span>  </span><br><span class="line"> common[<span class="string">&#x27;0xe9e7cea3dedca5984780bafc599bd69add087d56&#x27;</span>] = <span class="string">&#x27;BUSD&#x27;</span>  </span><br><span class="line"> temAddress = <span class="string">&#x27;&#x27;</span>  </span><br><span class="line"> <span class="keyword">for</span> log <span class="keyword">in</span> logs:  </span><br><span class="line">            <span class="keyword">if</span> log[<span class="string">&#x27;topics&#x27;</span>][<span class="number">0</span>].<span class="built_in">hex</span>() == <span class="string">&#x27;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#x27;</span>:  </span><br><span class="line">                <span class="keyword">if</span> temAddress != <span class="literal">None</span> <span class="keyword">and</span> temAddress != log[<span class="string">&#x27;address&#x27;</span>]:  </span><br><span class="line">                    returnJson[<span class="string">&#x27;isSwap&#x27;</span>] = <span class="number">1</span>  </span><br><span class="line">  </span><br><span class="line"> temAddress = log[<span class="string">&#x27;address&#x27;</span>]  </span><br><span class="line">                    kk = common.get(log[<span class="string">&#x27;address&#x27;</span>])  </span><br><span class="line">                    <span class="keyword">if</span> kk == <span class="literal">None</span>:  </span><br><span class="line">                        token = log[<span class="string">&#x27;address&#x27;</span>]  </span><br><span class="line">                        returnJson[<span class="string">&#x27;token&#x27;</span>] = token  </span><br><span class="line">                    <span class="keyword">else</span>:  </span><br><span class="line">                        pairToken = log[<span class="string">&#x27;address&#x27;</span>]  </span><br><span class="line">                        returnJson[<span class="string">&#x27;pairToken&#x27;</span>] = pairToken  </span><br><span class="line">                    <span class="keyword">return</span> returnJson  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># https://www.bscscan.com/token/  </span></span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_all_detail</span>(<span class="params">web3, token</span>):  </span><br><span class="line">        token = web3.toChecksumAddress(token)  </span><br><span class="line">        contract_abi = <span class="string">&#x27;[&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;_owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Approval&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;delegator&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;fromDelegate&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;toDelegate&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;DelegateChanged&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;delegate&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;previousBalance&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;newBalance&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;DelegateVotesChanged&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;previousOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;newOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;OwnershipTransferred&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;from&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Transfer&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;DELEGATION_TYPEHASH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;DOMAIN_TYPEHASH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;allowance&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;approve&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;account&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;balanceOf&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint32&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint32&quot;&#125;],&quot;name&quot;:&quot;checkpoints&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint32&quot;,&quot;name&quot;:&quot;fromBlock&quot;,&quot;type&quot;:&quot;uint32&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;votes&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;decimals&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;subtractedValue&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;decreaseAllowance&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;delegatee&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;delegate&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;delegatee&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;nonce&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;expiry&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;v&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;r&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;s&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;name&quot;:&quot;delegateBySig&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;account&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;getCurrentVotes&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;account&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;blockNumber&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;getPriorVotes&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;addedValue&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;increaseAllowance&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;name&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;string&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;nonces&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;numCheckpoints&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint32&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint32&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;owner&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;renounceOwnership&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;symbol&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;string&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;totalSupply&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;recipient&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transfer&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;sender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;recipient&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transferFrom&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;newOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;transferOwnership&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;]&#x27;</span>  </span><br><span class="line">  </span><br><span class="line"> <span class="comment"># &lt;web3._utils.datatypes.Contract object at 0x0000024E7CC6C358&gt;  </span></span><br><span class="line"> token_contract = web3.eth.contract(address=token, abi=contract_abi)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_contract:&#x27;</span>, token_contract)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 获取 token 小数 &gt; 18 token_decimals = token_contract.functions.decimals().call()  </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_decimals:&#x27;</span>, token_decimals)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 获取合约中所存储的 token 数量 &gt; 18000000.0 token_total_supply = token_contract.functions.totalSupply().call() / (10 ** token_decimals)  </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_total_supply:&#x27;</span>, token_total_supply)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 获取 token 的符号 &gt; XMETA token_symbol = token_contract.functions.symbol().call()  </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_symbol:&#x27;</span>, token_symbol)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 获取 token 的名称 &gt; token_name = token_contract.functions.name().call()  </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_name:&#x27;</span>,token_name)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 获取 token 的价格  </span></span><br><span class="line"> burn_balance = web.get_token_balance(token_contract, <span class="string">&#x27;0x000000000000000000000000000000000000dEaD&#x27;</span>)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;burn_balance:&#x27;</span>,burn_balance)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 流动池数据获取  </span></span><br><span class="line"> price = web.getPoolDetail(token)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;price:&#x27;</span>,price)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 发行 token 的数量 - 转发到黑洞中的数量  </span></span><br><span class="line"> total_liquidity = token_total_supply - burn_balance  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;total_liquidity:&#x27;</span>, total_liquidity)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 获取连接池信息  </span></span><br><span class="line"> total_balance = <span class="built_in">round</span>(total_liquidity * price.get(<span class="string">&#x27;price&#x27;</span>, <span class="number">1</span>))  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;total_balance:&#x27;</span>, total_balance)  </span><br><span class="line">        return_str = &#123;  </span><br><span class="line">            <span class="string">&#x27;token&#x27;</span>: token,  </span><br><span class="line">  </span><br><span class="line">            <span class="comment"># token 位数  </span></span><br><span class="line"> <span class="string">&#x27;token_decimals&#x27;</span>: token_decimals,  </span><br><span class="line">            <span class="comment"># token 总数  </span></span><br><span class="line"> <span class="string">&#x27;token_total_supply&#x27;</span>: <span class="built_in">str</span>(token_total_supply),  </span><br><span class="line">            <span class="comment"># token 符号  </span></span><br><span class="line"> <span class="string">&#x27;token_symbol&#x27;</span>: token_symbol,  </span><br><span class="line">            <span class="comment"># token 名称  </span></span><br><span class="line"> <span class="string">&#x27;token_name&#x27;</span>: token_name,  </span><br><span class="line">            <span class="comment"># 黑洞地址所持有的金额  </span></span><br><span class="line"> <span class="string">&#x27;burn_balance&#x27;</span>: burn_balance,  </span><br><span class="line">            <span class="comment"># token 的总余额  </span></span><br><span class="line"> <span class="string">&#x27;total_balance&#x27;</span>: <span class="built_in">str</span>(total_balance),  </span><br><span class="line">            <span class="comment"># 价格  </span></span><br><span class="line"> <span class="string">&#x27;price&#x27;</span>: <span class="string">&#x27;&#123;:.16f&#125;&#x27;</span>.<span class="built_in">format</span>(price[<span class="string">&#x27;price&#x27;</span>]),  </span><br><span class="line">            <span class="comment"># 当前的价格  </span></span><br><span class="line"> <span class="string">&#x27;coin&#x27;</span>: price[<span class="string">&#x27;coin&#x27;</span>],      <span class="comment">#池子类型  </span></span><br><span class="line"> <span class="comment"># 连接池地址  </span></span><br><span class="line"> <span class="string">&#x27;pair_address&#x27;</span>: price[<span class="string">&#x27;pairAddress&#x27;</span>],   <span class="comment"># 池子地址  </span></span><br><span class="line"> <span class="comment"># 池子(BNB,BUSD)金额  </span></span><br><span class="line"> <span class="string">&#x27;pair_balance&#x27;</span>: price[<span class="string">&#x27;pairBalance&#x27;</span>],  </span><br><span class="line">            <span class="comment"># 池子 token 数量  </span></span><br><span class="line"> <span class="string">&#x27;pair_token_balance&#x27;</span>: price[<span class="string">&#x27;pairTokenBalance&#x27;</span>],  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="comment"># 价格，总供应量，名称，token，流动池地址，流动池大小，市值，黑洞持有量  </span></span><br><span class="line"> <span class="built_in">print</span>(<span class="string">&#x27;return_str:&#x27;</span>, return_str)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;》》》——————————————————————————————————————————————————————————————————————————————————————————&#x27;</span>)  </span><br><span class="line">        <span class="keyword">return</span> return_str  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 获取 token 价格  </span></span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">get_token_balance</span>(<span class="params">token_contract, address</span>):  </span><br><span class="line">        <span class="comment"># 通过 ERC20 decimals 使得可以发送小数 &gt; token_decimals = token_contract.functions.decimals().call()  </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_decimals:&#x27;</span>, token_decimals)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># 返回账户所有者中的所有 NFC 数量 &gt; token_balance = token_contract.functions.balanceOf(address).call()  </span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;token_balance:&#x27;</span>,token_balance)  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">round</span>(token_balance / (<span class="number">10</span> ** token_decimals), <span class="number">16</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># WBNB 与 BUSD @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">wbnbtoBusd</span>(<span class="params">amount</span>):  </span><br><span class="line">        web3 = web.get_web()  </span><br><span class="line">        busd = web.get_busb()  </span><br><span class="line">        wbnb = web.get_wbnb()  </span><br><span class="line">        panRouterContractAddress = <span class="string">&#x27;0x10ED43C718714eb63d5aA57B78B54704E256024E&#x27;</span>  </span><br><span class="line"> panabi = <span class="string">&#x27;[&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;_factory&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;_WETH&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;WETH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenA&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenB&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountADesired&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountBDesired&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountAMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountBMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;addLiquidity&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountA&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountB&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountTokenDesired&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountTokenMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETHMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;addLiquidityETH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountToken&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETH&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;name&quot;:&quot;factory&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;reserveIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;reserveOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;getAmountIn&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;pure&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;reserveIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;reserveOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;getAmountOut&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;pure&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;],&quot;name&quot;:&quot;getAmountsIn&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;],&quot;name&quot;:&quot;getAmountsOut&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountA&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;reserveA&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;reserveB&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;quote&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountB&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;pure&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenA&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenB&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountAMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountBMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;removeLiquidity&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountA&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountB&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountTokenMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETHMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;removeLiquidityETH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountToken&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETH&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountTokenMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETHMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;removeLiquidityETHSupportingFeeOnTransferTokens&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETH&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountTokenMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETHMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;approveMax&quot;,&quot;type&quot;:&quot;bool&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;v&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;r&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;s&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;name&quot;:&quot;removeLiquidityETHWithPermit&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountToken&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETH&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountTokenMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETHMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;approveMax&quot;,&quot;type&quot;:&quot;bool&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;v&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;r&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;s&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;name&quot;:&quot;removeLiquidityETHWithPermitSupportingFeeOnTransferTokens&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountETH&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenA&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenB&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;liquidity&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountAMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountBMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;approveMax&quot;,&quot;type&quot;:&quot;bool&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;v&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;r&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;,&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;s&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;name&quot;:&quot;removeLiquidityWithPermit&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountA&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountB&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapETHForExactTokens&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOutMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapExactETHForTokens&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOutMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapExactETHForTokensSupportingFeeOnTransferTokens&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOutMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapExactTokensForETH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOutMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapExactTokensForETHSupportingFeeOnTransferTokens&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOutMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapExactTokensForTokens&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountIn&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOutMin&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapExactTokensForTokensSupportingFeeOnTransferTokens&quot;,&quot;outputs&quot;:[],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountInMax&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapTokensForExactETH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountOut&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amountInMax&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address[]&quot;,&quot;name&quot;:&quot;path&quot;,&quot;type&quot;:&quot;address[]&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;deadline&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;swapTokensForExactTokens&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256[]&quot;,&quot;name&quot;:&quot;amounts&quot;,&quot;type&quot;:&quot;uint256[]&quot;&#125;],&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;receive&quot;&#125;]&#x27;</span>  </span><br><span class="line"> contract = web3.eth.contract(address=panRouterContractAddress, abi=panabi)  </span><br><span class="line">        amount = web3.toWei(amount, <span class="string">&#x27;ether&#x27;</span>)  </span><br><span class="line">        price = contract.functions.getAmountsOut(amount, [wbnb, busd]).call()  </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">round</span>(price[<span class="number">1</span>] / (<span class="number">10</span> ** <span class="number">18</span>), <span class="number">16</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># 获取流动池详情  </span></span><br><span class="line"><span class="meta"> @staticmethod  </span></span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">getPoolDetail</span>(<span class="params">token</span>):  </span><br><span class="line">        web3 = web.get_web()  </span><br><span class="line">        wbnb = web3.toChecksumAddress(<span class="string">&#x27;0xbb4cdb9cbd36b01bd1cbaebf2de08d9173bc095c&#x27;</span>)  </span><br><span class="line">        busd = web3.toChecksumAddress(<span class="string">&#x27;0xe9e7cea3dedca5984780bafc599bd69add087d56&#x27;</span>)  </span><br><span class="line">  </span><br><span class="line">        wbnbAbi = <span class="string">&#x27;[&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;name&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;guy&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;approve&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;totalSupply&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transferFrom&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;withdraw&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;decimals&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;balanceOf&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;symbol&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transfer&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;deposit&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:true,&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;allowance&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;payable&quot;:true,&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;fallback&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;guy&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Approval&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Transfer&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Deposit&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Withdrawal&quot;,&quot;type&quot;:&quot;event&quot;&#125;]&#x27;</span>  </span><br><span class="line"> wbnbContract = web3.eth.contract(address=wbnb, abi=wbnbAbi)  </span><br><span class="line">  </span><br><span class="line">        factoryAddress = web3.toChecksumAddress(<span class="string">&#x27;0xcA143Ce32Fe78f1f7019d7d551a6402fC5350c73&#x27;</span>)  </span><br><span class="line">        factoryabi = <span class="string">&#x27;[&#123;&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;_feeToSetter&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token0&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;token1&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;pair&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;PairCreated&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;INIT_CODE_PAIR_HASH&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bytes32&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bytes32&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;allPairs&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;allPairsLength&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenA&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;tokenB&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;createPair&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;pair&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;feeTo&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;feeToSetter&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;getPair&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;_feeTo&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;setFeeTo&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;_feeToSetter&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;setFeeToSetter&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;]&#x27;</span>  </span><br><span class="line"> factoryContract = web3.eth.contract(address=factoryAddress, abi=factoryabi)  </span><br><span class="line">  </span><br><span class="line">        busdAbi = <span class="string">&#x27;[&#123;&quot;inputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Approval&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;previousOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;newOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;OwnershipTransferred&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;from&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Transfer&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;_decimals&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;_name&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;string&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;_symbol&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;string&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;allowance&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;approve&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;account&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;balanceOf&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;burn&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;decimals&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint8&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;subtractedValue&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;decreaseAllowance&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;getOwner&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;addedValue&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;increaseAllowance&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;mint&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;name&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;string&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;owner&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;renounceOwnership&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;symbol&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;string&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;totalSupply&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;recipient&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transfer&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;sender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;recipient&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;internalType&quot;:&quot;uint256&quot;,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transferFrom&quot;,&quot;outputs&quot;:[&#123;&quot;internalType&quot;:&quot;bool&quot;,&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;newOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;transferOwnership&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;]&#x27;</span>  </span><br><span class="line"> busdContract = web3.eth.contract(address=busd, abi=busdAbi)  </span><br><span class="line">        token = web3.toChecksumAddress(token)  </span><br><span class="line">  </span><br><span class="line">        contractAbi = <span class="string">&#x27;[&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;mintingFinished&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;name&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;approve&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;totalSupply&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_from&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transferFrom&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;decimals&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;cap&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;unpause&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;mint&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;burn&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;paused&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_subtractedValue&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;decreaseApproval&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;success&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;balanceOf&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;balance&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;finishMinting&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;pause&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;owner&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;symbol&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;transfer&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_addedValue&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;increaseApproval&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;success&quot;,&quot;type&quot;:&quot;bool&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;name&quot;:&quot;_spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;allowance&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;constant&quot;:false,&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;newOwner&quot;,&quot;type&quot;:&quot;address&quot;&#125;],&quot;name&quot;:&quot;transferOwnership&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;burner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Burn&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;Pause&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;Unpause&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;amount&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Mint&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;MintFinished&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;owner&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Approval&quot;,&quot;type&quot;:&quot;event&quot;&#125;,&#123;&quot;anonymous&quot;:false,&quot;inputs&quot;:[&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;from&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:true,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;&#125;,&#123;&quot;indexed&quot;:false,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;&#125;],&quot;name&quot;:&quot;Transfer&quot;,&quot;type&quot;:&quot;event&quot;&#125;]&#x27;</span>  </span><br><span class="line"> tokenContract = web3.eth.contract(address=token, abi=contractAbi)  </span><br><span class="line">  </span><br><span class="line">        t = time.time()  </span><br><span class="line">        pairAddress = factoryContract.functions.getPair(wbnb, token).call()  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;pairAddress:&#x27;</span>,pairAddress)  </span><br><span class="line">  </span><br><span class="line">        busdPair = factoryContract.functions.getPair(busd, token).call()  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;busdPair:&#x27;</span>,busdPair)  </span><br><span class="line">  </span><br><span class="line">        pair_token_balance = web.get_token_balance(tokenContract, pairAddress)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;pair_token_balance:&#x27;</span>,pair_token_balance)  </span><br><span class="line">  </span><br><span class="line">        pair_balance = web.get_token_balance(wbnbContract, pairAddress)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;pair_balance:&#x27;</span>,pair_balance)  </span><br><span class="line">  </span><br><span class="line">        t = time.time()  </span><br><span class="line">        returnStr = &#123;&#125;  </span><br><span class="line">        <span class="keyword">if</span> pairAddress != <span class="string">&#x27;0x0000000000000000000000000000000000000000&#x27;</span> <span class="keyword">and</span> busdPair != <span class="string">&#x27;0x0000000000000000000000000000000000000000&#x27;</span> <span class="keyword">and</span> pair_token_balance != <span class="number">0</span> <span class="keyword">and</span> pair_balance != <span class="number">0</span>:  </span><br><span class="line">            busdpair_balance = web.get_token_balance(busdContract, busdPair)  </span><br><span class="line">            pair_balance1 = web.wbnbtoBusd(pair_balance)  </span><br><span class="line">            <span class="keyword">if</span> busdpair_balance &gt; pair_balance1:  </span><br><span class="line">                busdpair_token_balance = web.get_token_balance(tokenContract, busdPair)  </span><br><span class="line">                price = <span class="built_in">round</span>(busdpair_balance / busdpair_token_balance, <span class="number">16</span>)  </span><br><span class="line">                returnStr[<span class="string">&#x27;coin&#x27;</span>] = busd  </span><br><span class="line">                returnStr[<span class="string">&#x27;pairAddress&#x27;</span>] = busdPair  </span><br><span class="line">                returnStr[<span class="string">&#x27;pairBalance&#x27;</span>] = busdpair_balance  </span><br><span class="line">                returnStr[<span class="string">&#x27;pairTokenBalance&#x27;</span>] = busdpair_token_balance  </span><br><span class="line">                returnStr[<span class="string">&#x27;price&#x27;</span>] = price  </span><br><span class="line">            <span class="keyword">else</span>:  </span><br><span class="line">                price = <span class="built_in">round</span>(pair_balance / pair_token_balance, <span class="number">16</span>)  </span><br><span class="line">                returnStr[<span class="string">&#x27;coin&#x27;</span>] = wbnb  </span><br><span class="line">                returnStr[<span class="string">&#x27;pairAddress&#x27;</span>] = pairAddress  </span><br><span class="line">                returnStr[<span class="string">&#x27;pairBalance&#x27;</span>] = pair_balance  </span><br><span class="line">                returnStr[<span class="string">&#x27;pairTokenBalance&#x27;</span>] = pair_token_balance  </span><br><span class="line">                returnStr[<span class="string">&#x27;price&#x27;</span>] = web.wbnbtoBusd(price)  </span><br><span class="line">        <span class="keyword">elif</span> pairAddress != <span class="string">&#x27;0x0000000000000000000000000000000000000000&#x27;</span> <span class="keyword">and</span> pair_token_balance != <span class="number">0</span> <span class="keyword">and</span> pair_balance != <span class="number">0</span>:  </span><br><span class="line">            price = <span class="built_in">round</span>(pair_balance / pair_token_balance, <span class="number">16</span>)  </span><br><span class="line">            returnStr[<span class="string">&#x27;coin&#x27;</span>] = wbnb  </span><br><span class="line">            returnStr[<span class="string">&#x27;pairAddress&#x27;</span>] = pairAddress  </span><br><span class="line">            returnStr[<span class="string">&#x27;pairBalance&#x27;</span>] = pair_balance  </span><br><span class="line">            returnStr[<span class="string">&#x27;pairTokenBalance&#x27;</span>] = pair_token_balance  </span><br><span class="line">            returnStr[<span class="string">&#x27;price&#x27;</span>] = web.wbnbtoBusd(price)  </span><br><span class="line">        <span class="keyword">elif</span> busdPair != <span class="string">&#x27;0x0000000000000000000000000000000000000000&#x27;</span>:  </span><br><span class="line">            busdpair_token_balance = web.get_token_balance(tokenContract, busdPair)  </span><br><span class="line">            busdpair_balance = web.get_token_balance(busdContract, busdPair)  </span><br><span class="line">            price = <span class="built_in">round</span>(busdpair_balance / busdpair_token_balance, <span class="number">16</span>)  </span><br><span class="line">            returnStr[<span class="string">&#x27;coin&#x27;</span>] = busd  </span><br><span class="line">            returnStr[<span class="string">&#x27;pairAddress&#x27;</span>] = busdPair  </span><br><span class="line">            returnStr[<span class="string">&#x27;pairBalance&#x27;</span>] = busdpair_balance  </span><br><span class="line">            returnStr[<span class="string">&#x27;pairTokenBalance&#x27;</span>] = busdpair_token_balance  </span><br><span class="line">            returnStr[<span class="string">&#x27;price&#x27;</span>] = price  </span><br><span class="line">        <span class="keyword">return</span> returnStr</span><br></pre></td></tr></table></figure>

<p>在上述的 code 中，我们大致可分为 基础类、查询类、过滤类等三种。</p>
<h2 id="base"><a href="#base" class="headerlink" title="base"></a>base</h2><p>基础类主要是 <code>RedisConnectionPoolSingleton</code> 下的 <code>_instance_</code> 来创建的 Redis 方法，通过 <code>__new__</code> 方法来进行连接，之后返回给 <code>_instance</code> 变量。</p>
<p>同时在 <code>web</code> 方法中，通过 <code>redis_client()</code> 方法来连接 redis，同时定义一个保存数据的方法 <code>save_task_result</code> 将之后 <code>event_list.py</code> 之后所过滤掉的数据通过 <code>json.dumps</code> 的方法来进行存储。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">```json.dumps``` 使用此转换表将obj序列化为JSON格式的str。参数的含义与dump()中的相同。</span><br></pre></td></tr></table></figure>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/blockchain/web3.0/python/3.Tokens Transferred and Swap Exact/">Swap Exact</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/blockchain/" rel="tag">blockchain</a> <a class="article__tag-none-link" href="/tags/python/" rel="tag">python</a> <a class="article__tag-none-link" href="/tags/web3-0/" rel="tag">web3.0</a>
			</span>
		
	</div>

	

	
		<p>在 Etherscan 和 Bcanscan 中，作为区块链开发，主要关注的点是交易数据中的 <code>Tokens Transferred</code> 参数项来理解本次交易过程是干什么的，通常在 Bcanscan 的 <code>Input Data</code> 内，都是已经帮助我们解析完成的，在 web 3.0 中，主要通过 <strong>Contranct Factions</strong> 即 “合约工厂” 来进行创建一个合约对象。</p>
<h2 id="swapExactTokensForTokens-以Token为基准互换为-Tokens"><a href="#swapExactTokensForTokens-以Token为基准互换为-Tokens" class="headerlink" title="swapExactTokensForTokens 以Token为基准互换为 Tokens"></a>swapExactTokensForTokens 以Token为基准互换为 Tokens</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220226152222.png"><br>在 <a target="_blank" rel="noopener" href="https://www.bscscan.com/tx/0x213028d9fb2561db91a7f7775d60cba4edd155db44997feaa99372def8c1b95d">Binance Transaction Hash (Txhash) Details | BscScan</a> 这一份交易中，特别是 <code>Input Data</code> 和 <code>Tokens Transferred:</code> 栏的信息内，这一交易主要是通过 0xf… 钱包将≈154.15$的Binace-Pag(在池子中可能名字为 ESC-US) 放入到 PancakeSwap 转换池中。</p>
<p>然后池子将 ≈154.15 的 BSC-US 兑换 17.8637… FistToken 发送到 0xf87… 钱包内。可以看出这一交易主要是将 BSC-US 转换为 FIST。</p>
<p>对于这个方法我们可以通过直译的方式来进行理解，“为 Tokens 转换确切的代币”，结合 <code>Tokens Transferred</code> 中的数据再配合中文直译来进行理解。之后在 web3.0 中，主要通过 <a target="_blank" rel="noopener" href="https://web3py.readthedocs.io/en/stable/contracts.html?highlight=eth.contract#contract-factories">eth.contrace</a>  来解析合约工厂：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_router_contract</span>(<span class="params">web3</span>):</span><br><span class="line">    pan_router_contract_address = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    router_abi = [<span class="string">&#x27;&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> web3.eth.contrace(address=pan_router_contract_address, abi=router_abi)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">为了使整体项目目录和 Code 更加美观，通过 flask 框架，我们可以将上述基础类方法写在 ```Helper.py``` 内，之后我们在 ```main.py``` 启动类引用即可。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><figcaption><span>方法中包含的参数主要有六个参数，分别体现了该合约方法的主要用处：</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">| Id | Name | Info | type |</span><br><span class="line">| --- | --- | --- | --- | </span><br><span class="line">| 1 | amountin | 金额，要发送的 token 数量 | unint |</span><br><span class="line">| 2 | amountOutMin | 最小金额，为了使交易不被逆转，所必须受到的最小输出代币量 | unint |</span><br><span class="line">| 3 | path | 一个目标地址池（流动池必须存在，且拥有流动性, ```path.length &gt; 2```） | address[]calldata |</span><br><span class="line">| 4 | to | token 的接收者 | address |</span><br><span class="line">| 5 | deadline | Unix 时间戳（在此之后将会恢复） | unint |</span><br><span class="line"></span><br><span class="line">我们可以通过一个具体的项目是示例来结合官方文档以及 web3.0py 中来进行更深一步的了解：</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">pancakeswap2_txn = router_contract.functions.swapExactTokensForTokens(  </span><br><span class="line">    buy_value,  </span><br><span class="line">    slippage,  # set to 0, or specify minimum amount of tokeny you want to receive - consider decimals!!!  </span><br><span class="line"> [value_type_address, pair_type_address, tokenToBuy],  </span><br><span class="line">    sender_address,  </span><br><span class="line">    (int(time.time()) + 10000)  </span><br><span class="line">).buildTransaction(&#123;  </span><br><span class="line">    &#x27;from&#x27;: sender_address,  </span><br><span class="line">    &#x27;gas&#x27;: int(gas),  </span><br><span class="line">    &#x27;gasPrice&#x27;: web3.toWei(str(gas_price), &#x27;gwei&#x27;),  </span><br><span class="line">    &#x27;nonce&#x27;: nonce,  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>通过上述的 code 中我们可以看到基本上就是非常符合 <a target="_blank" rel="noopener" href="https://docs.uniswap.org/protocol/V2/reference/smart-contracts/router-02#swapexacttokensfortokens">swapExactTokensForTokens</a><br>所传入的参数，而之后的 <a target="_blank" rel="noopener" href="https://web3py.readthedocs.io/en/stable/contracts.html?highlight=get_router_contract#web3.contract.ContractFunction.buildTransaction">.buildTransaction</a> 方法是交易交易，指定合约调用并构建事务字典，包含了诸如 <code>from</code> 以及 <code>gas</code> 和 <code>nonce</code> 等参数。</p>
<p>但在此之前我们可以知道 <a target="_blank" rel="noopener" href="https://docs.uniswap.org/protocol/V2/reference/smart-contracts/router-02#weth">WETH</a> 是 Address 的方法组，更多的我们可以参考官方文档给出的解释。</p>
<p>之后我们在  <a target="_blank" rel="noopener" href="https://www.bscscan.com/tx/0x213028d9fb2561db91a7f7775d60cba4edd155db44997feaa99372def8c1b95d">15581850</a> 块内其中一个交易信息中，在其 <code>Interacted With(To)</code> 栏中，进入到该合约页面中，可以在其 <strong>Contract</strong> 内查看合约的具体信息以及合约的 Code 等。</p>
<p>同样的我们也可以在 <strong>Contract Source Code (Solidity)</strong> 栏中查看合约的源代码，具体的与 <a target="_blank" rel="noopener" href="https://docs.uniswap.org/protocol/V2/reference/smart-contracts/router-02#swapexacttokensfortokens">uniswap</a> 都相差无几。</p>
<h2 id="swapExactETHForTokens-以-ETH-为基准将-ETH-互换为-Tokens"><a href="#swapExactETHForTokens-以-ETH-为基准将-ETH-互换为-Tokens" class="headerlink" title="swapExactETHForTokens 以 ETH 为基准将 ETH 互换为 Tokens"></a>swapExactETHForTokens 以 ETH 为基准将 ETH 互换为 Tokens</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220226180013.png"></p>
<p>通过 ETH 交换 token，在 Bsccan 中，由于套的 Ethscan 所以通过此方法交易的类型，也会在交易详情页中的 <code>Value</code> 内进行标注通过 BNB 交易的份额，例如 <a target="_blank" rel="noopener" href="https://www.bscscan.com/tx/0xebc3cd65120b04e6d22f17a973214cb2a812888d3d1b0aa509a17a65b184612e">Binance Transaction Hash (Txhash) Details | BscScan</a>中。</p>
<p>通过此方法进行交易，将会附带一个 <code>payable</code> 参数，用于可能、可以、或必须支付的费用，在其他非 Eth 交易的数据中，则不会将交易的数额写入到 <code>Value</code> 栏内。该方法的第一个参数必须是 <a target="_blank" rel="noopener" href="https://docs.uniswap.org/protocol/V2/reference/smart-contracts/router-02#weth">WBNB</a> 也就是 WBNB 的地址等，例如：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> value_type_address == <span class="string">&#x27;BNB&#x27;</span> <span class="keyword">and</span> pair_type_address == wbnb:  </span><br><span class="line">    pancakeswap2_txn = router_contract.functions.swapExactETHForTokens(  </span><br><span class="line">        <span class="number">0</span>,  <span class="comment"># set to 0, or specify minimum amount of tokeny you want to receive - consider decimals!!!  </span></span><br><span class="line"> [wbnb, tokenToBuy],  </span><br><span class="line">        sender_address,  </span><br><span class="line">        (<span class="built_in">int</span>(time.time()) + <span class="number">10000</span>)  </span><br><span class="line">    ).buildTransaction(&#123;  </span><br><span class="line">        <span class="string">&#x27;from&#x27;</span>: sender_address,  </span><br><span class="line">        <span class="string">&#x27;value&#x27;</span>: buy_value,  <span class="comment"># This is the Token(BNB) amount you want to Swap from  </span></span><br><span class="line"> <span class="string">&#x27;gas&#x27;</span>: <span class="built_in">int</span>(gas),  </span><br><span class="line">        <span class="string">&#x27;gasPrice&#x27;</span>: web3.toWei(<span class="string">&#x27;12&#x27;</span>, <span class="string">&#x27;gwei&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;nonce&#x27;</span>: nonce,  </span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>在上述的 code 中，与 <code>swapExactTokensForTokens</code>  的区别之处在于 <code>payable</code> ，这个在 web3.0 的概述中，我们可以得知，<code>payable</code> 就是 <code>value</code> 只有通过 <strong>WBNB</strong> 进行交易的时候。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对于其他的方法，只要涉及 ```payable``` 变量，那么就表明这个东西是需要进行 BNB 交易份额的。</span><br></pre></td></tr></table></figure>

<p>在此之前，我们需要了解下一个交易时的概念，就是滑点(Slippage) 也就是在交易的过程中来描述交易在等待时可能发生改变的属于，当交易被提交到 ETH 时，他们的执行顺序时根据 gas 数量来决定的（提供的 gas 费用越高，所执行的速度也就越快。在这其中他所最终交易的价格环境也会发生变化，因为加密货币的市值也是不断变化的）</p>
<p>滑点的容忍度他建立了一个用户可以所接受的超出价格影响的变化幅度，只要价格在滑点的范围内，那么交易就会被执行。</p>
<h2 id="swapETHForExactTokens-以-Tokens-为基准来通过-ETH-来进行换取"><a href="#swapETHForExactTokens-以-Tokens-为基准来通过-ETH-来进行换取" class="headerlink" title="swapETHForExactTokens 以 Tokens 为基准来通过 ETH 来进行换取"></a>swapETHForExactTokens 以 Tokens 为基准来通过 ETH 来进行换取</h2><p>我们可以看到同样是互换的交易类型，<a target="_blank" rel="noopener" href="https://www.bscscan.com/tx/0xdba5ff7533a427156ee53d5282baddf2ffdea93613d0d584cfde3a2f61f89e44">Binance Transaction Hash (Txhash) Details | BscScan</a> 的交易类型和 <code>swapExactTokensForTokens</code> 的区别在于，之处可以看下方的图片介绍：<br><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/function.png"></p>
<p>从上图可以得知，两个转换方法的不同指出在于，买入的方式不同，后者是通过 BNB 货币价值等价于 tokens 来进行买入 Tokens，而前者则是通过买入 tokens 数量来支付 BNB，一般来说 <code>swapETHForExactTokens</code> 会更加精准些许。</p>
<p>需要注意的是，按照 uniswap 的 function 命名规则，通常是 <code>Exact</code> 跟在谁的后面，那么就精准谁的数据信息，比如 <code>Exact</code> 在 <code>token</code> 后面，那么他的数据就较为精准，反而毅然。</p>
<h2 id="swapExactTokensForETH-准确地将-token-交换出-ETH"><a href="#swapExactTokensForETH-准确地将-token-交换出-ETH" class="headerlink" title="swapExactTokensForETH 准确地将 token 交换出 ETH"></a>swapExactTokensForETH 准确地将 token 交换出 ETH</h2><p>准确的将 token 交换出的 ETH，用于将一个接近整数的 token 互换为 ETH，并进行交易。<br><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/image%2014.png"></p>
<p>你可以通过 <a target="_blank" rel="noopener" href="https://www.bscscan.com/tx/0x65d5808aeac2a832c964991217dc856623ebe3452312c569ce633056faab66e9">Binance Transaction Hash (Txhash) Details | BscScan</a> 来查看真实的交易数据，之后通过 Web3 来进行 Swap 交易的进行。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/blockchain/web3.0/python/2.Etherscan and Bscscan/">Etherscan and Bscscan</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/blockchain/" rel="tag">blockchain</a> <a class="article__tag-none-link" href="/tags/python/" rel="tag">python</a> <a class="article__tag-none-link" href="/tags/web3-0/" rel="tag">web3.0</a>
			</span>
		
	</div>

	

	
		<p><a target="_blank" rel="noopener" href="https://etherscan.io/">Etherscan</a> 和 <a target="_blank" rel="noopener" href="https://www.bscscan.com/">Bscscan</a> 的区别就是以太坊链和币安链，由于两者在其自己的链浏览器中都相差不大，所以我们可以通过任意一个链的学习来了解两个链浏览器的功能和开发中需要的几个参数点。</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202202241623300.png"></p>
<p>在其首页中 <strong>Latest Blocks -&gt; #<a target="_blank" rel="noopener" href="https://www.bscscan.com/block/15528806">Block</a></strong> 中，我们可以从其交易数据中来了解到链的整个交易过程和所涉及的知识点等信息，通过这些信息可以让我们之后在开发中进行利用并熟练的操作。</p>
<p>在之前的 web3.0 中我们通过 Provider 所提供的方法来进行获取块中的数据信息，那么我们可以在 <a target="_blank" rel="noopener" href="https://etherscan.io/">Etherscan</a> \ <a target="_blank" rel="noopener" href="https://www.bscscan.com/">Bscscan</a>  中来看到他们链官方是如何使用这些信息且展示的。</p>
<h2 id="Block-view"><a href="#Block-view" class="headerlink" title="Block view"></a>Block view</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202202241716249.png"></p>
<p>区块是一个核心的概念，我们可以理解为是将其分类帐中的页面，区块包含了交易数据和前一个区块的哈希值，从而确保区块链网络中的不可变性和安全性，因此一个完整的 Block 中，他通常包含了下列数据：</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Info</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Block Height</td>
<td>区块的高度，通常被称之为区块编号，表示该区块在链中的位置</td>
</tr>
<tr>
<td>2</td>
<td>Timestamp</td>
<td>时间戳</td>
</tr>
<tr>
<td>3</td>
<td>Transactions</td>
<td>区块中的交易数量,以及合约内部交易数据(指从合约执行中所创建并进行交易的以太币数量)</td>
</tr>
<tr>
<td>4</td>
<td>Mined by</td>
<td>成功开采这个区块的矿工</td>
</tr>
<tr>
<td>5</td>
<td>Block Rewad</td>
<td>矿机因将该块包含在区块链中而获得的总块奖励。奖励明细(静态块奖励、总交易费、扣除烧费、叔叔包含奖励)也会显示出来。</td>
</tr>
<tr>
<td>6</td>
<td>Uncles Reward</td>
<td>奖励采矿者在观察到的区块中开采未开采的区块。</td>
</tr>
<tr>
<td>7</td>
<td>Difficulty</td>
<td>开采一个新区块所需的工作量。难度根据区块链上的总哈希幂挖掘进行调整。</td>
</tr>
<tr>
<td>8</td>
<td>Total Difficultty</td>
<td>到目前为止的区块挖掘总难度</td>
</tr>
<tr>
<td>9</td>
<td>Size</td>
<td>块的大小，他由区块的 GAS 限制所决定</td>
</tr>
<tr>
<td>10</td>
<td>Gas Used</td>
<td>块中所使用的总 GAS，还包括使用 gas 百分百以及超过 gas 目标使用的 gas 百分比。</td>
</tr>
<tr>
<td>11</td>
<td>Gas Limit</td>
<td>区块中的总 gas 限制</td>
</tr>
<tr>
<td>12</td>
<td>Base Fee Per Gas</td>
<td>包含在块中的 tx 所需的最小 gasUsed 乘数</td>
</tr>
<tr>
<td>13</td>
<td>Burnt Fees</td>
<td>代表 tx 费用中被烧掉的部分：baseFeePerGas * gasUsed</td>
</tr>
<tr>
<td>14</td>
<td>Burnt Data</td>
<td>矿工可以包含在区块中的任何数据</td>
</tr>
<tr>
<td>15</td>
<td>Hash</td>
<td>当前区块的区块头哈希</td>
</tr>
<tr>
<td>16</td>
<td>Parent Hash</td>
<td>生成此块的块哈希，通常称之为其夫块</td>
</tr>
<tr>
<td>17</td>
<td>Sha3Uncle</td>
<td>以太坊 Javascript RLP 编码空字符串的机制</td>
</tr>
<tr>
<td>18</td>
<td>StateRoot</td>
<td>状态树的根</td>
</tr>
<tr>
<td>19</td>
<td>Nonce</td>
<td>区块随机量数是在挖掘过程中用于展示区块工作量证明的值</td>
</tr>
</tbody></table>
<p>这在以太坊的官方知识库中均有记录，我们可以翻阅其官方的知识库来查阅有关以太坊链的相关信息和资料 <a target="_blank" rel="noopener" href="https://info.etherscan.com/exploring-block-details-page/">Exploring the Block Details (etherscan.com)</a>。无论是在 Etherscan 还是之前我们通过 web3.0 来请求块数据所返回的信息内，均都涉及一个概念类的东西，即 <code>GAS</code> :</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    &#x27;author&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0xad5C1768e5974C231b2148169da064e61910f31a</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;difficulty&#x27;<span class="punctuation">:</span> <span class="number">735512610763</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;extraData&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x476574682f76312e302e302f6c696e75782f676f312e342e32</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;gasLimit&#x27;<span class="punctuation">:</span> <span class="number">5000</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;gasUsed&#x27;<span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;hash&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x767c2bfb3bdee3f78676c1285cd757bcd5d8c272cef2eb30d9733800a78c0b6d</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;logsBloom&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;miner&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0xad5c1768e5974c231b2148169da064e61910f31a</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;mixHash&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x31d9ec7e3855aeba37fd92aa1639845e70b360a60f77f12eff530429ef8cfcba</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;nonce&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x549f882c5f356f85</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;number&#x27;<span class="punctuation">:</span> <span class="number">12345</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;parentHash&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x4b3c1d7e65a507b62734feca1ee9f27a5379e318bd52ae62de7ba67dbeac66a3</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;receiptsRoot&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;sealFields&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;<span class="number">0x31d9ec7e3855aeba37fd92aa1639845e70b360a60f77f12eff530429ef8cfcba</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;<span class="number">0x549f882c5f356f85</span>&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;sha3Uncles&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;size&#x27;<span class="punctuation">:</span> <span class="number">539</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;stateRoot&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0xca495e22ed6b88c61714d129dbc8c94f5bf966ac581c09a57c0a72d0e55e7286</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;timestamp&#x27;<span class="punctuation">:</span> <span class="number">1438367030</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;totalDifficulty&#x27;<span class="punctuation">:</span> <span class="number">3862140487204603</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;transactions&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;transactionsRoot&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;uncles&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>由于以太坊网络是一个分散的区块链，没有单一的实体或机构监管或其运营，因此建立了一个机制来避免网络堵塞或者垃圾邮件的交易信息，这种机制的主要原理是<strong>向交易发送者收取一笔称之为 GAS 费的小额费用</strong> ETH 将使用这类资金奖励网络上验证交易的矿工。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这笔费用将会以 ETH 形式出现，也应用在以太坊网络中，从而促进价值来进行转移，采矿指出和智能合约的执行，GAS 的工作方式主要类似于汽油费的方式，类似于**车辆//燃料的工作方式，为了从 A~B 点，车辆所加满足够的汽油** 因此如果要让 ETH 交易成功，发送方必须提供足够的 ETH 来支付 GAS 费用。</span><br></pre></td></tr></table></figure>

<p>GAS 的交易是从交易方地址剩余的 ETH 余额中所扣除的，而不是从发送的 ETH 或代币数量中扣除的，他还会再单个事件中自动与交易方进行扣除，更多关于 GAS 的信息，比如如何计算或设置 GAS 费用，我们可以通过 <a target="_blank" rel="noopener" href="https://info.etherscan.com/what-is-gas-fee/">什么是汽油费 (etherscan.com)</a> 来进行详细查看。</p>
<h2 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202202241917572.png"></p>
<p>交易数据(Transaction) 这是在 Etherscan 中所公开的，可与在 Latest Transaction 中来进行查看，<strong>Latest Transactions -&gt; TX</strong> 在这你可以看到一个钱包到另一个钱包中的 ETH 余额的流动。</p>
<p>之后我们点进支付方的钱包地址可以看到详细的交易数据，<a target="_blank" rel="noopener" href="https://etherscan.io/tx/0xf2587a71690655cbd5427b7da727fdf19d611c3526c57ebc7d736846310b3c45">Ethereum Transaction Hash (Txhash) Details | Etherscan</a> 他主要包含了如下信息：</p>
<table>
<thead>
<tr>
<th>Id</th>
<th>Name</th>
<th>Info</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Transaction Hash</td>
<td>事务散列，每单执行事务时所生成的唯一标识符称之为 TxnHash可用于追踪事务的状态</td>
</tr>
<tr>
<td>2</td>
<td>Status</td>
<td>当前的交易数据，分为成功和失败，分别对应着交易成功和交易未成功(交易金额将在 gas 后退还 )</td>
</tr>
<tr>
<td>3</td>
<td>Block</td>
<td>记录此事务块的编号</td>
</tr>
<tr>
<td>4</td>
<td>Timestamp</td>
<td>记录交易后的持续时间，以及记录交易的确切日期和时间。</td>
</tr>
<tr>
<td>5</td>
<td>From</td>
<td>发钱人地址</td>
</tr>
<tr>
<td>6</td>
<td>To</td>
<td>收款人地址</td>
</tr>
<tr>
<td>7</td>
<td>Value</td>
<td>本次交易的金额</td>
</tr>
<tr>
<td>8</td>
<td>Transaction Fee</td>
<td>本次交易所产生的费用或实际成本(Txn x GAS)，无论交易是否成功 gas 都会是支付给矿工的</td>
</tr>
<tr>
<td>9</td>
<td>Gas Price</td>
<td>这一交易中所使用的最大 gas 单位</td>
</tr>
<tr>
<td>10</td>
<td>Gas Limit &amp; Usage by Txn</td>
<td>此次交易使用 gas 的确切单位</td>
</tr>
<tr>
<td>11</td>
<td>Gas Price</td>
<td>Gwei 为此交易所指定的天然气单位成本</td>
</tr>
<tr>
<td>12</td>
<td>Outher</td>
<td>与该事务相关的一些其他数据</td>
</tr>
<tr>
<td>13</td>
<td>Input Data</td>
<td>此事务包含其他数据，通常包含合约交互的一部分或者发给收钱人的信息</td>
</tr>
<tr>
<td>14</td>
<td>Private Note</td>
<td>记录交易中的私人注释，只有登入 etherscan 中才可查看</td>
</tr>
</tbody></table>
<p>对于上述 14 中信息的注解，我们可以查阅 Etherscan 中的官方文档来解答我们的问题，通过官方文档中可以了解到很多信息: <a target="_blank" rel="noopener" href="https://info.etherscan.com/what-is-a-transaction-hash-txhash/">What is a Transaction Hash (etherscan.com)</a></p>
<p>在此之前，我们还需要先了解下<a href="obsidian://open?vault=_posts&file=blockchain%2F2.%E6%B5%81%E5%8A%A8%E6%B1%A0%E4%B8%8EAMM%E8%87%AA%E5%8A%A8%E5%81%9A%E5%B8%82%E6%9C%BA%E5%88%B6">流动池与AMM自动做市</a>机制，之后在通过 <a target="_blank" rel="noopener" href="https://www.bscscan.com/tx/0x00f13be959dfb17688009ddef13d3727d51bd0a6d254a0785ab95500442f6495">BscScan</a> 看块中方法为 <code>Swap Exact Token...</code> 的数据。</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202202260937632.png"></p>
<p>根据上图的解释，我们可以大致看清楚关于<code>Swap Exact Token...</code> 的流动池的交易数据，在区块链中是不存在 <strong>买和卖</strong> 的概念的，只有交易，<code>Value</code> 是交易中的BNB数量，可能为空也有可能有值。</p>
<p>这些都需要通过 <code>Tokens Transferred</code> 中来进行整理顺序，理清逻辑关系才可以理解到整个交易数据链的意思。</p>
<p>还需要主要的是，在上述页面中的 <code>Gas Price</code> 即本次交易的 gas 费用为 0.000000005 BNB 也就是 5 gwei，而 “gwei” 是什么我们可以通过 <a target="_blank" rel="noopener" href="https://web3py.readthedocs.io/en/stable/examples.html?highlight=Gwei#converting-currency-denominations">web3.0 官方文档</a>中的解释来进行对照。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/blockchain/web3.0/python/1.Web3.0 概述/">Web3.0 概述</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/blockchain/" rel="tag">blockchain</a> <a class="article__tag-none-link" href="/tags/python/" rel="tag">python</a> <a class="article__tag-none-link" href="/tags/web3-0/" rel="tag">web3.0</a>
			</span>
		
	</div>

	

	
		<p>Web 3.0 又被称之为 Web3，是 WWW 发展的一个概念，主要是基于区块链的去中心化，和非同质化代币(Non-Fungible Token) 有关，是一种区块两数字账本上的数据单位。</p>
<p>这个概念于 2014年由以太坊联合创始人 Gavin Wood 提出，并在 2021 年受到大量的科技公司和加密货币爱好者所关注。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Web3.0 不仅仅只包含了区块链的去中心化，他拥有多个含义，用来概括互联网发展的过程中出现不同的特征，包括泛型数据库、跨浏览器、人工智能技术应用等</span><br></pre></td></tr></table></figure>

<h2 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h2><p>Providers(提供者) 通过接受 JSON-PRC 请求并返回响应，通常是基于 HTTP 或 IPC 套接字的服务器提交请求来达成目。</p>
<p>目前最常见的连接结点的方式有很多，可以根据自身的需求以及项目的应用场景进行搭配和选择：</p>
<ol>
<li>IPC(uses local filesystem:fastest and most secure, 使用本地文件系统，最快和最安全)</li>
<li>Websockets(works remotely, faster than HTTP, 远程工作，比 HTTP 块许多)</li>
<li>HTTP(more nodes support it, 更多的节点都支持)</li>
</ol>
<p>当我们可以选择于节点相同的计算机中运行 web3.py 那么我们就采用 IPC 方式，但我们要连接另一台计算机上的节点，那么可以使用 Websockets，又或者我们的节点不支持 websocket，那么就用 HTTP。</p>
<p>之后，我们就可以通过 web3 来配置我们的 Provider 也就是供应商或是内容提供者：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果你是 Linux 开发环境或者通过 WSL 虚拟映射到 Windows 进行开发的，那么我们还需要通过 pip 安装 ```setuptools``` 才可使用 ```web3``` 的库 </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> web3 <span class="keyword">import</span> Web3  </span><br><span class="line">  </span><br><span class="line">w3 = Web3(Web3.HTTPProvider(<span class="string">&#x27;URI&#x27;</span>))  </span><br><span class="line">res = w3.isConnected()</span><br></pre></td></tr></table></figure>

<p>之后，我们可以通过 <code>w3.isConnected()</code> 来初始化连接，以此来获取一个最新的块：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> web3 <span class="keyword">import</span> Web3  </span><br><span class="line">  </span><br><span class="line">w3 = Web3(Web3.HTTPProvider(<span class="string">&#x27;URI&#x27;</span>))  </span><br><span class="line">res = w3.isConnected()  </span><br><span class="line">  </span><br><span class="line">latest_block = w3.eth.get_block(<span class="string">&#x27;latest&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(latest_block)</span><br></pre></td></tr></table></figure>

<p>那么根据 <code>w3.eth.get_block</code> 来获取一个最新的块，也就是说我们已经连接到 ETH 的全球网络中，可以获取很多的信息：</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220223122854.png"></p>
<p>在此，每一个块都有它与之前所产生块的引用，通常被 web3 称之为 “和”，它主要由哈希值进行表明，包含在 <code>parentHash</code>  键值内。</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220223163954.png"></p>
<p>需要注意的是区块链本质上是一个链表，每一个快都有对前一个块的引用，这种数据结构在点对点网络中很是新颖，使得其他人都会知道，当向朋友汇款时，我们需要将交易光波到网络中，然后其他人就会知道，这就是类似于这个概念。</p>
<h2 id="查找块"><a href="#查找块" class="headerlink" title="查找块"></a>查找块</h2><p>块可以通过 API 或者其他编号散列进行查看，一个块的哈希是十六进制表示的形式，块是可以通过 <code>hash</code> 或者 <code>number</code> 来进行查找的，同样的我们也可以实用 <code>latest</code> 来获取最新的快。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    &#x27;author&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0xad5C1768e5974C231b2148169da064e61910f31a</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;difficulty&#x27;<span class="punctuation">:</span> <span class="number">735512610763</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;extraData&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x476574682f76312e302e302f6c696e75782f676f312e342e32</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;gasLimit&#x27;<span class="punctuation">:</span> <span class="number">5000</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;gasUsed&#x27;<span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;hash&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x767c2bfb3bdee3f78676c1285cd757bcd5d8c272cef2eb30d9733800a78c0b6d</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;logsBloom&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;miner&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0xad5c1768e5974c231b2148169da064e61910f31a</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;mixHash&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x31d9ec7e3855aeba37fd92aa1639845e70b360a60f77f12eff530429ef8cfcba</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;nonce&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x549f882c5f356f85</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;number&#x27;<span class="punctuation">:</span> <span class="number">12345</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;parentHash&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x4b3c1d7e65a507b62734feca1ee9f27a5379e318bd52ae62de7ba67dbeac66a3</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;receiptsRoot&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;sealFields&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span>&#x27;<span class="number">0x31d9ec7e3855aeba37fd92aa1639845e70b360a60f77f12eff530429ef8cfcba</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;<span class="number">0x549f882c5f356f85</span>&#x27;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;sha3Uncles&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;size&#x27;<span class="punctuation">:</span> <span class="number">539</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;stateRoot&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0xca495e22ed6b88c61714d129dbc8c94f5bf966ac581c09a57c0a72d0e55e7286</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;timestamp&#x27;<span class="punctuation">:</span> <span class="number">1438367030</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;totalDifficulty&#x27;<span class="punctuation">:</span> <span class="number">3862140487204603</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;transactions&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    &#x27;transactionsRoot&#x27;<span class="punctuation">:</span> &#x27;<span class="number">0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421</span>&#x27;<span class="punctuation">,</span></span><br><span class="line">    &#x27;uncles&#x27;<span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>于 <code>latest</code> 类似的还有 <code>eth.bllock_number</code>  来获取最新的块号，之后通过 <code>eth.get_block</code> 来获取详细信息。</p>
<h2 id="查询余额"><a href="#查询余额" class="headerlink" title="查询余额"></a>查询余额</h2><p>在上述中我们通过 <code>eth.get_block</code> 来获取块的详细信息中，所返回的 <code>miner</code> 内包含了钱包的数据，之后我们可以通过 <code>eth.get_balance</code> 来获取钱包账号，之后我们还需要i通过实用 <code>Web3.fromWei</code> 来进行转换：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> web3 <span class="keyword">import</span> Web3  </span><br><span class="line">  </span><br><span class="line">w3 = Web3(Web3.HTTPProvider(<span class="string">&#x27;URI&#x27;</span>))  </span><br><span class="line">res = w3.isConnected()  </span><br><span class="line">  </span><br><span class="line">latest_block = w3.eth.get_balance(<span class="string">&#x27;0x3EcEf08D0e2DaD803847E052249bb4F8bFf2D5bB&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(latest_block)  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(Web3.fromWei(<span class="number">2922220972276471416291</span>, <span class="string">&#x27;ether&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>或者通过其他方法一下子直接进行过滤，以此来查看数据的帐号余额等信息来进行输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">check_sun = w3.toChecksumAddress(<span class="string">&#x27;0x3EcEf08D0e2DaD803847E052249bb4F8bFf2D5bB&#x27;</span>)  </span><br><span class="line">balance = w3.eth.get_balance(check_sun)  </span><br><span class="line">  </span><br><span class="line">ether_value = w3.fromWei(balance,<span class="string">&quot;ether&quot;</span>)  </span><br><span class="line"><span class="built_in">print</span>(ether_value)</span><br></pre></td></tr></table></figure>

<p>之后通过 <code>Web.fromWei</code> 来对获取的数据进行转译为 ether 的货币面值，来进行转化，针对货币的面值，可以通过 <a target="_blank" rel="noopener" href="https://web3py.readthedocs.io/en/stable/examples.html#converting-currency-denominations">Examples — Web3.py 5.28.0 documentation (web3py.readthedocs.io)</a> 来进行查看 。</p>
<h2 id="交易"><a href="#交易" class="headerlink" title="交易"></a>交易</h2><p>在交易方面，主要通过 <code>send_transcation()</code> 和 <code>send_raw_transaction()</code> 还有合约以及中间件等，以此来应对多种不同的场景，通过指定或者类似的场景来来选择不同的交易方法：</p>
<ol>
<li><p>假设我们只需要将以太币从一个账号中发送到另一个账号中，那么使用 <code>send_transaction()</code> 方法就可以实现需求。</p>
</li>
<li><p>再或者我们需要在其他地方签署交易，需要使用硬件钱包和其他提供商等进行广播交易和更大灵活性更高的高级用例，可以选择 <code>send_raw_transaction()</code>。</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">web3.eth.send_transaction(&#123;</span><br><span class="line">  <span class="string">&#x27;to&#x27;</span>: <span class="string">&#x27;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#x27;</span>,</span><br><span class="line">  <span class="string">&#x27;from&#x27;</span>: web3.eth.coinbase,</span><br><span class="line">  <span class="string">&#x27;value&#x27;</span>: <span class="number">12345</span>,</span><br><span class="line">  <span class="string">&#x27;gas&#x27;</span>: <span class="number">21000</span>,</span><br><span class="line">  <span class="string">&#x27;maxFeePerGas&#x27;</span>: web3.toWei(<span class="number">250</span>, <span class="string">&#x27;gwei&#x27;</span>),</span><br><span class="line">  <span class="string">&#x27;maxPriorityFeePerGas&#x27;</span>: web3.toWei(<span class="number">2</span>, <span class="string">&#x27;gwei&#x27;</span>),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在上述的 code 中，主要是将以太坊发送到零一个账号中，那么使用的就是 <code>send_transaction</code> 方法来进行构造，他的主要参数如下：</p>
<ul>
<li>to: 对方钱包地址</li>
<li>form: 校验地址，通过 <code>web3.eth.coinbase</code> 以此返回当前对方地址</li>
<li>value: 于事务一起发送的整数</li>
<li>gas: 还未使用的以太坊手续费</li>
<li>maxFeePerGas: 愿意支付的最高金额，包括和之间的差额将会会退给用户</li>
<li>maxPriorityFeePerGas: 矿工费用的一部分</li>
</ul>
<p>同时，我们还可以通过 <code>web3.eth.get_transaction</code> 来查找交易记录以及 <code>get_transaction_receipt</code> 查找收据，具体的可以查阅官方文档 <a target="_blank" rel="noopener" href="https://web3py.readthedocs.io/en/stable/examples.html#looking-up-transactions">示例 — Web3.py 5.28.0 文档 (web3py.readthedocs.io)</a></p>
<h2 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h2><p>过滤器的实现主要可以通过 <code>web3.eth.Eth.filter()</code> 方法来设置一个过滤器，通过相应的参数来组合一个新的过滤器，因此我们可以通过 <code>eth&gt;filter(&#39;latest&#39;)</code> 来获取新的块信息，16 进制的消息头：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> web3.auto <span class="keyword">import</span> Web3  </span><br><span class="line">  </span><br><span class="line">w3 = Web3(Web3.HTTPProvider(<span class="string">&#x27;URI&#x27;</span>))  </span><br><span class="line">  </span><br><span class="line">res = w3.isConnected()  </span><br><span class="line">  </span><br><span class="line">new_block_filter = w3.eth.<span class="built_in">filter</span>(<span class="string">&#x27;latest&#x27;</span>)  </span><br><span class="line"><span class="built_in">print</span>(new_block_filter.get_new_entries())</span><br></pre></td></tr></table></figure>

<p>此外，Web3 还为我们提供了新的过滤器，如 <code>fo;ter.filter_id</code> 来获取并创建一个 RPC 方法打来返回新的筛选器，或者检索新的条目，可以阅览<a target="_blank" rel="noopener" href="https://web3py.readthedocs.io/en/stable/filters.html">筛选 — Web3.py 5.28.0 文档 (web3py.readthedocs.io)</a></p>
<h2 id="合约"><a href="#合约" class="headerlink" title="合约"></a>合约</h2><p>智能合约是一种自动执行的合同，由买卖双方之间的协议条款直接写入代码行中，分散在区块链网络中，通过代码控制执行，他也允许在不同的匿名方之间执行可信交易和协议，无需中央机构进行管理，符合去中心化的理论和趋势。</p>
<p>智能合约也是一种计算机程序或交易程序，目的是减少可信中介人的需求，仲裁和执行成本，用来减少恶意的异常，他只是区块链中上存储的程序，在满足一定条件的时候执行，通常用于自动执行协议，以便所有参与者都可以立即确定结果，而不需要中介人的参与来减少时间损失。</p>
<p>合约可以在满足条件的时候触发下一个操作并且开发者通过 ABI 来进行接口的调用和操作，在目前，智能合约的概念已经被运用到供应商关系的信任和国际贸易，使得交易双方更快、更高效。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/blockchain/2.流动池与AMM自动做市机制/">流动池与AMM 自动做市机制</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/blockchain/" rel="tag">blockchain</a>
			</span>
		
	</div>

	

	
		<p>在了解流动池与AMM自动做市机制之前，我们需要了解下 DeFi 即去中心化金融(Decentralized finance)，它是一种新兴的金融技术，通常类似于加密货币所使用的分布式账本(钱包)，他主要的方便之处在于：</p>
<ol>
<li>方便了其他金融公司所收取的费用</li>
<li>余额存放在安全的数字钱包中</li>
<li>可以在任何由网络连接的地方使用</li>
<li>可以在在分钟或几秒钟内转移你的资金。</li>
</ol>
<p>DeFi 主要使用加密货币进行交易，而传统的 CeFi (集中财务,Centralized Finance) 中，你的钱归银行持有，他们的目的主要就是为了赚钱，以此完成一整个金融系统的流动，在一小部分的银行厂商内，你在转账时都会进行一定的收费。</p>
<p>而其它的金融服务也都需要收费，甚至你向银行申请贷款，也都需要几天甚至是几月来进行批准，这可能会耽误你的时间。</p>
<p>而去中心化金融他主要是创建于区块链上的金融模式，且不依赖于卷商、交易所或银行等金融交易机构所提供的金融工具，主要利用<strong>区块链上的智能合约</strong>，以此来进行交易活动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DeFi 平台允许人们向他人借出或借入资金，交易加密货币，并在类似于储蓄账户中获取利息</span><br></pre></td></tr></table></figure>

<h2 id="流动资金池"><a href="#流动资金池" class="headerlink" title="流动资金池"></a>流动资金池</h2><p>Liquidity Pools，即流动资金池，使得用户能够在分散的交易所(DEX)和其他的 DeFi 平台上买卖加密货币。在 DeFi 中，交易者为分散式交易所(DEX,Decentralized exchange) 提供流动性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEX 是一种加密货币交易所，允许直接的点对点加密货币在线交易，无需中介。</span><br></pre></td></tr></table></figure>

<p>流动池是一种机制，通过该机制用户可以将其资产汇聚到 DEX 的智能合约中，为交易者在交易货币之间提供资产的流动性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">智能合约是区块链中的基础技术，同时也是以太坊网络中的关键要素，智能合约是自动执行的一组 Code，然后在区块链上进行验证。可以将智能合约理解成传统意义上的合同，同样是多方之间的协议，其中以方向另一方提供有价值的东西，而且交易双方要被智能合约所约束。</span><br><span class="line"></span><br><span class="line">他与传统的交易来进行对比，不同之处在于，智能合约可以自动执行协议条款中的 Code，然后 Code 会发送到区块链上的地址，由该区块的共识机制进行验证，一旦交易包含在此区块中，那么就会执行智能合约且发生不可挽回的操作。</span><br><span class="line"></span><br><span class="line">在智能合约中，消除了传统 CeFi 中的中介以及合同的执行需求，简化了合同的谈判过程，主要通过 Code 来定义交易的机制，从而成为条款的仲裁者。</span><br><span class="line"></span><br><span class="line">但智能合约也有缺点，就是如果智能合约中的 Code 出现或存在错误，则会使得智能合约无效，且不可更改。因为智能合约是无信任、自主、分散且透明的，一旦部署他就是不可逆以及不可修改的存在。</span><br><span class="line"></span><br><span class="line">**一个合约就是一个交易货币**，一个资金流动池中包含了多了加密货币，在资金池中我们可以指定的转换币的类型。</span><br></pre></td></tr></table></figure>

<p>流动资金池的主要协议是 Bancor ，但随着 Uniswap 的普及使得这一概念引起了更多的关注，在详细了解流动池之前，我们可以先了解下 Uniswap。</p>
<p>Uniswap 是一个领先的分散式加密交易所，完全的去中心化，这意味着他不是由单个实体所运营，而是采用一种相对于新颖的交易模型，称之为流动性协议</p>
<h3 id="Uniswap"><a href="#Uniswap" class="headerlink" title="Uniswap"></a>Uniswap</h3><p>Uniswap 系统就是一个自动化的流动性协议，通过常数乘积公式进行驱动这也是 Uniswap 所使用的自动做市算法 <a target="_blank" rel="noopener" href="https://docs.uniswap.org/protocol/V2/concepts/protocol-overview/glossary#x--y--k">词汇表|优斯瓦普 (uniswap.org)</a> 在 Uniswap 中的智能合约内，都管理着由一个由两个 <a target="_blank" rel="noopener" href="https://eips.ethereum.org/EIPS/eip-20">ERC-20</a> 合约所储备组成的流动性机制。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERC20 tokens 是一个合约标准，也是 token 的标准接口，允许智能合约为 token 实现标准的 API 该标准提供了转移 token 的基本功能并允许 token 获得批准，使得可以在链上第三方应用。</span><br></pre></td></tr></table></figure>

<p>任何人都可以成为流动池与流动池提供者 (Liquidity provider,LP)，其方法主要是存入每个底层 token 的等价值，以换取流动池 token。</p>
<h4 id="Pool"><a href="#Pool" class="headerlink" title="Pool"></a>Pool</h4><p>Uniswap 的独特之处在于，他不会使用订单薄来推到资产的价格，也不会匹配 token 的买家和卖家，是一个完全去中心化的平台和交易流程。</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202202251201283.png"></p>
<p>每个 Uniwap 流动池都是一堆 ERC20 合约所交易的场所，起初在创建时每个 token 都为 0，第一个 LP 是设定流动池初始加价格。</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202202251628658.png"></p>
<p>无论何时何地将流动性存入到流动池中，都会生成一流动性 token 并将其发送到提供者的地址，流动池中的流动性比列决定了提供者收到的流动性 token(Liquidity tokens)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Liquidity tokens 本身就是可以交易的资产，LP(Liquidity providers,流动提供者)可以出售、转让或者以其他方式其流动性的 token。 </span><br></pre></td></tr></table></figure>

<p>为了获取相关的流动性，加上其他费用，LP 必须烧掉自己的 Liquidity Tokens 以任何他们所认为的合适方式。</p>
<h3 id="AMM"><a href="#AMM" class="headerlink" title="AMM"></a>AMM</h3><p>自动化做市商(American Metal Market) 可以理解为一种机器人，可以让买卖双方的资产进行报价。而他主要是一种去中心化的交易平台(DEX) 合约，通过数学公式对资产等进行定价（主要通过算法进行完成），而不是传统的订单薄。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">订单薄是一个按照价格排序的当前资产目前开放的买卖订单列表</span><br></pre></td></tr></table></figure>

<p>AMM 的定价公式会随着不同的合约进行变化，这类似于 <a target="_blank" rel="noopener" href="https://uniswap.org/">uniswap</a> 的 <code>x * y= k</code> 即流动性池。在传统的做商机制中，适用于作用大量资源并采用复合策略的公司，借助这种机制使得交易者可以在订单薄交易平台中获得优质的成交量。</p>
<p>自动化做商机制中。则将做市商的这一过程去中心化，让所有人都可以在区块链中创建市场</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/blockchain/1.区块链概述/">区块链概述</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/blockchain/" rel="tag">blockchain</a>
			</span>
		
	</div>

	

	
		<p>区块链（block chain）是由密码学与共识机制等技术所创建的庞大的交易资料区块链的点对点网络。我们可以理解为区块链中的每一个 “区块” 都蕴含着交易资料，以及前一个区块的加密散列、相应时间戳等信息。</p>
<p>区块链的形成主要分为主链，然后分出块，然后是存在于主链外的孤儿链，需要注意的是，每次更新都是一个新的块，添加至链的末端。</p>
<p>欧盟在<a target="_blank" rel="noopener" href="https://publications.jrc.ec.europa.eu/repository/bitstream/JRC108255/jrc108255_blockchain_in_education%281%29.pdf">区块链教育</a>中，将区块链比喻成一种分布式的账本，为社区记录和共享信息所提供了一种方式。</p>
<p>在这各社区中每个成员可以维护他自己的副本，而所有的成员必须集体验证任何更新，通常这些信息可以表示交易、合约、资产、身份或者实际上人何以数字所描述的东西。这些信息是永久且透明的，可搜索使得社区成员可以完整的查看交易历史。</p>
<h3 id="节点-gt-链-gt-区块"><a href="#节点-gt-链-gt-区块" class="headerlink" title="节点 -&gt; 链 -&gt; 区块"></a>节点 -&gt; 链 -&gt; 区块</h3><p>一个节点中是一个完整的单元，节点里面的链上拥有着多个区块，而区块中存放着多个数据，每一个节点或者说一个链中都拥有不同的共识机制，公有链中，所采用的共识机制主要是 PoW&#x2F;PoS 等，是一个去中心化的节点，同时也是所有人都可以参与的。</p>
<p>而联盟链来说，他的参议机制是联盟成员，采用的共识机制是分布式一致性算法，通常用于供应链的管理和金融服务、医疗保健等。最后私有链则是 skik&#x2F;pbft 等作为共识机制，参与者通常是链的所有者。</p>
<h2 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h2><p>共识机制(consensus) 可以理解为达成共识的机制，在分布式系统中最为常见，同时依据故障组的容错能力，常被分为崩溃容错协议(crash fault tolerant) 以及拜占庭容错协议(Byzantine fault tolerant)</p>
<h3 id="PoW"><a href="#PoW" class="headerlink" title="PoW"></a>PoW</h3><p>我们以公有链中的共识机制为切入点，工作量(proof of work)证明主要被称之为挖矿，之后获胜者以或者代币做为食用计算能力的激励措施，耗费大量的电力和实践以及性能，来生成区块，</p>
<h3 id="PoS"><a href="#PoS" class="headerlink" title="PoS"></a>PoS</h3><p>权益证明(Proof-of-Stake) 于 PoW 相比，这种是发通过其账户余额来选择节点，通常是最富有经验者或者来主导网络，它的好处在于，减少了能源的使用并改善于 PoW 相关的电力效率低下而创建的。</p>
<p>于 PoW 之间的区别在于选举他们所代表来验证区块，因此不诚实的代表容易被投票淘汰，相反于 PoS 每个利益相关者都会验证交易，因此 PoS 更加严格。</p>
<h3 id="容错类型"><a href="#容错类型" class="headerlink" title="容错类型"></a>容错类型</h3><p>计算系统由大量的硬件和软件组成，特别是在区块链的场景中，一旦某个块出现了问题，那么将会对整个网络发生较为较为不可恢复性的伤害，因此在设计中每个区块拥有良好的故障处理行为，尽管发生故障，他们仍然可以继续提供特定的标准服务，</p>
<p>然而对于越来越多的用户群体来说这些不可预测和潜在的危险故障导致服务的不可用的代价可能非常大，因此就需要依赖于容错服务。我们在接触分布系统中，对容错的类型都因有大致的了解。</p>
<p>我们需要了解的一个概念是，为了实现容错，分布式系统架构中采用了沉余的处理方式，也就是集群，在 HBASE 分布式数据库中就大致的依赖 Zookeeper + Hadoop 中的 datanode和 namenode 来设计的容错模式。</p>
<p>对于服务的崩溃，我们可以通过 Flaviu Cristian 所写的 <a target="_blank" rel="noopener" href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.30.591&rep=rep1&type=pdf">Understanding Fault-Tolerant Distributed Systems</a> 来理解容错分布式系统。</p>
<h4 id="CFT"><a href="#CFT" class="headerlink" title="CFT"></a>CFT</h4><p>分布式系统中面临着很多问题，某个节点中出现问题或者故障，又或者是网络出现了问题，那么对于生产环境来说，共识算法必须可以应对这种故障。</p>
<p>CFT(Crash fault tolerant，崩溃容错协议) 在协议中构建了一定的复原能力，通过算法正确的推进进程以此来达到共识，即使某些组件出现了故障。</p>
<p>通过 # <a target="_blank" rel="noopener" href="https://www.uiowa.edu/">The University of Iowa</a> 内，关于<a target="_blank" rel="noopener" href="http://homepage.divms.uiowa.edu/~ghosh/16612.week10.pdf">故障和容错的</a> 章节中我们可以明白崩溃容错协议的主要用处，由此可知，崩溃失败就是进程停止，他是无法逆转的，如果一个系统无法容忍失败，也就是崩溃，也就是停止失败，他也无法容忍崩溃。</p>
<h4 id="BFT"><a href="#BFT" class="headerlink" title="BFT"></a>BFT</h4><p>拜占庭容错(Byzantine fault tolerant)是容错分布式计算及系统对组件故障的抵抗</p>
<p>拜占庭容错(BFT) 是分布式网络的功能，即使网络中某些节点无法响应或者相应不正确，也可以达成某种狗狗是，通古果采用集体决策来防止系统故障，以此来减少影响，对于拜占庭故障的类型主要分为两类，一种是故障的停止，或者是节点的故障，如今他已经被应用在区块链的交易中<a target="_blank" rel="noopener" href="https://www.sciencedirect.com/topics/computer-science/byzantine-fault">拜占庭断层 - 概述|科学直接主题 (sciencedirect.com)</a></p>
<p>区块链平台将其作为共识的机制，通常拜占庭还包括的拜占庭容错(BFT)和实用拜占庭容错(pBFT)。</p>
<p>拜占庭错误的定义为分布式系统在执行算法是所发生的任意错误，当拜占庭式错误发生时，系统可能会以任意的形式进行反应，这是传统的拜占庭错误。</p>
<p>但当我们使用拜占庭容错时，主要会涉及到同步和异步，因此，同步时系统在已知有限时间内所作出相应的系统，而异步则不是。</p>
<p>自 Miguel Castro 与 Barbara Liskov 等人在 1999 年 2 月所提出的<a target="_blank" rel="noopener" href="https://pmg.csail.mit.edu/papers/osdi99.pdf">实用拜占庭容错(BFT)</a> 他们通过实用数字签名来跨多个跳认证用户，即密码学需要一个可信的基础设施来发放他们的公钥和私钥，因此假设这项基础问题处发现问题，则整个网络也会失败。</p>
<p>对于拜占庭分层，我们可以通过阅读 MA Nasreen，Amal Ganesh, Sunitha C 等人在 2016 年第四届计算机科学与工程最新趋势国际会议所提出的<a target="_blank" rel="noopener" href="https://pdf.sciencedirectassets.com/280203/1-s2.0-S1877050916X00117/1-s2.0-S1877050916304641/main.pdf?X-Amz-Security-Token=IQoJb3JpZ2luX2VjEPz//////////wEaCXVzLWVhc3QtMSJIMEYCIQCzJ/mKwlxBnd/50YwVOC0IlYICsdy4WToomOOlRp4bKwIhANm71aP//04jeNVPh/YDdgWBEpwJ6IDN7wsvquywKBPdKvoDCFUQBBoMMDU5MDAzNTQ2ODY1IgxgyZNfuN3LxyxvGB0q1wPATIuIP+e9obwnhOZwHZmX3gEVBxY8CvO/9tNMC9K4NgFFn25+gy+L9KpUuUuCOwZQL83AVHF2tOL7l+B/dugIvOCGCYW5PXqPhCbpQWLjWtsb4+oq1TNQxlWWjLFF/JS190JgFlZWGn9yNJjPUB19s6ZmBPELhEmhs+2krLNHdkSTXFr0RrHEvJUwB4j7Dt8aK2RXIbvIEqHcG0M4XdgYwSoXf3V6W2tufNfUXMc0k6tqJScUS1KTTSFyueQKLVtzUwHpiCG1FdZJCGZdeQXCcqpUfHCsw7eicETnwm97wflwMKGOajDcX2acnLGWXORv+jLjNumLP5o6fSxGWWluj1LyC3aO59iT3F9d+S/Z6Xm2v+Z4cA9OYrBtBWYluKB8mYLs4ncwQ0JuU3/o8hrec/yWBCSgwErbsB0VlwCSkwwSGHJWEq2MKfC+eeFMLPFJ6tjUEr1TxXRglZ/eEGzY6mipKViGM0kjkWw20KZvO0er0NUtHYrT2zdWMk2qSKQMHoiQEfOnetwlu1j7sSuLwThCX80/HFg1XJ8TbpwRbFcSidbt+wr9C0tnghGmzOzbYwNDyS4GJyN3nTowbGJNvPbxHgwD1mOewjHzc09pTujPzCnS3tswnbXRkAY6pAGm0Z4f80e5CC9HsK/ML79/rLkmsqVTRa94r7f77WBm0V6uIBe9ZSZMCwhgfN72ECDgOT+eDFRGsFcDIayKlDG1gDry1bccWMkwDSOmB6po2PQKYUs2XUkS+lvdt03Nu4FPGTp8PZf6jZ8EnJzX7YpRGUTGWmsq8AYzJ/WVFOcPrbI/7TcJTS3tev3k1pNHzreI6ltHmOEM0O1V/Ap4L3tXzhL3sw==&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20220222T041640Z&X-Amz-SignedHeaders=host&X-Amz-Expires=300&X-Amz-Credential=ASIAQ3PHCVTY76FWXQJH/20220222/us-east-1/s3/aws4_request&X-Amz-Signature=d599560eb90284ab9c8e0589cef1f2dcb4e1359c62b1cf0f37b6a201f5cc0193&hash=b86ab8e9bf375d876657bd5f434224ce5ea662f07f040a11a6f8283ab86616dc&host=68042c943591013ac2b2430a89b270f6af2c76d8dfd086a07176afe7c76c2c61&pii=S1877050916304641&tid=spdf-01afc33f-9458-4bcd-91e2-99e9f29f9b22&sid=221a2f768513b24874286fb359bc8311c8afgxrqa&type=client&ua=5001525b53585601500c&rr=6e15667c4c457b19">A Study on Byzantine Fault Tolerance Methods in Distributed Networks (sciencedirectassets.com)</a></p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/Group%201.png"></p>
<p>为了达成一个安全的共识协议，他必须是容错的，所以 BFT 中开发了实用拜占庭容错(PBFT)，这种是基于BFT原则的验证，<strong>并且使用选举过程中的块是在验证之后所进行的</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">共识，即在添加分类帐上所有的条目在此之前都需要进行某种形式的共识，**并且通过已知参与者之间的算法进行投标来达成某种共识**，诸如工作量证明(Pow)和权益证明(Pos)分别在验证工作和交易的共识协议，同样的还有其他方法，如实用拜占庭容错(BPFT)和委托权益证明(DPos) 都是用于达成某种共识的。</span><br><span class="line"></span><br><span class="line">对于 BFT 可以阅读拜占庭将军的问题，同时拜占庭容错是一个定义容许拜占庭将军问题失败的了别的系统特征，同时还有拜占庭故障(Byzantine Failure)</span><br></pre></td></tr></table></figure>

<p>实用拜占庭容错是设计在为异步请求的响应中没有上线的系统中高效工作，阵地低开开销时间进行 优化，目标是解决已经可用的拜占庭容错解决方案中的多个问题，通常应用于分布式计算中和区块链。</p>
<h2 id="合约"><a href="#合约" class="headerlink" title="合约"></a>合约</h2><p>智能合约是一种自动执行的合同，由买卖双方之间的协议条款直接写入代码行中，分散在区块链网络中，通过代码控制执行，他也允许在不同的匿名方之间执行可信交易和协议，无需中央机构进行管理，符合去中心化的理论和趋势。</p>
<p>智能合约也是一种计算机程序或交易程序，目的是减少可信中介人的需求，仲裁和执行成本，用来减少恶意的异常，他只是区块链中上存储的程序，在满足一定条件的时候执行，通常用于自动执行协议，以便所有参与者都可以立即确定结果，而不需要中介人的参与来减少时间损失。</p>
<p>合约可以在满足条件的时候触发下一个操作并且开发者通过 ABI 来进行接口的调用和操作，在目前，智能合约的概念已经被运用到供应商关系的信任和国际贸易，使得交易双方更快、更高效。</p>
<p>智能合约是区块链中的基础技术，同时也是以太坊网络中的关键要素，智能合约是自动执行的一组 Code，然后在区块链上进行验证。可以将智能合约理解成传统意义上的合同，同样是多方之间的协议，其中以方向另一方提供有价值的东西，而且交易双方要被智能合约所约束。</p>
<p>他与传统的交易来进行对比，不同之处在于，智能合约可以自动执行协议条款中的 Code，然后 Code 会发送到区块链上的地址，由该区块的共识机制进行验证，一旦交易包含在此区块中，那么就会执行智能合约且发生不可挽回的操作。</p>
<p>在智能合约中，消除了传统 CeFi 中的中介以及合同的执行需求，简化了合同的谈判过程，主要通过 Code 来定义交易的机制，从而成为条款的仲裁者。</p>
<p>但智能合约也有缺点，就是如果智能合约中的 Code 出现或存在错误，则会使得智能合约无效，且不可更改。因为智能合约是无信任、自主、分散且透明的，一旦部署他就是不可逆以及不可修改的存在。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/base/计算机科学精粹/1.预备知识/">计算机科学精粹预备知识</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/base/" rel="tag">base</a> <a class="article__tag-none-link" href="/tags/computer-scienc/" rel="tag">computer scienc</a>
			</span>
		
	</div>

	

	
		<p>计算机科学(Computer science，CS) 是系统性研究信息与计算机理论基础和系统的实践以及应用类的学科，如同天文学等，从本质上来讲计算机科学与科学同样具有统一性。但实际上计算机科学相当的数量领域都不涉及计算机科学研究的本身。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正因为计算机科学的门类有很多，所以更多的院系和研究者更加倾向于 **computing secience**或 **datalogy** 即数据解析，表示计算机科学是围绕着数据和数据处理，不一定要涉及计算机。</span><br></pre></td></tr></table></figure>


	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/web/css/sass/1.sass 简介与安装/">sass 简介与安装</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/css/" rel="tag">css</a> <a class="article__tag-none-link" href="/tags/sass/" rel="tag">sass</a>
			</span>
		
	</div>

	

	
		<h2 id="sass-是什么"><a href="#sass-是什么" class="headerlink" title="sass 是什么"></a>sass 是什么</h2><p>sass是世界上最成熟、最稳定、最强大的专业级css扩展语言，全称“Syntactically Awesorme Stylesheets”即审计准则说明书，最初是由Hampton Catlin设计，Natalie Weizenbaum开发的叠层样式表设计语言。在完成最初版本的开发后，开发证体哦继续通过SassScript来扩充其功能，而SassScript是Sass文件使用的小型脚本语言，其中SassScript用于将.cass文件转换成.css文件。</p>
<h2 id="一个问题让你爱上sass"><a href="#一个问题让你爱上sass" class="headerlink" title="一个问题让你爱上sass"></a>一个问题让你爱上sass</h2><p><strong>问：我有好多重复的css，但是我又不想重新写或复制</strong><br>答：你可以使用sass的变量进行引用，如：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$one</span>:  <span class="number">10px</span>;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$one</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="安装-sass"><a href="#安装-sass" class="headerlink" title="安装 sass"></a>安装 sass</h2><p>本文主要通过opensuse进行安装sass，可通过 <code>sudo zypper install ruby2.5-rubygem-sass</code>进行安装，之后使用其sass命令来证明sass是否安装，当然也可通过opensuse所提供的官方软件仓库中进行图形界面安装，总之只要可以安装就行了。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/web/css/outher/7.CSS CSS nth-child and calc as well as position-hover/">CSS nth-child and calc as well as position:hover</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/css/" rel="tag">css</a>
			</span>
		
	</div>

	

	
		<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210423020249.gif"><br>nth-child 根据 MDN 的概述中的作用为<code>找到所有当前元素的兄弟元素，然后按照先后顺序从1开始进行排序</code>，而<code>calc</code>的作用则是<code>允许在声明 CSS属性中执行计算</code>。</p>
<p>那么通过使用 nth-child 和 calc 以及 position 和 <code>:hover</code>也许会实现出一种根据鼠标移动而移动的效果，具体可以使用多个元素进行定义，如：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://fonts.googleapis.com/css?family=Noto+Sans+SC:100,300,400,500,700,900&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cell&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 99 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;con&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;squ&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>那么 SCSS 样式可以为他设置一个基础的背景颜色和网格让其显得更好理解，那么首先我们将<code>con</code>的X,Y位置设置为0：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">*, *<span class="selector-pseudo">::before</span>, *<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line">  <span class="comment">// 设置网格</span></span><br><span class="line">  <span class="attribute">display</span>: grid;</span><br><span class="line">  <span class="attribute">grid-template</span>: repeat(<span class="number">10</span>, <span class="number">1</span>fr) / repeat(<span class="number">10</span>, <span class="number">1</span>fr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.cell</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid white;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionX</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attr">--positionY</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.squ</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: calc(<span class="number">100px</span> + var(--positionX) * <span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">height</span>: calc(<span class="number">100px</span> + var(--positionY) * <span class="number">20px</span>);</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之后通过将 <code>cell</code>使用<code>nth-child:hover</code>来进行绑定<code>con</code>的位置数据：</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@for</span> <span class="variable">$i</span> from <span class="number">0</span> to <span class="number">10</span> &#123;</span><br><span class="line">  <span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>n + #&#123;$i + <span class="number">1</span>&#125;)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">    <span class="attr">--positionX</span>: #&#123;<span class="variable">$i</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(n + #&#123;<span class="number">10</span> * $i + <span class="number">1</span>&#125;)<span class="selector-pseudo">:nth-child</span>(-n + #&#123;<span class="number">10</span> * ($i + <span class="number">1</span>)&#125;)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">    <span class="attr">--positionY</span>: #&#123;<span class="variable">$i</span>&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>CSS（通过 CSS 则更加直观）</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>n + <span class="number">1</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionX</span>: <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(n + <span class="number">1</span>)<span class="selector-pseudo">:nth-child</span>(-n + <span class="number">10</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionY</span>: <span class="number">0</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>n + <span class="number">2</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionX</span>: <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(n + <span class="number">11</span>)<span class="selector-pseudo">:nth-child</span>(-n + <span class="number">20</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionY</span>: <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>n + <span class="number">3</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionX</span>: <span class="number">2</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(n + <span class="number">21</span>)<span class="selector-pseudo">:nth-child</span>(-n + <span class="number">30</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionY</span>: <span class="number">2</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cell</span><span class="selector-pseudo">:nth-child</span>(<span class="number">10</span>n + <span class="number">4</span>)<span class="selector-pseudo">:hover</span> ~ <span class="selector-class">.con</span> &#123;</span><br><span class="line">  <span class="attr">--positionX</span>: <span class="number">3</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>当鼠标移动到到 cell 1或21……的时候，则会改变<code>.con</code>相应位置信息来达到使样式移动的效果（配合上过渡）。</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/web/css/outher/6.CSS sprite/">CSS spirit</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/css/" rel="tag">css</a>
			</span>
		
	</div>

	

	
		<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210422003327.png"></p>
<figure class="highlight css"><figcaption><span>spirit```即**雪碧图**，或**CSS 精灵**，是一种CSS图像拼合技术，```主要将将图标或图像合并到一张图片中```然后根据背景定位来进行获取，这种方式可以使用```background-position```或```background```属性进行渲染，也可通过工具直接进行框选，如：```http://tools.jb51.net/code/css_sprite```。</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">使用雪碧图的优点是可以减少加载网页时对服务器的请求次次数，可以合并多数的图片和小图标，不需要多个图片分别进行请求，同时```提高了页面的加载速度```。</span><br><span class="line"></span><br><span class="line">&gt; 本文我们通过使用阿里巴巴矢量图库内刺栗壳所提供的 <span class="attribute">icon</span> 来进行演示，图片下载地址：https://gitee.com/analysis-of-river-snow/draw&gt;ing-bed/raw/master/<span class="number">20210421225013</span>.png</span><br><span class="line">&gt; 配合 http://tools.jb51.net/code/css_sprite 进行绘制</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;index&lt;/title&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;http://analysis-of-river-snow.gitee.io/xue-css/less/xue.css&quot;</span>&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;css/style.css&quot;</span>&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://fonts.googleapis.com/css?family=Noto+Sans+SC:100,300,400,500,700,900&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;xu-col-3&quot;</span>&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-1&quot;</span>&gt;&lt;/span&gt;当感到无趣时&lt;/p&gt;</span><br><span class="line">        &lt;h1&gt;让我们与世界交流下&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span> style=<span class="string">&quot;text-align: right&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-2&quot;</span>&gt;&lt;/span&gt;人生本芳华，不如&lt;/p&gt;</span><br><span class="line">        &lt;h2&gt;定个闹钟提醒自己&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-3&quot;</span>&gt;&lt;/span&gt;任何的想法&lt;/p&gt;</span><br><span class="line">        &lt;h2&gt;拥有有实现的可能&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span> style=<span class="string">&quot;text-align: right&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-4&quot;</span>&gt;&lt;/span&gt;所有的肯定&lt;/p&gt;</span><br><span class="line">        &lt;h2&gt;都是失败的积累&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-5&quot;</span>&gt;&lt;/span&gt;满意时的笑容&lt;/p&gt;</span><br><span class="line">        &lt;h2&gt;却抹去不了背后的付出&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span> style=<span class="string">&quot;text-align: right&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-6&quot;</span>&gt;&lt;/span&gt;爆发时&lt;/p&gt;</span><br><span class="line">        &lt;h2&gt;小宇宙内蕴含无限可能&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=<span class="string">&quot;or&quot;</span>&gt;</span><br><span class="line">        &lt;p class=<span class="string">&quot;title&quot;</span>&gt;&lt;span class=<span class="string">&quot;on-btn-7&quot;</span>&gt;&lt;/span&gt;世界很美&lt;/p&gt;</span><br><span class="line">        &lt;h2&gt;打开快手，记录美好时光！&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>css</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.layout</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10%</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#7200ff</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-1</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">13px</span> -<span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">28px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">17px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-2</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">75px</span> -<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">24px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-3</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">136px</span> -<span class="number">19px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">26px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-4</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">200px</span> -<span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">21px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">28px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-5</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">15px</span> -<span class="number">89px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">24px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-6</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">16px</span> -<span class="number">160px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">21px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.on-btn-7</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&quot;https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210421225013.png&quot;</span>) no-repeat;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-position</span>: -<span class="number">76px</span> -<span class="number">91px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*# sourceMappingURL=style.css.map */</span></span><br></pre></td></tr></table></figure>
	

	

</article>





	<span class="different-posts">📖 <a href="/page/23">more posts</a> 📖</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>欢迎来到我的 blog <br><br> 通过 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> 进行构建的，存放在 <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> 上。</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
