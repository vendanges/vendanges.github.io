<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="theme-color" content="#33474d">
	<title>ç¼ç‘¶</title>
	<link rel="stylesheet" href="/css/style.css" />
	
      <link rel="alternate" href="/atom.xml" title="ç¼ç‘¶" type="application/atom+xml">
    
<meta name="generator" content="Hexo 6.1.0"></head>

<body>

	<header class="header">
		<nav class="header__nav">
			
				<a href="/" class="header__link" style="color: #fff">Home</a>
			
				<a href="/archives" class="header__link" style="color: #fff">Archive</a>
			
				<a href="/about" class="header__link" style="color: #fff">About</a>
			
		</nav>
		<!-- <h1 class="header__title"><a href="/">ç¼ç‘¶</a></h1> -->
		<h1 class="header__title"><a href="/"><img style="width: 290px;" src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/202204152017786.png"></a></h1>
		<h2 class="header__subtitle">æ¢¦å…¥ç¼æ¥¼å¯’æœ‰æœˆï¼Œè¡Œè¿‡çŸ³æ ‘å†»æ— çƒŸ</h2>
	</header>

	<main>
		
	<span class="different-posts different-posts_earlier">ğŸ“– <a href="/page/27">earlier posts</a> ğŸ“–</span>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/7.Laravel è¯·æ±‚ä¸Cookie/">Laravel è¯·æ±‚ä¸Cookie</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>åœ¨ç›®å‰ï¼Œè¯·æ±‚å·²ç»è¦†ç›–äº†å‡ ä¹ä¸Šæ‰€æœ‰çš„ç«™ç‚¹ï¼Œå½“ä½ åœ¨æäº¤è¡¨å•çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½ä¼šæˆæ­¤æ¬¡æ“ä½œä¸ºä¸€æ¬¡è¡¨å•è¯·æ±‚ï¼Œè€Œè¡¨å•è¯·æ±‚é€šå¸¸åˆ«è¿ç”¨åˆ°äº†è¡¨å•çš„å¡«å†™ã€ç”¨æˆ·çš„æ³¨å†Œã€æ–‡ç« çš„å‘å¸ƒç­‰ä¸€ç³»åˆ—åœºæ™¯ä¹‹ä¸­ï¼Œæœ¬æ–‡å°†ä¼šå¸¦è¯»è€…è¿›å…¥åˆ°Laravelè¯·æ±‚çš„å®ç°è¿‡ç¨‹ã€‚</p>
<h2 id="URLè¯·æ±‚"><a href="#URLè¯·æ±‚" class="headerlink" title="URLè¯·æ±‚"></a>URLè¯·æ±‚</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210208212257432_147788863.png"><br>é€šå¸¸æˆ‘ä»¬æœ€ä¸ºå¸¸ç”¨çš„æ˜¯é€šè¿‡urlè¿›è¡Œè¯·æ±‚ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¿é—®â€œ<a target="_blank" rel="noopener" href="https://pv.zsun.org.cn/loophole-data/ZSUN-2020-71%E2%80%9D%E5%88%99%E4%BC%9A%E8%AF%B7%E6%B1%82%E8%AF%A5%E7%AB%99%E7%82%B9%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E7%94%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%93%8D%E5%BA%94%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87%E6%8E%A7%E5%88%B6%E5%99%A8+%E8%B7%AF%E7%94%B1%E7%9A%84%E6%96%B9%E5%BC%8F%E8%BF%9B%E8%A1%8C%E5%AE%9E%E7%8E%B0%EF%BC%9A">https://pv.zsun.org.cn/loophole-data/ZSUN-2020-71â€åˆ™ä¼šè¯·æ±‚è¯¥ç«™ç‚¹çš„æœåŠ¡å™¨ï¼Œç”±æœåŠ¡å™¨è¿›è¡Œå“åº”ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å™¨+è·¯ç”±çš„æ–¹å¼è¿›è¡Œå®ç°ï¼š</a></p>
<h3 id="è·å–url"><a href="#è·å–url" class="headerlink" title="è·å–url"></a>è·å–url</h3><h4 id="TestController"><a href="#TestController" class="headerlink" title="TestController"></a>TestController</h4><p>åœ¨ç¼–å†™æ§åˆ¶å™¨ä¹‹å‰æˆ‘ä»¬éœ€è¦è¿›è¡Œåˆ›å»ºï¼Œåˆ›å»ºæ§åˆ¶å™¨çš„æ–¹æ³•æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>artisan</code>è¿›è¡Œåˆ›å»ºï¼Œåˆ›å»ºè¯­æ³•ä¸ºï¼š</p>
<blockquote>
<p>php artisan make:controller TestController</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$url</span> = <span class="variable">$request</span> -&gt; <span class="title function_ invoke__">url</span>();</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;This request url be:&#x27;</span>.<span class="variable">$url</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="web-php"><a href="#web-php" class="headerlink" title="web.php"></a>web.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/url&#x27;</span> ,<span class="string">&#x27;TestController&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="è·å–-id"><a href="#è·å–-id" class="headerlink" title="è·å– id"></a>è·å– id</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210208232604700_350448826.png"><br>åœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å¾ˆå¤šæ¬¡çš„è·å–ç”¨æˆ·è·³è½¬idçš„ç±»ä¼¼éœ€æ±‚ï¼Œè€Œå®ç°è¿™ç§éœ€æ±‚æˆ‘ä»¬ä¹Ÿå¯ä»ç¬¬ä¸€ä¸ªä¾‹å­ä¸­æ…¢æ…¢æ¼”å˜ï¼š</p>
<h4 id="web-php-1"><a href="#web-php-1" class="headerlink" title="web.php"></a>web.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/input/&#123;id&#125;&#x27;</span>, <span class="string">&#x27;TestController@up&#x27;</span>);</span><br><span class="line">```  </span><br><span class="line"><span class="comment">#### TestController</span></span><br><span class="line">```php</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span>(<span class="params">Request <span class="variable">$request</span>, <span class="variable">$id</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·¯ç”±è·å–-id"><a href="#è·¯ç”±è·å–-id" class="headerlink" title="è·¯ç”±è·å– id"></a>è·¯ç”±è·å– id</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210208233421350_1668891816.png"><br>å½“ç„¶æ…¢æ…¢çš„ä½ ä¼šè§‰å¾—è¿˜éœ€è¦å•ç‹¬åˆ›å»ºä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆControllerï¼‰æœ‰ç‚¹ä¸”éå¸¸çš„éº»çƒ¦ï¼Œé‚£ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ç§ç›´æ¥åœ¨è·¯ç”±ä¸­å¼€å†™çš„ï¼š</p>
<h4 id="web-php-2"><a href="#web-php-2" class="headerlink" title="web.php"></a>web.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/input/&#123;id&#125;&#x27;</span>, function (Request <span class="variable">$request</span>, <span class="variable">$id</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$id</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="è¡¨å•è¯·æ±‚"><a href="#è¡¨å•è¯·æ±‚" class="headerlink" title="è¡¨å•è¯·æ±‚"></a>è¡¨å•è¯·æ±‚</h2><p>è¡¨å•è¯·æ±‚å‡ ä¹ä¸Šæ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€ä¸ºå¸¸ç”¨çš„ä¸€ç§ï¼Œé€šå¸¸è¿ç”¨åœ¨æ³¨å†Œã€ç™»å½•ã€å‘å¸ƒæ–‡ç« ç­‰å¤„ç”¨çš„æœ€å¤šï¼Œæœ¬æ–‡æˆ‘ä»¬å°†ä¼šä¸ºè¯»è€…ç¼–å†™ä¸€ä¸ªè¾ƒä¸ºç®€å•çš„è¡¨å•è¯·æ±‚ä¸æ§åˆ¶å™¨è·å–çš„æ“ä½œï¼š</p>
<h3 id="è·å–ä¿¡æ¯"><a href="#è·å–ä¿¡æ¯" class="headerlink" title="è·å–ä¿¡æ¯"></a>è·å–ä¿¡æ¯</h3><h4 id="TestController-1"><a href="#TestController-1" class="headerlink" title="TestController"></a>TestController</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">input</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="x2F-resources-x2F-views-x2F-input-blade-php"><a href="#x2F-resources-x2F-views-x2F-input-blade-php" class="headerlink" title="&#x2F;resources&#x2F;views&#x2F;input.blade.php"></a>&#x2F;resources&#x2F;views&#x2F;input.blade.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;This is be Input up&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;/user/name&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_token&quot;</span> value=<span class="string">&quot;&lt;?php echo csrf_token()?&gt;&quot;</span>&gt;</span><br><span class="line">    Username:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> /&gt;&amp;nbsp;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;up&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h4 id="web-php-3"><a href="#web-php-3" class="headerlink" title="web.php"></a>web.php</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/input&#x27;</span> ,function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;input&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;/user/name&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;uses&#x27;</span>=&gt;<span class="string">&#x27;TestController@store&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h3 id="è¡¨å•æ£€æµ‹"><a href="#è¡¨å•æ£€æµ‹" class="headerlink" title="è¡¨å•æ£€æµ‹"></a>è¡¨å•æ£€æµ‹</h3><h4 id="is-è¡¨å•url"><a href="#is-è¡¨å•url" class="headerlink" title="is (è¡¨å•url)"></a>is (è¡¨å•url)</h4><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210208235555948_1445553544.png"><br>å½“ç„¶ï¼ŒLaravelè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„è¡¨å•æ£€æµ‹çš„æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºæ£€æµ‹è¡¨å•æäº¤æ–¹æ³•ï¼Œæ¯”å¦‚post&#x2F;getçš„ã€ä¹Ÿæœ‰æ£€æµ‹è¡¨å•æäº¤urlçš„ï¼Œä¸‹é¢æˆ‘ä»¬å°†ä¼šåˆ†åˆ«è¿›è¡Œæ¼”ç¤ºï¼š</p>
<h5 id="TestController-2"><a href="#TestController-2" class="headerlink" title="TestController"></a>TestController</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">input</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">is</span>(<span class="string">&#x27;user/name&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;æäº¤æ­£ç¡®&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;æäº¤é”™è¯¯&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæˆ‘ä»¬ä¸»è¦ç”¨äºæ£€æµ‹è¡¨å•æäº¤åçš„ç›®å½•ï¼Œå¦‚æœä¸æ˜¯è¯¥æ§åˆ¶å™¨ä¸­æ‰€æŒ‡å®šçš„ç›®å½•å°†ä¼šå‡ºç°<code>æäº¤é”™è¯¯</code>çš„å­—æ ·ã€‚</p>
<h4 id="isMethod-æ£€æµ‹æäº¤æ–¹æ³•"><a href="#isMethod-æ£€æµ‹æäº¤æ–¹æ³•" class="headerlink" title="isMethod (æ£€æµ‹æäº¤æ–¹æ³•)"></a>isMethod (æ£€æµ‹æäº¤æ–¹æ³•)</h4><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210208234442454_1452459804.png"></p>
<h5 id="TestController-3"><a href="#TestController-3" class="headerlink" title="TestController"></a>TestController</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">input</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">isMethod</span>(<span class="string">&#x27;post&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;æäº¤æ­£ç¡®&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;æäº¤é”™è¯¯&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨Laravelé¡¹ç›®ä¸­ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†<code>isMethod</code>æ–¹æ³•æ¥ç”¨äºåˆ¤æ–­è¡¨å•çš„æäº¤æ–¹æ³•ï¼Œä»¥ä¸Šä¾‹å­æ˜¯é€šè¿‡Postè¿›è¡Œæäº¤ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨getå½¢å¼æäº¤çš„è¯å°†ä¼šå‡ºç°<code>æäº¤é”™è¯¯</code>çš„å­—æ ·ã€‚</p>
<h4 id="boolean-å¸ƒå°”"><a href="#boolean-å¸ƒå°”" class="headerlink" title="boolean (å¸ƒå°”)"></a>boolean (å¸ƒå°”)</h4><p>åœ¨Laravelé¡¹ç›®ä¸­ï¼Œå¸ƒå°”çš„æäº¤æ–¹å¼è¾ƒä¸ºä¸åŒï¼Œå½“ä½ æäº¤trueçš„æ—¶å€™ï¼Œé‚£ä¹ˆä¼šå›æ˜¾ä¸º<code>1</code>,å½“ä½ æäº¤<code>1</code>çš„æ—¶å€™ï¼Œå›æ˜¾çš„è¿˜å°†æ˜¯<code>1</code>ï¼š</p>
<h5 id="TestController-4"><a href="#TestController-4" class="headerlink" title="TestController"></a>TestController</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$request</span>-&gt;<span class="keyword">boolean</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="has"><a href="#has" class="headerlink" title="has"></a>has</h4><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210209012350871_1855190203.png"><br>åœ¨Laravelé¡¹ç›®ä¸­hasä¸»è¦ç”¨äºæ£€æµ‹è¡¨å•æ˜¯å¦å­˜åœ¨ï¼Œä½†æ˜¯ç¿»è¯‘åä»–ä¼šæ˜¾ç¤ºâ€œhasæ–¹æ³•æ¥ç¡®å®šè¯·æ±‚ä¸­æ˜¯å¦å­˜åœ¨è¯¥å€¼â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªæ£€æµ‹è¡¨å•æ˜¯å¦å­˜åœ¨çš„ï¼š</p>
<h5 id="TestController-5"><a href="#TestController-5" class="headerlink" title="TestController"></a>TestController</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$request</span>-&gt;<span class="title function_ invoke__">has</span>(<span class="string">&#x27;sss&#x27;</span>)) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;yes&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;no&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ§åˆ¶å™¨ä¸­ï¼Œæˆ‘ä»¬åœ¨hasæ–¹æ³•åé¢å†™äº†ä¸€ä¸ªåä¸ºâ€sssâ€œçš„å‰ç«¯è¡¨å•ï¼Œå¦‚æœå­˜åœ¨å³è¿”å›yesï¼Œä¸å­˜åœ¨åˆ™è¿”å›noï¼Œé‚£ä¹ˆåœ¨å‰ç«¯é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸å­˜åœ¨nameä¸ºsssçš„è¡¨å•å³inputï¼Œæ‰€ä»¥è¿”å›äº†no.</p>
<h4 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h4><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210209161623448_618513313.png"><br>åœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬æ€»éœ€è¦æ£€æµ‹ä¸€äº›éæ³•è¡¨å•çš„æäº¤ï¼Œå¦‚ï¼Ã—#ï¼@Ã—#ä¸€äº›ä¹±ç æˆ–ç©ºç™½è¡¨å•çš„é—®é¢˜ï¼Œåœ¨Laravelä¹‹ä¸­ä¸å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œéƒ½æ˜¯æ”¯æŒè¿ç®—ç¬¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿ç®—ç¬¦è¿›è¡Œåˆ¤æ–­è¯¥æ•°æ®æ˜¯å¦åœ¨â€œé»‘åå•ä¹‹ä¸­â€</p>
<h5 id="TestController-6"><a href="#TestController-6" class="headerlink" title="TestController"></a>TestController</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$name</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">input</span>(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$name</span> == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;yes&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;no&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šè¿°çš„codeä¸­ï¼Œæˆ‘ä»¬åœ¨TestControlleræ§åˆ¶å™¨ä¸­åŠ å…¥äº†ä¸€ä¸ªè¿ç®—ç¬¦<code>==</code>æ¥åˆ¤æ–­$nameçš„å‡½æ•°æ˜¯å¦å­˜åœ¨ç­‰äº<code>1</code>çš„æƒ…å†µï¼Œå¦‚æœæäº¤æ•°æ®ç­‰äº1åˆ™è¿”å›yesï¼Œå¦åˆ™è¿”å›noã€‚</p>
<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210209174335862_1479935215.png"><br>Cookieæ˜¯åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­è¾ƒä¸ºä¸å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œä½†è¿™ç§æŠ€æœ¯è¿ç”¨åœ¨ä¼šè¯ä¸­è¾ƒä¸ºå¸¸ç”¨ï¼Œå¦‚é’Ÿå±±è®¡ç®—æœºç«¯å£å®‰å…¨è”åˆä¼—æµ‹å¹³å°ä¸­å°±æ˜¯ç”¨CookieæŠ€æœ¯æ¥è¾¾åˆ°ä¼šè¯åœ¨ä¸€å®šæ—¶é—´å†…ä¸ä¼šè¿‡æœŸçš„é—®é¢˜ï¼š</p>
<h3 id="åˆ›å»ºcookie"><a href="#åˆ›å»ºcookie" class="headerlink" title="åˆ›å»ºcookie"></a>åˆ›å»ºcookie</h3><h4 id="TestController-7"><a href="#TestController-7" class="headerlink" title="TestController"></a>TestController</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">http</span>\<span class="title">Cookie</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Response</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span>,Response <span class="variable">$response</span></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºcookie</span></span><br><span class="line">        <span class="variable">$response</span> = <span class="keyword">new</span> <span class="title class_">Response</span>();</span><br><span class="line">        <span class="variable">$response</span>-&gt;<span class="title function_ invoke__">withCookie</span>(<span class="title function_ invoke__">cookie</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å–cookie</span></span><br><span class="line">        <span class="variable">$value</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">cookie</span>(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$value</span>.<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$response</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210209175453037_781730100.png"><br>åœ¨<code>withCookie</code>ä¸­ï¼Œå¦‚æœä½ æ˜¯ä½¿ç”¨PhpStortçš„è¯»è€…ï¼Œè‚¯å®šä¼šæ˜ç™½æ„æ€ï¼Œå› ä¸ºé›†æˆå¼€å‘ç¯å¢ƒä¼šåœ¨å‰é¢åˆ†åˆ«è¿›è¡Œæ ‡æ³¨ã€‚åœ¨æœ¬æ–‡æ¼”ç¤ºä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰è®¾ç½®å…¶Cookieçš„è¿‡æœŸæ—¶é—´ï¼Œè¯»è€…å¦‚æœåœ¨é¡¹ç›®æˆ–å­¦ä¹ è¿‡ç¨‹æœ‰éœ€è¦çš„è¯ï¼Œå¯ä»¥åŠ å…¥ç¬¬ä¸‰é¡¹ï¼Œä¸ºå…¶cookieè®¾ç½®æ—¶é—´ã€‚</p>
<h3 id="è·å–cookie"><a href="#è·å–cookie" class="headerlink" title="è·å–cookie"></a>è·å–cookie</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/7.laravel%20%E8%AF%B7%E6%B1%82%E4%B8%8Ecookie.md/20210209171154421_1187019600.png"><br>åœ¨Laravelé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§å‡¡æ˜¯æ¥è·å–å’Œè®¿é—®cookieå€¼ï¼Œå¯åˆ†åˆ«ä½¿ç”¨è¯·æ±‚ï¼ˆrequestï¼‰æˆ–ä½¿ç”¨CookieFacadeæ¥è®¿é—®ï¼š</p>
<h4 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$value</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">cookie</span>(<span class="string">&#x27;laravel_session&#x27;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$value</span>.<span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="CookieFacade"><a href="#CookieFacade" class="headerlink" title="CookieFacade"></a>CookieFacade</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$values</span> = <span class="title class_">\Illuminate\Support\Facades\Cookie</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;laravel_session&#x27;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$values</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/6.Laravel æ§åˆ¶å™¨/">Laravel æ§åˆ¶å™¨</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>æ§åˆ¶å™¨çš„å­˜åœ¨ä¸»è¦ç”¨äºæ›¿ä»£è·¯ç”±æ–‡ä»¶ä¸­ä»¥é—­åŒ…å½¢å¼æ‰€æœ‰çš„è¯·æ±‚å¤„ç†é€»è¾‘ï¼Œå¯ä»¥ä½¿ç”¨æ§åˆ¶å™¨æ¥ç»„ç»‡è¿™äº›è¡Œä¸ºï¼Œåœ¨MVCæ¡†æ¶ä¹‹ä¸­ï¼Œåˆ†ä¸ºä¸šåŠ¡æ¨¡å‹ï¼ˆMï¼‰ã€ç”¨æˆ·è§†å›¾ï¼ˆVï¼‰ã€æ§åˆ¶å™¨ï¼ˆCï¼‰ï¼Œä½¿ç”¨MVCçš„ç›®çš„æ˜¯å°†Må’ŒVçš„å®ç°ä»£ç åˆ†ç¦»ï¼Œæ§åˆ¶å™¨ç”¨äºç¡®ä¿ä¸šåŠ¡æ¨¡å‹ä»¥åŠç”¨æˆ·è§†å›¾çš„åŒæ­¥ï¼Œä¸€æ—¦ä¸šåŠ¡æ¨¡å‹è¿›è¡Œæ›´æ”¹ï¼Œé‚£ä¹ˆç”¨æˆ·è§†å›¾ä¹Ÿä¼šéšç€æ›´æ”¹ã€‚</p>
<p>æ§åˆ¶å™¨ä¸»è¦å­˜æ”¾åœ¨<code>app/Http/Controllers/</code>ç›®å½•ä¸‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å¹¶ä¸ä¼šç”Ÿæˆï¼Œéœ€è¦ä½¿ç”¨å‘½ä»¤<code>php artisan make:controller TestController</code>è¿›è¡Œåˆ›å»ºï¼Œåœ¨æ­¤ä¼šæœ‰ä¸€ä¸ªå‘½åæ½œè§„åˆ™æ˜¯â€œä½œç”¨+Controllerâ€ï¼Œå¦‚æœ¬æ¬¡çš„æ§åˆ¶å™¨ä½œç”¨æ˜¯æµ‹è¯•åˆ™å‘½åæ–¹å¼å¯ä¸ºâ€œTestControllerâ€å³å¯ï¼Œä¹‹åä¼šåœ¨<code>app/Http/Controller</code>ç›®å½•å†…ç”Ÿæˆè¯¥ç±»ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<h2 id="æ•°æ®ä¼ é€’"><a href="#æ•°æ®ä¼ é€’" class="headerlink" title="æ•°æ®ä¼ é€’"></a>æ•°æ®ä¼ é€’</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/6.laravel%20%E6%8E%A7%E5%88%B6%E5%99%A8.md/20210208003318201_385207825.png"><br>é€šå¸¸æˆ‘ä»¬éœ€è¦å°†å‚æ•°ä¼ é€’åˆ°æ§åˆ¶å™¨ä¸­ï¼Œåœ¨Laravelä¹‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å™¨è¿›è¡Œä¼ é€’ï¼Œæœ¬æ¬¡æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªä¼ é€’idçš„æ•ˆæœï¼š</p>
<h2 id="å‘½åç©ºé—´ï¼ˆä¿—ç§°-â€œè·¯ç”±ç»‘å®šâ€ï¼‰"><a href="#å‘½åç©ºé—´ï¼ˆä¿—ç§°-â€œè·¯ç”±ç»‘å®šâ€ï¼‰" class="headerlink" title="å‘½åç©ºé—´ï¼ˆä¿—ç§° â€œè·¯ç”±ç»‘å®šâ€ï¼‰"></a>å‘½åç©ºé—´ï¼ˆä¿—ç§° â€œè·¯ç”±ç»‘å®šâ€ï¼‰</h2><p>åœ¨å®šä¹‰è·¯ç”±æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¸éœ€è¦å†™å…¥å®Œæ•´çš„æ§åˆ¶å™¨åç§°ï¼Œè¿™æ˜¯å› ä¸º<code>ProuteServiceProvider</code>å‡ ä¹å°†æ‰€æœ‰çš„è·¯ç”±æ–‡ä»¶åŠ è½½åˆ°äº†åŒ…å«åç§°ç©ºé—´çš„è·¯ç”±ç»„ä¸­ã€‚æ¯”å¦‚ä¸€ä¸ªæ§åˆ¶å™¨ç±»çš„å®Œæ•´ç©ºé—´ä¸º<code>namespace App\Http\Controllers;</code>ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥åœ¨è·¯ç”±å™¨ä¸­å†™æˆï¼š</p>
<blockquote>
<p>Route::get(â€˜&#x2F;id&#x2F;{id}â€™, â€˜TestController@indexâ€™);</p>
</blockquote>
<p>æ˜¯å¯ä»¥æ‰¾åˆ°TestControlleræ§åˆ¶å™¨çš„ï¼Œå½“ç„¶å¦‚æœä½ æœ‰ç›¸å…³çš„é¡¹ç›®éœ€è¦æˆ–è‡ªèº«çš„ä¹ æƒ¯ä¹Ÿå¯ä»¥å†™å®Œæ•´çš„è·¯å¾„ï¼Œæµ™æ±Ÿå–å†³äºä½ ã€‚</p>
<h3 id="TestController"><a href="#TestController" class="headerlink" title="TestController"></a>TestController</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">User</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"><span class="variable">$id</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;My is be ID: &quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="web-php"><a href="#web-php" class="headerlink" title="web.php"></a>web.php</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™é‡Œæˆ‘ä»¬è°ƒç”¨çš„TestControlleræ§åˆ¶å™¨çš„@indexæ–¹æ³•</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/id/&#123;id&#125;&#x27;</span>, <span class="string">&#x27;TestController@index&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="å•ä¸ªè¡Œä¸ºæ§åˆ¶å™¨"><a href="#å•ä¸ªè¡Œä¸ºæ§åˆ¶å™¨" class="headerlink" title="å•ä¸ªè¡Œä¸ºæ§åˆ¶å™¨"></a>å•ä¸ªè¡Œä¸ºæ§åˆ¶å™¨</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/6.laravel%20%E6%8E%A7%E5%88%B6%E5%99%A8.md/20210208004550051_89805105.png"><br>å•ä¸ªè¡Œä¸ºæ§åˆ¶å™¨è¯´çš„é€šä¿—ä¸”ç®€å•ä¸€ç‚¹å°±æ˜¯ï¼Œ<strong>è¯¥æ§åˆ¶å™¨åªç”¨äºå¤„ç†ä½ è¿™ä¸€ä¸ªè¯·æ±‚</strong>ï¼Œå®šä¹‰çš„æ–¹æ³•ä¹Ÿä¸æ™®é€šçš„æ§åˆ¶å™¨æœ‰æ‰€ä¸åŒï¼Œæœ€ä¸ºä¸åŒçš„ä¸€ä¸ªç‚¹æ˜¯åœ¨æ–¹æ³•å‰é¢åŠ äº†ä¸¤ä¸ª<code>__</code>ï¼Œå³<code>__invoke</code>å‡½æ•°ï¼š</p>
<h3 id="TestController-1"><a href="#TestController-1" class="headerlink" title="TestController"></a>TestController</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">User</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__invoke</span>(<span class="params"><span class="variable">$id</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;My is be ID: &quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="web-php-1"><a href="#web-php-1" class="headerlink" title="web.php"></a>web.php</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/id/&#123;id&#125;&#x27;</span>, <span class="string">&#x27;TestController&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="è§†å›¾æ§åˆ¶å™¨"><a href="#è§†å›¾æ§åˆ¶å™¨" class="headerlink" title="è§†å›¾æ§åˆ¶å™¨"></a>è§†å›¾æ§åˆ¶å™¨</h2><p>ä¸è·¯ç”±ä¸€æ ·ï¼Œæ§åˆ¶å™¨ä¹Ÿæ‹¥æœ‰ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ï¼Œè€Œå®šä¹‰æ–¹æ³•ä¸è·¯ç”±æ‰€ç›¸å·®æ— å‡ ï¼Œå®ç°å¦‚ä¸‹ï¼Œåœ¨Laravelé¡¹ç›®ä¸­ï¼Œåªéœ€è¦åœ¨æ§åˆ¶å™¨ä¸­æ·»åŠ ä¸€ä¸ªè¿”å›è§†å›¾çš„æ–¹æ³•ä»¥åŠé…ç½®è·¯ç”±å³å¯ï¼š</p>
<h3 id="TestController-2"><a href="#TestController-2" class="headerlink" title="TestController"></a>TestController</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">User</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="web-php-2"><a href="#web-php-2" class="headerlink" title="web.php"></a>web.php</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test&#x27;</span>, <span class="string">&#x27;TestController@index&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>ä¹‹åé€šè¿‡è®¿é—®<code>locahost:8000/test</code>å›æ˜¾çš„è§†å›¾å°†æ˜¯åœ¨<code>resources/</code>ä¸‹çš„<code>welcome.blade.php</code>è§†å›¾æ–‡ä»¶ã€‚</p>
<h2 id="èµ„æºæ§åˆ¶å™¨ï¼ˆå¢åˆ æ”¹æŸ¥-â€œCURDâ€ï¼‰"><a href="#èµ„æºæ§åˆ¶å™¨ï¼ˆå¢åˆ æ”¹æŸ¥-â€œCURDâ€ï¼‰" class="headerlink" title="èµ„æºæ§åˆ¶å™¨ï¼ˆå¢åˆ æ”¹æŸ¥ â€œCURDâ€ï¼‰"></a>èµ„æºæ§åˆ¶å™¨ï¼ˆå¢åˆ æ”¹æŸ¥ â€œCURDâ€ï¼‰</h2><p>åœ¨Laravelä¸­ï¼Œèµ„æºæ§åˆ¶å™¨å°†ç»å…¸çš„å¢åˆ æ”¹æŸ¥ç®€åŒ–æˆäº†ä¸€è¡Œè¡Œæ§åˆ¶å™¨ä»£ç ï¼ŒLaravelä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—çº¦å®šçš„è§„åˆ™ï¼Œè¿™ç§è§„åˆ™å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬çš„ä»£ç å†™çš„æ›´åŠ çš„å®Œç¾ä¸”ä¼˜é›…ï¼Œä»¥ä¸‹æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨<code>Artisan</code>æ¥ç”Ÿæˆä¸€ä¸ªèµ„æºæ§åˆ¶å™¨ï¼Œä½¿ç”¨çš„å‚æ•°ä¸º<code>--resource</code>ï¼š</p>
<blockquote>
<p>php artisan make:controller PostController â€“resource</p>
</blockquote>
<p>è¿™ä¸æ™®é€šçš„æ§åˆ¶å™¨ä¸€æ ·ï¼Œä¼šåœ¨&#96;&#96;app\Http\Controllers`&#96;&#96;ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>PostController</code>çš„æ§åˆ¶å™¨ï¼Œä¸”è‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆäº†CURDæ–¹æ³•ï¼Œ<strong>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹åº”è¯·æ±‚åœ¨è·¯ç”±ä¸­è¿›è¡Œç»‘å®š</strong>ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PostController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Display a listing of the resource.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Show the form for creating a new resource.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Store a newly created resource in storage.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  \Illuminate\Http\Request  $request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">store</span>(<span class="params">Request <span class="variable">$request</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Display the specified resource.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  int  $id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"><span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Show the form for editing the specified resource.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  int  $id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">edit</span>(<span class="params"><span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Update the specified resource in storage.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  \Illuminate\Http\Request  $request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  int  $id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">Request <span class="variable">$request</span>, <span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Remove the specified resource from storage.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  int  $id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">destroy</span>(<span class="params"><span class="variable">$id</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>è¯·æ±‚æ–¹å¼</th>
<th>Route</th>
<th>FA</th>
<th>è·¯ç”±åç§°</th>
</tr>
</thead>
<tbody><tr>
<td>GET</td>
<td>&#x2F;post</td>
<td>æ‰€æœ‰æ•°æ®å±•ç°</td>
<td>index</td>
</tr>
<tr>
<td>GET</td>
<td>&#x2F;post&#x2F;create</td>
<td>æ’å…¥æ•°æ®</td>
<td>create</td>
</tr>
<tr>
<td>POST</td>
<td>&#x2F;post&#x2F;store</td>
<td>å­˜å‚¨åˆšåˆšæ–°æäº¤çš„æ•°æ®</td>
<td>store</td>
</tr>
<tr>
<td>GET</td>
<td>&#x2F;post&#x2F;{id}</td>
<td>æ˜¾ç¤ºæŸä¸ªæ•°æ®</td>
<td>show</td>
</tr>
<tr>
<td>GET</td>
<td>&#x2F;post&#x2F;{id}&#x2F;edit</td>
<td>ä¿®æ”¹æŸä¸ªæ•°æ®</td>
<td>edit</td>
</tr>
<tr>
<td>PUT</td>
<td>&#x2F;post&#x2F;{id}</td>
<td>æ›´æ–°æ•°æ®åº“ä¸­æŸä¸ªèµ„æº</td>
<td>update</td>
</tr>
<tr>
<td>DELETE</td>
<td>&#x2F;post&#x2F;{id}</td>
<td>åˆ é™¤æŸä¸ªæ•°æ®</td>
<td>destory</td>
</tr>
</tbody></table>
<p>å¦‚æœåœ¨è·¯ç”±ä¸­ä½¿ç”¨è¯¥èµ„æºæ§åˆ¶å™¨ä¹Ÿéå¸¸çš„ç®€å•ï¼Œå¯ä»¥åœ¨web.phpç±»ä¸­æ¥ç»‘å®šèµ„æºæ§åˆ¶å™¨å³å¯ï¼š</p>
<blockquote>
<p>Route::resource(â€˜postâ€™, â€˜PostControllerâ€™);</p>
</blockquote>
<h3 id="å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„ä¼ªé€ æ–¹æ³•"><a href="#å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„ä¼ªé€ æ–¹æ³•" class="headerlink" title="å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„ä¼ªé€ æ–¹æ³•"></a>å®é™…å¼€å‘è¿‡ç¨‹ä¸­çš„ä¼ªé€ æ–¹æ³•</h3><p>åœ¨å®é™…å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œå‰ç«¯è¡¨å•æ”¯æŒGET&#x2F;POSTæ–¹æ³•ä½†ä¸æ”¯æŒ<code>PUT/DELETE</code>çš„è¯·æ±‚æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å‰ç«¯ä¸­éœ€è¦ä½¿ç”¨ä¸€ä¸ªBladeæŒ‡ä»¤**@method**æ¥ä½¿ç”¨ä¼ªé€ HTTPåŠ¨ä½œï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;/post/update&quot; method=&quot;POST&quot;&gt;</span><br><span class="line">    @method(&#x27;PUT&#x27;)</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<h3 id="æŒ‡å®šèµ„æºè·¯ç”±"><a href="#æŒ‡å®šèµ„æºè·¯ç”±" class="headerlink" title="æŒ‡å®šèµ„æºè·¯ç”±"></a>æŒ‡å®šèµ„æºè·¯ç”±</h3><p>æŒ‡å®šèµ„æºè·¯ç”±åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¢«å‘½åä¸ºâ€œéƒ¨åˆ†èµ„æºè·¯ç”±â€ï¼Œè¿™é‡Œæˆ‘ä»¬ä»¥ç™½åå•ä¸é»‘åå•ä¸ºä¾‹å­è®©è¯»è€…æ›´åŠ è¿›ä¸€æ­¥ç†è§£ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨æ‰€æœ‰</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">resource</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;PostController&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™½åå• -&gt; Only åªæœ‰â€¦â€¦</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">resource</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;PostController&#x27;</span>)-&gt;<span class="title function_ invoke__">only</span>([</span><br><span class="line">   <span class="string">&#x27;index&#x27;</span> //â€¦â€¦ â€˜index<span class="string">&#x27;, &#x27;</span>show<span class="string">&#x27; &#x27;</span>create<span class="string">&#x27;</span></span><br><span class="line"><span class="string">]);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// é»‘åå• -&gt; except é™¤äº†â€¦â€¦ä»¥å¤–</span></span><br><span class="line"><span class="string">Route::resource(&#x27;</span>post<span class="string">&#x27;, &#x27;</span>PostController<span class="string">&#x27;)-&gt;except([</span></span><br><span class="line"><span class="string">   &#x27;</span>create<span class="string">&#x27;, &#x27;</span>update<span class="string">&#x27; // â€¦â€¦ &#x27;</span>index<span class="string">&#x27;</span></span><br><span class="line"><span class="string">]);</span></span><br></pre></td></tr></table></figure>
<h4 id="ç™½åå•ï¼ˆonlyï¼‰"><a href="#ç™½åå•ï¼ˆonlyï¼‰" class="headerlink" title="ç™½åå•ï¼ˆonlyï¼‰"></a>ç™½åå•ï¼ˆonlyï¼‰</h4><p>ç™½åå•æŒ‡onlyï¼Œä¸­æ–‡è¯‘åä¸º<strong>åª</strong>ï¼Œé¡¾åæ€ä¹‰æŒ‡è¿™ä¸ªå¤„ç†å™¨åŒ…å«ä»€ä¹ˆæ ·çš„è¡Œä¸ºï¼Œåœ¨Laravelä¹‹ä¸­é»˜è®¤è¡Œä¸ºæ˜¯æ‰€æœ‰ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™½åå• -&gt; Only åªæœ‰â€¦â€¦</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">resource</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;PostController&#x27;</span>)-&gt;<span class="title function_ invoke__">only</span>([</span><br><span class="line">   <span class="string">&#x27;index&#x27;</span> //â€¦â€¦ â€˜index<span class="string">&#x27;, &#x27;</span>show<span class="string">&#x27; &#x27;</span>create<span class="string">&#x27;</span></span><br><span class="line"><span class="string">]);</span></span><br></pre></td></tr></table></figure>

<h4 id="é»‘åå•-except"><a href="#é»‘åå•-except" class="headerlink" title="é»‘åå• (except)"></a>é»‘åå• (except)</h4><p>Laravelä¹‹ä¸­çš„exceptå¯ä»¥ç†è§£ä¸ºæ˜¯é»‘åå•ï¼Œä½†åŸæ„æ€æ˜¯â€œé™¤äº†â€¦â€¦ä¹‹å¤–â€ï¼Œæ‰€ä»¥ä»¥ä¸‹ä¾‹å­ä¸ºé™¤äº†createã€updateæ–¹æ³•ï¼ŒPostControllerä¹‹ä¸­çš„èµ„æºè·¯ç”±æˆ‘å…¨è¦ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é»‘åå• -&gt; except é™¤äº†â€¦â€¦ä»¥å¤–</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">resource</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;PostController&#x27;</span>)-&gt;<span class="title function_ invoke__">except</span>([</span><br><span class="line">   <span class="string">&#x27;create&#x27;</span>, <span class="string">&#x27;update&#x27;</span> // â€¦â€¦ <span class="string">&#x27;index&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<h3 id="å‘½åèµ„æºè·¯ç”±"><a href="#å‘½åèµ„æºè·¯ç”±" class="headerlink" title="å‘½åèµ„æºè·¯ç”±"></a>å‘½åèµ„æºè·¯ç”±</h3><p>åœ¨èµ„æºæ§åˆ¶å™¨åç§°å†™å…¥è·¯ç”±çš„æ—¶å€™ï¼Œå½“å¤„ç†éœ€æ±‚è¾ƒå°çš„æƒ…å†µä¸‹è¿˜å¥½ï¼Œä½†ä¸€æ—¦æ•°æ®éå¸¸çš„åºå¤§ï¼Œæˆ‘ä»¬é™¤äº†å¯¹è·¯ç”±è¿›è¡Œåˆ†ç»„ï¼Œä¹Ÿæœ‰ä¸€ä¸ªå‘½åèµ„æºè·¯ç”±çš„æ–¹æ³•ï¼Œåªéœ€è¦ä½¿ç”¨<code>names</code>å³å¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">resource</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;PostController&#x27;</span>)-&gt;<span class="title function_ invoke__">names</span>([</span><br><span class="line">    <span class="string">&#x27;create&#x27;</span> =&gt; <span class="string">&#x27;post.create&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<h4 id="èµ„æºè·¯ç”±å‚æ•°"><a href="#èµ„æºè·¯ç”±å‚æ•°" class="headerlink" title="èµ„æºè·¯ç”±å‚æ•°"></a>èµ„æºè·¯ç”±å‚æ•°</h4><p>ä¸ºäº†è®©å‰ç«¯å˜å¾—æ›´åŠ ç¾å¦™ä¸”æ›´å¥½çš„åˆ†è¾¨ï¼ŒLaravelä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§ç”¨äºå‘½åèµ„æºè·¯ç”±çš„æ–¹æ³•<code>parameters</code>ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">resource</span>(<span class="string">&#x27;post&#x27;</span>, <span class="string">&#x27;PostController&#x27;</span>)-&gt;<span class="title function_ invoke__">parameters</span>([</span><br><span class="line">    <span class="string">&#x27;post&#x27;</span> =&gt; <span class="string">&#x27;test_post&#x27;</span></span><br><span class="line">]);</span><br></pre></td></tr></table></figure>
<p>ä¹‹åå°†ä¼šç”Ÿæˆ<code>/post/&#123;post_test&#125;</code>çš„urlæ„é€ ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/5.Laravel ä¸­é—´ä»¶/">Laravel ä¸­é—´ä»¶</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>åœ¨Laravelä¹‹ä¸­ï¼Œä¸­é—´ä»¶æä¾›äº†ä¸€ç§è¾ƒä¸ºæ–¹ä¾¿çš„æœºåˆ¶æ¥è¿‡æ»¤åº”ç”¨ç¨‹åºçš„HTTPè¯·æ±‚ï¼Œå¦‚æœå­¦ä¹ è¿‡Spring securityçš„è¯»è€…è‚¯å®šä¸é™Œç”Ÿï¼Œå‡å¦‚Larvaelæœ‰ä¸€ä¸ªè®¤è¯èº«ä»½çš„ä¸­é—´ä»¶ï¼Œå¦‚æœæœªç»è¿‡æˆæƒå°±å¯ä»¥è®¿é—®ä¸å¯è®¿é—®çš„å†…å®¹ï¼Œåˆ™ä¼šè¢«é‡å®šå‘è‡³ç™»å½•ç•Œé¢ã€‚<br>åœ¨Laravelä¹‹ä¸­ä¸ä»…ä»…åŒ…å«äº†èº«åˆ†éªŒè¯çš„ä¸­é—´ä»¶ï¼Œè¿˜è‡ªå¸¦äº†CSRFé˜²æŠ¤çš„ä¸­é—´ä»¶ï¼Œè€Œä¸­é—´ä»¶æ‰€åœ¨çš„ç›®å½•å³åœ¨<code>/app/Http/Middleware</code>ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªä¸­é—´ä»¶ï¼š</p>
<blockquote>
<p>php artisan make:middleware MiddleWare</p>
</blockquote>
<p>åœ¨è¿™é‡Œä¹‹ä¸­<strong>ä½œè€…å‡ºç°äº†ä¸€ä¸ªæ½œè§„åˆ™çš„é”™è¯¯</strong>ï¼Œåœ¨åˆ›å»ºä¸­é—´ä»¶çš„è¿‡ç¨‹ä¸­åº”è¯¥ä½¿ç”¨ <code>éœ€æ±‚+ä¸­é—´ä»¶</code>çš„æ½œè§„åˆ™ï¼Œåˆ™æŒ‰ç…§æ½œè§„åˆ™æ¥å‘½åçš„è¯éœ€è¦è¿™æ ·ï¼š<code>IdMiddleware</code></p>
<p>ä¹‹åæˆ‘ä»¬ä¼šå‘ç°ä»–Laravelä¼šåœ¨<code>app/Http/Middleware</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªMiddleWare.phpç±»ï¼Œåœ¨è¿™ä¸ªä¸­é—´ä»¶ä¸­æˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œå†™å…¥ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Middleware</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Closure</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MiddleWare</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Handle an incoming request.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  \Illuminate\Http\Request  $request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  \Closure  $next</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> mixed</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"><span class="variable">$request</span>, <span class="built_in">Closure</span> <span class="variable">$next</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;Is be Middleware&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$next</span>(<span class="variable">$request</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸­é—´ä»¶ä¸­ï¼Œæˆ‘ä»¬æ‰€å®šä¹‰äº†ä¸€ä¸ªå½“å½“å‰idç­‰äº10çš„æƒ…å†µä¸‹ï¼Œå°†ä¼šè¿”å›ä¸€ä¸ª<code>yes</code>ã€‚</p>
<h2 id="æ³¨å†Œä¸­é—´ä»¶"><a href="#æ³¨å†Œä¸­é—´ä»¶" class="headerlink" title="æ³¨å†Œä¸­é—´ä»¶"></a>æ³¨å†Œä¸­é—´ä»¶</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/5.laravel%20%E4%B8%AD%E9%97%B4%E4%BB%B6.md/20210207134622712_464016695.png"><br>åœ¨æ­¤ä¹‹åæˆ‘ä»¬éœ€è¦å»æ³¨å†Œä¸€ä¸ªå…¨å±€çš„ä¸­é—´ä»¶ã€‚å…¨å±€ä¸­é—´ä»¶éœ€è¦åœ¨<code>app/Http/Kernel.php</code>ä¸­è¿›è¡Œã€‚</p>
<h3 id="å…¨å±€æ³¨å†Œ"><a href="#å…¨å±€æ³¨å†Œ" class="headerlink" title="å…¨å±€æ³¨å†Œ"></a>å…¨å±€æ³¨å†Œ</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The application&#x27;s route middleware groups.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@var</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$middlewareGroups</span> = [</span><br><span class="line">    <span class="string">&#x27;web&#x27;</span> =&gt; [</span><br><span class="line">        â€¦â€¦</span><br><span class="line">        <span class="title class_">\App\Http\Middleware\MiddleWare</span>::<span class="variable language_">class</span>,</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>
<p>å…¨å±€æ³¨å†Œå³æ‰€æœ‰è·¯ç”±éƒ½å°†ç»è¿‡çš„ä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>$middlewareGroups</code>ä¸‹è¿›è¡Œæ·»åŠ ä¹‹åè®¿é—®localhost:8000å³å¯æŸ¥çœ‹ä¸­é—´ä»¶æ‰€è¾“å‡ºçš„Hello,world!ã€‚</p>
<h3 id="è·¯ç”±æ³¨å†Œ"><a href="#è·¯ç”±æ³¨å†Œ" class="headerlink" title="è·¯ç”±æ³¨å†Œ"></a>è·¯ç”±æ³¨å†Œ</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/5.laravel%20%E4%B8%AD%E9%97%B4%E4%BB%B6.md/20210207140010765_919321800.png"></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The application&#x27;s route middleware.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * These middleware may be assigned to groups or used individually.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@var</span> array</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$routeMiddleware</span> = [</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    <span class="string">&#x27;hey&#x27;</span> =&gt; <span class="title class_">\App\Http\Middleware\MiddleWare</span>::<span class="variable language_">class</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>åœ¨Kernelç±»ä¸­ï¼Œæˆ‘ä»¬æ³¨å†Œäº†ä¸€ä¸ª<code>MiddleWare</code>åä¸ºçš„ä¸­é—´ä»¶ï¼Œå…¶æ³¨å†Œè¯­æ³•ä¸ºï¼š<code>&#39;id&#39; =&gt; \App\Http\Middleware\MiddleWare::class,</code>ã€‚</p>
<h4 id="æ§åˆ¶å™¨"><a href="#æ§åˆ¶å™¨" class="headerlink" title="æ§åˆ¶å™¨"></a>æ§åˆ¶å™¨</h4><p>è·¯ç”±æ³¨å†Œé•¿ä¼´ç€æ§åˆ¶å™¨ä¸€èµ·è¿›è¡Œï¼Œé€šå¸¸åœ¨Laravelé¡¹ç›®ä¸­æ§åˆ¶å™¨å¹¶ä¸æ˜¯é»˜è®¤å­˜åœ¨çš„ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œç”Ÿæˆï¼š</p>
<blockquote>
<p>php artisan make:controller TestController</p>
</blockquote>
<p>ä¹‹åControlleræ§åˆ¶å™¨å°†ä¼šå­˜æ”¾åœ¨<code>App\Http\Controllers</code>ç›®å½•ä¸‹ï¼Œå¹¶å­˜åœ¨ç€ä¸€ä¸ªTestControllerçš„ç±»ã€‚</p>
<h5 id="TestController"><a href="#TestController" class="headerlink" title="TestController"></a>TestController</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Http</span>\<span class="title">Request</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;Is be Controller&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="web-php"><a href="#web-php" class="headerlink" title="web.php"></a>web.php</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è·¯ç”±å™¨ç»„è¿›è¡Œç»‘å®š</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([<span class="string">&#x27;middleware&#x27;</span> =&gt; [<span class="string">&#x27;hey&#x27;</span>]], function () &#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;test&#x27;</span>,<span class="string">&#x27;TestController@index&#x27;</span>)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/4.Laravel è·¯ç”±/">Laravel è·¯ç”±</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>Laravelè·¯ç”±ä¸Spring bootçš„æ§åˆ¶å™¨ç›¸å·®æ— å‡ ï¼Œç›¸ä¿¡å­¦è¿‡Spring bootçš„è¯»è€…ä¼šæ„Ÿè§‰Laraveléå¸¸çš„å’Œè”¼å¯äº²ï¼Œç”šè‡³æ¯”Spring bootæ›´å¥½ç†è§£ã€‚é€šè¿‡é˜…è¯»å‰é¢çš„Laravelçš„æ–‡ä»¶ç»“æ„æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œåœ¨<code>app/reutes/web.php</code>æ–‡ä»¶ä¸­å®šä¹‰è·¯ç”±ï¼Œåœ¨è¿™é‡Œé¢çš„è·¯ç”±é€šå¸¸éƒ½ä¼šè¢«åˆ†é…ç»™webä¸­é—´ä»¶ç»„<strong>ï¼Œåœ¨ä¸ä¸ºäººçŸ¥çš„æƒ…å†µä¸‹ï¼Œä»–è¿˜æä¾›äº†ä¼šè¯çŠ¶æ€å’ŒCSRFä¿æŠ¤çš„ä½œç”¨</strong>ã€‚</p>
<h2 id="è·¯ç”±çš„å®šä¹‰"><a href="#è·¯ç”±çš„å®šä¹‰" class="headerlink" title="è·¯ç”±çš„å®šä¹‰"></a>è·¯ç”±çš„å®šä¹‰</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/4.laravel%20%E8%B7%AF%E7%94%B1.md/20210207072219299_618828202.png"><br>åœ¨Laravelä¸­ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®€æ´ä¼˜é›…çš„å®šä¹‰è·¯ç”±è¯­æ³•ï¼Œä¸ºï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/hey&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;hello,world!&#x27;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="è§†å›¾è·¯ç”±"><a href="#è§†å›¾è·¯ç”±" class="headerlink" title="è§†å›¾è·¯ç”±"></a>è§†å›¾è·¯ç”±</h3><p>å½“ç„¶æ­¤æ—¶ä½ è§‰å¾—å•çº¯çš„è¿”å›å­—ç¬¦ä¸²å·²ç»å®Œå…¨æ»¡è¶³ä¸äº†éœ€æ±‚äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰ä¸€ä¸ª<strong>è§†å›¾ï¼ˆviewï¼‰</strong>è·¯ç”±ï¼Œéœ€è¦æ³¨æ„çš„è§†å›¾è·¯ç”±é€šå¸¸å­˜æ”¾åœ¨<code>resources/view/</code>ç›®å½•ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;welcome&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ—¶å€™å¦‚æœä½ è®¿é—®<code>localhost:8000</code>åˆ™ä¼šè·³è½¬è‡³<code>/reousces/view/welcome.blade.php</code>æ–‡ä»¶æ‰€å‘ˆç°çš„è§†å›¾ã€‚</p>
<h3 id="é‡å®šå‘è·¯ç”±ï¼ˆredirectï¼‰"><a href="#é‡å®šå‘è·¯ç”±ï¼ˆredirectï¼‰" class="headerlink" title="é‡å®šå‘è·¯ç”±ï¼ˆredirectï¼‰"></a>é‡å®šå‘è·¯ç”±ï¼ˆredirectï¼‰</h3><p>é‡å®šå‘è·¯ç”±å³è®¿é—®$urlåè·³è½¬è‡³å¦å¤–ä¸€ä¸ªurlï¼Œè€Œä¸ä¼šäº§ç”Ÿä»»ä½•çš„æŠ¥é”™å³ç§°ä¹‹ä¸ºâ€œé‡å®šå‘â€ï¼Œé€šä¿—äº†è¯´å°±æ˜¯<strong>ä½ åœ¨ä½ å®¶å¼€äº†æˆ¿é—¨ï¼Œå‘ç°å¤–é¢å¹¶ä¸æ˜¯è‡ªå·±çš„å®¶</strong>å°±ä¸ºé‡å®šå‘ï¼š</p>
<h4 id="é‡å®šå‘åˆ°å¦ä¸€ä¸ªè§†å›¾"><a href="#é‡å®šå‘åˆ°å¦ä¸€ä¸ªè§†å›¾" class="headerlink" title="é‡å®šå‘åˆ°å¦ä¸€ä¸ªè§†å›¾"></a>é‡å®šå‘åˆ°å¦ä¸€ä¸ªè§†å›¾</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">redirect</span>(<span class="string">&#x27;/hey&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>å³è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:8000/hey%EF%BC%8C%E9%87%8D%E5%AE%9A%E5%90%91%E5%88%B0&#39;/&#39;%E6%89%80%E6%98%BE%E7%A4%BA%E7%9A%84%E8%A7%86%E5%9B%BE%60%60%60/resources/view/welcome.blade.php%60%60%60%E3%80%82">http://localhost:8000/heyï¼Œé‡å®šå‘åˆ°&#39;/&#39;æ‰€æ˜¾ç¤ºçš„è§†å›¾```/resources/view/welcome.blade.php```ã€‚</a></p>
<h4 id="é‡å®šå‘åˆ°ä¸Šä¸€ä¸ªé¡µé¢"><a href="#é‡å®šå‘åˆ°ä¸Šä¸€ä¸ªé¡µé¢" class="headerlink" title="é‡å®šå‘åˆ°ä¸Šä¸€ä¸ªé¡µé¢"></a>é‡å®šå‘åˆ°ä¸Šä¸€ä¸ªé¡µé¢</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/hey&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">redirect</span>()-&gt;<span class="title function_ invoke__">back</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>åœ¨Laravelä¹‹ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯é€šè¿‡<code>Route::get</code>çš„æ–¹å¼æ¥è¿›è¡Œé‡å®šå‘ï¼Œè€Œæœ€ç»ˆæ‰§è¡Œé‡å®šå‘çš„æ˜¯<code>return redirect</code>ï¼Œåªä¸è¿‡ç¬¬ä¸€ç§æ–¹æ³•æ›´åŠ çš„ç®€æ´ã€‚</p>
<h2 id="è·¯ç”±å‚æ•°"><a href="#è·¯ç”±å‚æ•°" class="headerlink" title="è·¯ç”±å‚æ•°"></a>è·¯ç”±å‚æ•°</h2><p>è·¯ç”±å‚æ•°é€šå¸¸æ˜¯æŒ‡ç”¨äºä¼ é€’çš„ä¸€äº›ä¿¡æ¯ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«ä¸º<strong>å¿…è¦å‚æ•°ä»¥åŠä¸€ä¸ªå¯é€‰å‚æ•°</strong>ï¼Œæœ¬æ–‡æˆ‘ä»¬ä¸»è¦é€šè¿‡è·å–idä»¥åŠåç§°æ¥è¿›è¡Œä¸åŒçš„æ¼”ç¤ºï¼š</p>
<h3 id="å¿…è¦å‚æ•°"><a href="#å¿…è¦å‚æ•°" class="headerlink" title="å¿…è¦å‚æ•°"></a>å¿…è¦å‚æ•°</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;id/&#123;id&#125;&#x27;</span>, function (<span class="variable">$id</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æˆ‘çš„IDæ˜¯ï¼š&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å¯é€šè¿‡è®¿é—®<code>localhost:8000/id/8012</code>æ¥è®¿é—®è‡ªå·±çš„idï¼Œæ‰€è¿”å›çš„ç»“æœä¹Ÿä¸€å®šæ˜¯<code>æˆ‘çš„IDæ˜¯ï¼š8012</code>ã€‚</p>
<h3 id="å¯é€‰å‚æ•°"><a href="#å¯é€‰å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°"></a>å¯é€‰å‚æ•°</h3><p>å¯é€‰å‚æ•°ä¸å¿…è¦å‚æ•°çš„åŒºåˆ«å°±æ˜¯ï¼Œå¯é€‰å‚æ•°å…è®¸ä½ æäº¤ç©ºå€¼ï¼Œä¹‹åæ‰€è¿”å›çš„ä¸æ˜¯404è€Œæ˜¯é»˜è®¤å®šä¹‰çš„å­—ç¬¦ä¸²æˆ–æ•°å€¼ã€‚å¦‚é€šè¿‡å¿…è¦å‚æ•°æ—¶ï¼Œä½ è®¿é—®<code>localhost:8000/id/</code>åˆ™ä¼šè¿”å›404ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨å¯é€‰å‚æ•°å°†ä¼šè¿”å›é»˜è®¤çš„å€¼ï¼Œå®šä¹‰æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;name?&#125;&#x27;</span>, function (<span class="variable">$name</span> = <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$name</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;name?&#125;&#x27;</span>, function (<span class="variable">$name</span> = <span class="string">&#x27;test&#x27;</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="variable">$name</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä½ å¦‚æœè®¿é—®<code>localhost:8000/user/</code>ä¸ä¼šè¿”å›404,è€Œæ˜¯è¿”å›testä¿¡æ¯ã€‚</p>
<h2 id="è·¯ç”±çº¦æŸ"><a href="#è·¯ç”±çº¦æŸ" class="headerlink" title="è·¯ç”±çº¦æŸ"></a>è·¯ç”±çº¦æŸ</h2><p>è·¯ç”±çº¦æŸå¯åˆ†ä¸ºæ­£åˆ™è¡¨è¾¾å¼çº¦æŸã€å…¨å±€çº¦æŸä¸¤ç§æ–¹å¼ï¼Œå¯ä»¥ç†è§£ä¸ºä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥çº¦æŸå•ä¸ªè·¯ç”±ï¼Œä½¿ç”¨å…¨å±€çº¦æŸæ¥çº¦æŸå…¨éƒ¨è·¯ç”±ï¼š</p>
<h3 id="æ­£åˆ™è¡¨è¾¾å¼çº¦æŸ"><a href="#æ­£åˆ™è¡¨è¾¾å¼çº¦æŸ" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼çº¦æŸ"></a>æ­£åˆ™è¡¨è¾¾å¼çº¦æŸ</h3><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çº¦æŸéœ€è¦é…åˆ<code>where</code>æ¥å®šä¹‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ç”¨äºçº¦æŸè¯¥è·¯ç”±ï¼š</p>
<h4 id="å•ä¸ªå‡½æ•°çº¦æŸ"><a href="#å•ä¸ªå‡½æ•°çº¦æŸ" class="headerlink" title="å•ä¸ªå‡½æ•°çº¦æŸ"></a>å•ä¸ªå‡½æ•°çº¦æŸ</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;id/&#123;id&#125;&#x27;</span>, function (<span class="variable">$id</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æˆ‘çš„IDæ˜¯ï¼š&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">where</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;[0-9]+&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="å¤šä¸ªå‡½æ•°çº¦æŸ"><a href="#å¤šä¸ªå‡½æ•°çº¦æŸ" class="headerlink" title="å¤šä¸ªå‡½æ•°çº¦æŸ"></a>å¤šä¸ªå‡½æ•°çº¦æŸ</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;id&#125;/&#123;name&#125;&#x27;</span>, function (<span class="variable">$id</span>, <span class="variable">$name</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;å½“å‰ç”¨æˆ·IDï¼š&quot;</span>.<span class="variable">$id</span> . <span class="string">&quot;ï¼Œåç§°æ˜¯ï¼š&quot;</span> . <span class="variable">$name</span>;</span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">where</span>([<span class="string">&#x27;id&#x27;</span> =&gt; <span class="string">&#x27;[0-9]+&#x27;</span>, <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;[A-Za-z]+&#x27;</span>]);</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶å¦‚æœä½ è®¿é—®<code>http://localhost:8000/user/1/test</code>å°†ä¼šæ˜¾ç¤ºâ€œå½“å‰ç”¨æˆ·IDï¼š1ï¼Œåç§°æ˜¯ï¼štestâ€ï¼Œä½†æ˜¯å¦‚æœä¸æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼çº¦æŸåˆ™ä¼šå‡ºç°<code>404</code>çš„é”™è¯¯ï¼Œå¦‚<code>http://localhost:8000/user/1s/test</code>ã€‚</p>
<h3 id="å…¨å±€çº¦æŸ"><a href="#å…¨å±€çº¦æŸ" class="headerlink" title="å…¨å±€çº¦æŸ"></a>å…¨å±€çº¦æŸ</h3><p>åœ¨Laravelé¡¹ç›®ä¸­ï¼Œå…¨å±€çº¦æŸç”±<code>app/Providers/RouteServiceProvider.php</code>æ‰€å®šä¹‰ï¼Œå…·ä½“ä¸ºåœ¨19è¡Œå·¦å³ä¹‹ä¸­ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Define your route model bindings, pattern filters, etc.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> void</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">boot</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰idå‡½æ•°ä»…å…è®¸0-9çš„è¾“å…¥å›æ˜¾</span></span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">pattern</span>(<span class="string">&#x27;id&#x27;</span>,<span class="string">&#x27;[0-9]+&#x27;</span>);</span><br><span class="line">    <span class="built_in">parent</span>::<span class="title function_ invoke__">boot</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>routes&#x2F;web.phpæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;id&#125;&#x27;</span>, function (<span class="variable">$id</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æˆ‘çš„IDæ˜¯ï¼š&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ä¹‹åé€šè¿‡<a target="_blank" rel="noopener" href="http://localhost:8000/user/11s%E8%AE%BF%E9%97%AE%E5%88%99%E4%BC%9A%E5%87%BA%E7%8E%B0404%E9%94%99%E8%AF%AF%EF%BC%8C%E5%A6%82%E6%8C%89%E7%85%A7%E5%85%A8%E5%B1%80%E7%BA%A6%E6%9D%9F%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%9A%E4%B9%89%E8%AE%BF%E9%97%AE%60%60%60http://localhost:8000/user/11%60%60%60%E5%88%99%E4%BC%9A%E5%9B%9E%E6%98%BE%E2%80%9C%E6%88%91%E7%9A%84ID%E6%98%AF%EF%BC%9A11%E2%80%9D%E6%95%B0%E6%8D%AE%E3%80%82">http://localhost:8000/user/11sè®¿é—®åˆ™ä¼šå‡ºç°404é”™è¯¯ï¼Œå¦‚æŒ‰ç…§å…¨å±€çº¦æŸæ–‡ä»¶å†…å®šä¹‰è®¿é—®```http://localhost:8000/user/11```åˆ™ä¼šå›æ˜¾â€œæˆ‘çš„IDæ˜¯ï¼š11â€æ•°æ®ã€‚</a></p>
<h2 id="è·¯ç”±å‘½å"><a href="#è·¯ç”±å‘½å" class="headerlink" title="è·¯ç”±å‘½å"></a>è·¯ç”±å‘½å</h2><p>è·¯ç”±å‘½åå¯ä»¥ä¸ºæŒ‡å®šçš„è·¯ç”±ç”Ÿæˆä¸€ä¸ªurlæˆ–è€…é‡å®šå‘ï¼Œå¯ä»¥é€šè¿‡<code>name</code>æ¥æŒ‡å®šè·¯ç”±åç§°ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test&#x27;</span>, function () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;id?&#125;&#x27;</span>, function (<span class="variable">$id</span> = <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;æˆ‘çš„IDæ˜¯ï¼š&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">&#125;)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;user.id&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="è·¯ç”±åç§°å‰ç¼€"><a href="#è·¯ç”±åç§°å‰ç¼€" class="headerlink" title="è·¯ç”±åç§°å‰ç¼€"></a>è·¯ç”±åç§°å‰ç¼€</h3><p>åç»­æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªè·¯ç”±å‰ç¼€ï¼Œè€Œä¸ºäº†ç®€ä¾¿å¼€å‘ï¼ŒLaravelè¿˜æä¾›äº†ä¸€ä¸ªè·¯ç”±åç§°å‰ç¼€ï¼Œæ¥æ–¹ä¾¿æˆ‘ä»¬ä¸è§†å›¾çš„å¯¹æ¥ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([], function () &#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test&#x27;</span>, function () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">name</span>(<span class="string">&#x27;user.&#x27;</span>)-&gt;<span class="title function_ invoke__">group</span>(function () &#123;</span><br><span class="line">        <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;id?&#125;&#x27;</span>, function (<span class="variable">$id</span> = <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;ID is be:&quot;</span> .<span class="variable">$id</span>;</span><br><span class="line">        &#125;)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶æˆ‘ä»¬è¿™è¿˜åŠ ä¸Šäº†è·¯ç”±åˆ†ç»„ï¼Œæ¥è®©ä»£ç çš„å¯è¯»æ€§å’Œå»¶ä¼¸æ‰©å±•æ€§è¿›è¡Œäº†ä¸€ç³»åˆ—çš„ä¼˜åŒ–ï¼Œè€Œè¿™ä¸ªè·¯ç”±å‰ç¼€çš„æœ€åç»“æœä¸º<code>user.id</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­ã€‚</p>
<h3 id="test-blade-php"><a href="#test-blade-php" class="headerlink" title="test.blade.php"></a>test.blade.php</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;&#123;&#123; str_replace(&#x27;_&#x27;, &#x27;-&#x27;, app()-&gt;getLocale()) &#125;&#125;&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;title&gt;Laravel&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Fonts --&gt;</span><br><span class="line">    &lt;link href=<span class="string">&quot;https://fonts.googleapis.com/css?family=Nunito:200,600&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;&#123;&#123;route(&#x27;user.id&#x27;, [&#x27;id&#x27; =&gt; 10])&#125;&#125;&quot;</span>&gt;go&gt;&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="è·¯ç”±åˆ†ç»„"><a href="#è·¯ç”±åˆ†ç»„" class="headerlink" title="è·¯ç”±åˆ†ç»„"></a>è·¯ç”±åˆ†ç»„</h2><p>åœ¨Laravelæ¡†æ¶ä¸­ï¼Œè·¯ç”±åˆ†ç»„å¯ä»¥é€šè¿‡ä½¿ç”¨<code>Route::group</code>å°†ä¸åŒçš„è·¯ç”±åˆ†åˆ«åˆ’åˆ†åœ¨ä¸€èµ·ï¼Œæ¥è®©ä»£ç æ›´åŠ çš„ç®€æ´ä¼˜é›…ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([],function () &#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/test&#x27;</span>, function () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">view</span>(<span class="string">&#x27;test&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;id?&#125;&#x27;</span>, function (<span class="variable">$id</span> = <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;æˆ‘çš„IDæ˜¯ï¼š&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">    &#125;)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;user.id&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="å­åŸŸåè·¯ç”±"><a href="#å­åŸŸåè·¯ç”±" class="headerlink" title="å­åŸŸåè·¯ç”±"></a>å­åŸŸåè·¯ç”±</h2><p>é¡¾åæ€ä¹‰å³ç”¨äºå¤„ç†å­åŸŸåçš„è·¯ç”±ï¼Œå¦‚pv.zsun.org.cnå°±æ˜¯ä¸€ä¸ªå­è·¯ç”±ï¼Œæœ¬æ–‡ä»…ä»…ç”¨äºæ¼”ç¤ºè¯­æ³•ï¼Œè¯¥è¯­æ³•å¹¶ä¸å…·æœ‰å¯æ‰§è¡Œæ€§ï¼Œæƒ³å®ç°çš„è¯»è€…å¯é€šè¿‡é…ç½®æœåŠ¡å™¨åº”ç”¨æ–‡ä»¶å³å¯ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">domain</span>(<span class="string">&#x27;&#123;er&#125;.url.org.cn&#x27;</span>)-&gt;<span class="title function_ invoke__">group</span>(function () &#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;user/&#123;id&#125;&#x27;</span>, function (<span class="variable">$er</span>, <span class="variable">$id</span>) &#123;</span><br><span class="line">       <span class="comment">// code</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;å½“å‰å­åŸŸåä¸ºï¼š&quot;</span>.<span class="variable">$er</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;ç”¨æˆ·IDä¸ºï¼š&quot;</span>.<span class="variable">$id</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="åŸŸåå‰ç¼€"><a href="#åŸŸåå‰ç¼€" class="headerlink" title="åŸŸåå‰ç¼€"></a>åŸŸåå‰ç¼€</h2><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/4.laravel%20%E8%B7%AF%E7%94%B1.md/20210207112951830_1866358753.png"></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">prefix</span>(<span class="string">&#x27;one&#x27;</span>)-&gt;<span class="title function_ invoke__">group</span>(function () &#123;</span><br><span class="line">   <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;two&#x27;</span>, function () &#123;</span><br><span class="line">       <span class="comment">// å³ localhost:8000/one/two</span></span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&quot;one/two&quot;</span>;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>åŸŸåå‰ç¼€å¶å°”ä¼šè®©è¯»è€…äº§ç”Ÿä¸€ä¸çš„è¯¯ä¼šï¼Œå®é™…ä¸ŠåŸŸåå‰ç¼€æŒ‡çš„æ˜¯ä¸€ä¸ªä¸€ä¸ªç›®å½•ä¸‹åŒ…å«ç€çš„ä¸€äº›æ–‡ä»¶ï¼Œä»¥è¿™ä¸ªä¸ºæ¯”å–»å¯èƒ½æ›´åŠ æ–¹ä¾¿è¯»è€…çš„ç†è§£ï¼Œå¦‚ä¸Šè¿°æˆ‘ä»¬æ‰€å†™çš„åŸŸåå‰ç¼€åˆ™æ„ä¸ºï¼š</p>
<blockquote>
<p>one&#x2F;ä¸‹çš„&#x2F;twoï¼Œå³å¯é€šè¿‡<a target="_blank" rel="noopener" href="http://localhost:8000/one/two%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%BD%93%E7%84%B6%E6%88%91%E4%BB%AC%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AAthree">http://localhost:8000/one/twoè¿›è¡Œè®¿é—®ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªthree</a>:</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">prefix</span>(<span class="string">&#x27;one&#x27;</span>)-&gt;<span class="title function_ invoke__">group</span>(function () &#123;</span><br><span class="line">   <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;two&#x27;</span>, function () &#123;</span><br><span class="line">       <span class="comment">// å³ localhost:8000/one/two</span></span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&quot;one/two&quot;</span>;</span><br><span class="line">   &#125;);</span><br><span class="line">   <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;three&#x27;</span>, function () &#123;</span><br><span class="line">       <span class="keyword">echo</span> <span class="string">&quot;one/three&quot;</span>;</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/3.Laravel é¡¹ç›®é…ç½®ä¸æ¨¡å¼/">Laravel é¡¹ç›®é…ç½®ä¸æ¨¡å¼</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<h2 id="é¡¹ç›®é…ç½®"><a href="#é¡¹ç›®é…ç½®" class="headerlink" title="é¡¹ç›®é…ç½®"></a>é¡¹ç›®é…ç½®</h2><h3 id="env"><a href="#env" class="headerlink" title="env"></a>env</h3><p>Laravelçš„é¡¹ç›®é…ç½®ä¸æ¨¡å¼ä¸Java or Java  webå·®ä¸å¤šï¼Œå¯é€šè¿‡<code>.env</code>æ–‡ä»¶è‡ªæ¥é…ç½®å½“å‰é¡¹ç›®çš„ç¯å¢ƒï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯åœ¨composeråˆ›å»ºé¡¹ç›®æ—¶è‡ªåŠ¨è¿›è¡Œåˆ›å»ºçš„ï¼Œå…¶ä¸­<code>.env</code>ä¸‹çš„æ–‡ä»¶éƒ½æ˜¯è‡ªè¿›è¡Œç”Ÿæˆçš„ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ ¹æ®é¡¹ç›®æ‰€éœ€è¿›è¡Œè‡ªå®šä¹‰ï¼Œä»¥ä¸‹æ˜¯<code>.env</code>æ–‡ä»¶å†…å®¹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">APP_NAME=Laravel</span><br><span class="line">APP_ENV=local</span><br><span class="line">APP_KEY=base64:mHuJZujFK7vNFQAK+TqBNYGkw16feddY6Bf6oK8UUtc=</span><br><span class="line">APP_DEBUG=<span class="literal">true</span></span><br><span class="line">APP_URL=http:<span class="comment">//localhost</span></span><br><span class="line"></span><br><span class="line">LOG_CHANNEL=stack</span><br><span class="line"></span><br><span class="line">DB_CONNECTION=mysql</span><br><span class="line">DB_HOST=<span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">DB_PORT=<span class="number">3306</span></span><br><span class="line">DB_DATABASE=laravel</span><br><span class="line">DB_USERNAME=root</span><br><span class="line">DB_PASSWORD=</span><br><span class="line"></span><br><span class="line">BROADCAST_DRIVER=log</span><br><span class="line">CACHE_DRIVER=file</span><br><span class="line">QUEUE_CONNECTION=sync</span><br><span class="line">SESSION_DRIVER=file</span><br><span class="line">SESSION_LIFETIME=<span class="number">120</span></span><br><span class="line"></span><br><span class="line">REDIS_HOST=<span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line">REDIS_PASSWORD=<span class="literal">null</span></span><br><span class="line">REDIS_PORT=<span class="number">6379</span></span><br><span class="line"></span><br><span class="line">MAIL_DRIVER=smtp</span><br><span class="line">MAIL_HOST=smtp.mailtrap.io</span><br><span class="line">MAIL_PORT=<span class="number">2525</span></span><br><span class="line">MAIL_USERNAME=<span class="literal">null</span></span><br><span class="line">MAIL_PASSWORD=<span class="literal">null</span></span><br><span class="line">MAIL_ENCRYPTION=<span class="literal">null</span></span><br><span class="line"></span><br><span class="line">AWS_ACCESS_KEY_ID=</span><br><span class="line">AWS_SECRET_ACCESS_KEY=</span><br><span class="line">AWS_DEFAULT_REGION=us-east-<span class="number">1</span></span><br><span class="line">AWS_BUCKET=</span><br><span class="line"></span><br><span class="line">PUSHER_APP_ID=</span><br><span class="line">PUSHER_APP_KEY=</span><br><span class="line">PUSHER_APP_SECRET=</span><br><span class="line">PUSHER_APP_CLUSTER=mt1</span><br><span class="line"></span><br><span class="line">MIX_PUSHER_APP_KEY=<span class="string">&quot;$&#123;PUSHER_APP_KEY&#125;&quot;</span></span><br><span class="line">MIX_PUSHER_APP_CLUSTER=<span class="string">&quot;$&#123;PUSHER_APP_CLUSTER&#125;&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="config-x2F-database-php"><a href="#config-x2F-database-php" class="headerlink" title="config&#x2F;database.php"></a>config&#x2F;database.php</h3><p>ç›¸ä¿¡å¾ˆå¤šè¯»è€…éƒ½ä½¿ç”¨è¿‡åŸç”Ÿæ€çš„phpå†™webé¡¹ç›®ï¼Œè¿æ¥æ•°æ®åº“çš„è¯­æ³•éƒ½æå…·ç‰¹è‰²ï¼Œåœ¨Laravelé¡¹ç›®ä¸­ï¼ŒLaravelä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªä¸“é—¨çš„æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ç›¸å…³å‚æ•°å³å¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;mysql&#x27;</span> =&gt; [</span><br><span class="line">    <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;mysql&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;url&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DATABASE_URL&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;host&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DB_HOST&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;port&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DB_PORT&#x27;</span>, <span class="string">&#x27;3306&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;database&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DB_DATABASE&#x27;</span>, <span class="string">&#x27;forge&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DB_USERNAME&#x27;</span>, <span class="string">&#x27;forge&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;password&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DB_PASSWORD&#x27;</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;unix_socket&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;DB_SOCKET&#x27;</span>, <span class="string">&#x27;&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;charset&#x27;</span> =&gt; <span class="string">&#x27;utf8mb4&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;collation&#x27;</span> =&gt; <span class="string">&#x27;utf8mb4_unicode_ci&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;prefix&#x27;</span> =&gt; <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;prefix_indexes&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;strict&#x27;</span> =&gt; <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&#x27;engine&#x27;</span> =&gt; <span class="literal">null</span>,</span><br><span class="line">    <span class="string">&#x27;options&#x27;</span> =&gt; <span class="title function_ invoke__">extension_loaded</span>(<span class="string">&#x27;pdo_mysql&#x27;</span>) ? <span class="title function_ invoke__">array_filter</span>([</span><br><span class="line">        PDO::<span class="variable constant_">MYSQL_ATTR_SSL_CA</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;MYSQL_ATTR_SSL_CA&#x27;</span>),</span><br><span class="line">    ]) : [],</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡å¼"><a href="#æ¨¡å¼" class="headerlink" title="æ¨¡å¼"></a>æ¨¡å¼</h2><h3 id="ç»´æŠ¤æ¨¡å¼-down"><a href="#ç»´æŠ¤æ¨¡å¼-down" class="headerlink" title="ç»´æŠ¤æ¨¡å¼ (down)"></a>ç»´æŠ¤æ¨¡å¼ (down)</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/3.laravel%20%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%A8%A1%E5%BC%8F.md/20210207065230658_109968253.png"><br>Laravelç»´æŠ¤æ¨¡å¼å¯ä»¥é€šè¿‡ä½¿ç”¨<code>php artisan down</code>è¿›è¡Œå¼€å¯ï¼Œå¼€å¯åå¦‚æœå†æ¬¡è®¿é—®åˆ™ä¼šå‡ºç°503ï¼šæš‚åœæœåŠ¡çš„å­—æ ·</p>
<h3 id="æ­£å¸¸æ¨¡å¼-ï¼ˆupï¼‰"><a href="#æ­£å¸¸æ¨¡å¼-ï¼ˆupï¼‰" class="headerlink" title="æ­£å¸¸æ¨¡å¼ ï¼ˆupï¼‰"></a>æ­£å¸¸æ¨¡å¼ ï¼ˆupï¼‰</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/markdown/web/php/laravel/3.laravel%20%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE%E4%B8%8E%E6%A8%A1%E5%BC%8F.md/20210207065435553_513893208.png"><br>å½“ç„¶ï¼ŒLaravelä¸ä»…ä»…æ”¯æŒç»´æŠ¤æ¨¡å¼ï¼Œè¿˜æ”¯æŒä¸€ä¸ªæ­£å¸¸æ¨¡å¼ï¼Œè¿™ä¸ªæ¨¡å¼ä¸‹åˆ™ä¼šæ˜¾ç¤ºæ­£å¸¸çš„æ–‡ä»¶å†…ä¿¡æ¯ï¼Œå¯é€šè¿‡<code>php artisan up</code>å¼€å¯ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/23.Laravel Redis&amp;Command and Job/">Laravel Redis&amp;Command</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>Laravel å¯ä»¥é€šè¿‡ Command ä»¥åŠç›¸å…³æ–¹æ³•æ¥è®² Redis è¿›è¡Œå­˜å‚¨å¹¶æ˜ å°„åˆ° MySQL æ•°æ®åº“ä¸­ï¼Œé€šè¿‡ <code>composer require predis/predis</code> å‘½ä»¤æ¥å®‰è£… Laravel Redis çš„æ‰©å±•ï¼Œå‰ææ˜¯åœ¨ PHP å…·æœ‰ redis æ‰©å±•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹æ˜¯å¦å…·æœ‰ Redis çš„æ‰©å±•æˆ‘ä»¬å¯ä»¥é€šè¿‡ ```php -m``` çš„å‘½ä»¤æ¥è¿›è¡ŒæŸ¥çœ‹ï¼Œå¦‚æœæ²¡æœ‰æˆ‘ä»¬å¯ä»¥é€šè¿‡é›†æˆç¯å¢ƒæˆ–è€…ç›´æ¥åˆ° pecl æ‰€æä¾›çš„ PHP æ‰©å±•ä¸‹è½½ç«™ [PECL](https://pecl.php.net/package/redis)ä¸­æ¥è¿›è¡Œä¸‹è½½ï¼Œå¯ä»¥é€šè¿‡ ```php --verion``` æ¥æŸ¥çœ‹å½“å‰çš„ PHP ç±»å‹å’Œå½“å‰ç¯å¢ƒä¿¡æ¯ç­‰ã€‚</span><br></pre></td></tr></table></figure>

<p>æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„ç¤ºä¾‹ï¼Œåœ¨å®‰è£…å®Œ Redis æ‰©å±•åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>.env</code> æ–‡ä»¶ä¸­ä¿®æ”¹ <code>REDIS_PASSWORD</code> ç­‰é…ç½®ï¼Œæ­¤å¤–ï¼Œä¹Ÿå¯ä»¥å»ºç«‹å¤šä¸ª Redis é“¾æ¥ï¼Œä½†å‰ææ˜¯åœ¨ <code>config/database.php</code> ä¸­è¿›è¡Œä¸€å®šçš„é…ç½®ã€‚</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220309210324.png"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>config/database.php</code> ä¸­é…ç½® Redis çš„ç›¸å…³çš„è´¦å·ä¿¡æ¯ï¼Œæ¯”å¦‚è´¦å·å¯†ç å’Œ Key åç­‰ï¼Œéƒ½å¯ä»¥åœ¨ <code>redis</code>  ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;redis&#x27;</span> =&gt; [  </span><br><span class="line">  </span><br><span class="line">    <span class="string">&#x27;client&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_CLIENT&#x27;</span>, <span class="string">&#x27;phpredis&#x27;</span>),  </span><br><span class="line">  </span><br><span class="line">    <span class="string">&#x27;options&#x27;</span> =&gt; [  </span><br><span class="line">        <span class="string">&#x27;cluster&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_CLUSTER&#x27;</span>, <span class="string">&#x27;redis&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;prefix&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_PREFIX&#x27;</span>, <span class="title class_">Str</span>::<span class="title function_ invoke__">slug</span>(<span class="title function_ invoke__">env</span>(<span class="string">&#x27;APP_NAME&#x27;</span>, <span class="string">&#x27;laravel&#x27;</span>), <span class="string">&#x27;_&#x27;</span>).<span class="string">&#x27;_database_&#x27;</span>),  </span><br><span class="line">    ],  </span><br><span class="line">  </span><br><span class="line">    <span class="string">&#x27;default&#x27;</span> =&gt; [  </span><br><span class="line">        <span class="string">&#x27;url&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_URL&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;host&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_HOST&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;password&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_PASSWORD&#x27;</span>, <span class="string">&#x27;redis&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;port&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_PORT&#x27;</span>, <span class="string">&#x27;6379&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;database&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_DB&#x27;</span>, <span class="string">&#x27;14&#x27;</span>),  </span><br><span class="line">    ],  </span><br><span class="line">  </span><br><span class="line">    <span class="string">&#x27;cache&#x27;</span> =&gt; [  </span><br><span class="line">        <span class="string">&#x27;url&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_URL&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;host&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_HOST&#x27;</span>, <span class="string">&#x27;127.0.0.1&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;password&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_PASSWORD&#x27;</span>, <span class="literal">null</span>),  </span><br><span class="line">        <span class="string">&#x27;port&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_PORT&#x27;</span>, <span class="string">&#x27;6379&#x27;</span>),  </span><br><span class="line">        <span class="string">&#x27;database&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;REDIS_CACHE_DB&#x27;</span>, <span class="string">&#x27;15&#x27;</span>),  </span><br><span class="line">    ],  </span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>ä¹‹åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>app/Http/Controllers/</code> ä¸­å®šä¹‰ä¸€ä¸ªåä¸º <code>RedisController.php</code> çš„æ§åˆ¶å™¨ï¼Œå¼•å…¥ <code>Illuminate\Support\Facades\Redis</code> æ‰©å±•å¹¶ä½œä¸º <code>App\Http\Controllers\Controller</code> çš„å»¶ä¼¸ï¼Œå®šä¹‰ä¸¤ä¸ªåŸºç¡€çš„ Redis å­˜å‚¨æ–¹æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Redis</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedisController</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        <span class="title class_">Redis</span>::<span class="title function_ invoke__">set</span>(<span class="string">&#x27;key&#x27;</span>,<span class="string">&#x27;hello,redis!&#x27;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        <span class="variable">$name</span> = <span class="title class_">Redis</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;key&#x27;</span>);  </span><br><span class="line">        <span class="title function_ invoke__">var_dump</span>(<span class="variable">$name</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹‹åï¼Œä¸ºäº†ä½¿å¾—æ–¹æ³•çš„æ­£å¸¸æ‰§è¡Œï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡è·¯ç”±æ¥å®šä¹‰ï¼Œåœ¨ <code>routes/web.php</code> ä¸­å†™å…¥ï¼š</p>
<p> <img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220309210258.png"></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/get&#x27;</span>, <span class="string">&#x27;RedisController@get&#x27;</span>);  </span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/set&#x27;</span>, <span class="string">&#x27;RedisController@set&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>æœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/set">http://127.0.0.1:8000/set</a> å’Œ <a target="_blank" rel="noopener" href="http://127.0.0.1:8000/get">http://127.0.0.1:8000/get</a> æ¥è¿›è¡Œå¯¹ Redis çš„ Set å’Œ Get çš„æ“ä½œã€‚</p>
<p>åŒæ ·çš„ Laravel Predis æ”¯æŒäº† Redis çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é˜…è¯» <a target="_blank" rel="noopener" href="https://www.redis.com.cn/redis-commands.html">Redis å®˜æ–¹æ–‡æ¡£</a> æˆ– <a target="_blank" rel="noopener" href="https://www.redis.com.cn/commands.html">Redis é€ŸæŸ¥è¡¨</a> æ¥é…åˆ Laravel æ¥è¿›è¡Œå®ç°å¯¹ Redis çš„æ“ä½œã€‚</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20220309212434.png"></p>
<p>å¯¹äº <code>hMset</code> ç±»å‹çš„æ’å…¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>Redis:hMset</code> çš„æ–¹å¼æ¥è¿›è¡Œæ’å…¥ï¼Œå¦‚ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Redis</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedisController</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">set</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">        <span class="variable">$key</span> = <span class="string">&#x27;HSET&#x27;</span>;  </span><br><span class="line">        <span class="variable">$value</span>= [  </span><br><span class="line">            <span class="string">&#x27;id&#x27;</span> =&gt;  <span class="string">&#x27;1&#x27;</span>,  </span><br><span class="line">            <span class="string">&#x27;name&#x27;</span> =&gt;  <span class="string">&#x27;test&#x27;</span>,  </span><br><span class="line">            <span class="string">&#x27;mess&#x27;</span> =&gt;  <span class="string">&#x27;This is test&#x27;</span>  </span><br><span class="line"> ];  </span><br><span class="line">        <span class="title class_">Redis</span>::<span class="title function_ invoke__">hMset</span>(<span class="variable">$key</span>,<span class="variable">$value</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Command-amp-Job"><a href="#Command-amp-Job" class="headerlink" title="Command &amp; Job"></a>Command &amp; Job</h2><p>Redis é€šå¸¸æ˜¯ä¸€ä¸ªç¼“å­˜æœåŠ¡ï¼Œä¸»è¦ç”¨äºä½œä¸ºä¸­é—´å±‚è¿›è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ Reids é…åˆ Laravel ä½œä¸ºé˜Ÿåˆ—ï¼Œé€šè¿‡ Laravel é˜Ÿåˆ—æ‰€æ”¯æŒçš„ Command æ¥å°† Redis ä¿¡æ¯æå–åæ˜ å°„åˆ° MySQL æˆ–å…¶ä»–æ•°æ®åº“ä¸­ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦ç†è§£ Laravel é˜Ÿåˆ—ä»¥åŠ Job(å·¥ä½œçº¿ç¨‹) å’Œ Command çš„ä½¿ç”¨ï¼ŒåŒæ ·çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ Controller æ¥è¿›è¡Œè°ƒç”¨ Jobã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Laravel artisan å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œå¹¶å‘½åä¸º <code>RedisJobTest</code> ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:job RedisJobTest</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºå®Œåä»–ä¼šåœ¨ <code>app/Jobs/</code> ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª <code>RedisJobTest.php</code> çš„ PHP ç±»ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é‡Œé¢è¿›è¡Œç¼–è¾‘ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Jobs</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Bus</span>\<span class="title">Queueable</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Queue</span>\<span class="title">ShouldQueue</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Bus</span>\<span class="title">Dispatchable</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Queue</span>\<span class="title">InteractsWithQueue</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Queue</span>\<span class="title">SerializesModels</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Redis</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedisJobTest</span> <span class="keyword">implements</span> <span class="title">ShouldQueue</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="keyword">use</span> <span class="title">Dispatchable</span>, <span class="title">InteractsWithQueue</span>, <span class="title">Queueable</span>, <span class="title">SerializesModels</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$key</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * Create a new job instance. * * <span class="doctag">@return</span> void  </span></span><br><span class="line"><span class="comment"> */</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="keyword">string</span> <span class="variable">$key</span></span>)  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        <span class="comment">// key  </span></span><br><span class="line"> <span class="variable language_">$this</span>-&gt;key = <span class="variable">$key</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * Execute the job. * * <span class="doctag">@return</span> void  </span></span><br><span class="line"><span class="comment"> */</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        <span class="variable">$llen</span>      = <span class="title class_">Redis</span>::<span class="title function_ invoke__">connection</span>()-&gt;<span class="title function_ invoke__">LLEN</span>(<span class="variable">$this</span>-&gt;key);  </span><br><span class="line">        <span class="variable">$lineToint</span> = (<span class="keyword">int</span>)<span class="variable">$llen</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">dump</span>(<span class="variable">$lineToint</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹‹åæˆ‘ä»¬è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªå‘½ä»¤ï¼Œç”¨äºè°ƒç”¨è¯¥é˜Ÿåˆ—ï¼ŒåŒæ ·çš„æˆ‘ä»¬ä¹Ÿä½¿ç”¨ Artisan å‘½ä»¤æ¥è¿›è¡Œåˆ›å»ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:command RedisJobCommand</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨ <code>app/Console/Commands/RedisJobCommand.php</code> ä¸‹ï¼Œæ¥è°ƒç”¨æˆ‘ä»¬çš„å·¥ä½œçº¿ç¨‹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Console</span>\<span class="title class_">Commands</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Jobs</span>\<span class="title">RedisJobTest</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Console</span>\<span class="title">Command</span>;  </span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Log</span>;  </span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedisJobCommand</span> <span class="keyword">extends</span> <span class="title">Command</span>  </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * The name and signature of the console command. * * <span class="doctag">@var</span> string  </span></span><br><span class="line"><span class="comment"> */</span> <span class="keyword">protected</span> <span class="variable">$signature</span> = <span class="string">&#x27;command:redis_job_test&#x27;</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * The console command description. * * <span class="doctag">@var</span> string  </span></span><br><span class="line"><span class="comment"> */</span> <span class="keyword">protected</span> <span class="variable">$description</span> = <span class="string">&#x27;Command description&#x27;</span>;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * Create a new command instance. * * <span class="doctag">@return</span> void  </span></span><br><span class="line"><span class="comment"> */</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        <span class="built_in">parent</span>::<span class="title function_ invoke__">__construct</span>();  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**  </span></span><br><span class="line"><span class="comment"> * Execute the console command. * * <span class="doctag">@return</span> mixed  </span></span><br><span class="line"><span class="comment"> */</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span>(<span class="params"></span>)  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;Redis run start&#x27;</span>;  </span><br><span class="line">  </span><br><span class="line">        <span class="title class_">RedisJobTest</span>::<span class="title function_ invoke__">dispatch</span>(<span class="string">&#x27;SET&#x27;</span>)  </span><br><span class="line">            -&gt;<span class="title function_ invoke__">delay</span>(<span class="title function_ invoke__">now</span>()-&gt;<span class="title function_ invoke__">addMinutes</span>(<span class="number">1</span>));  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;Redis run end&#x27;</span>;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°çš„ Code ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦é€šè¿‡ <code>$signature</code> ç±»å‹æ¥å®šä¹‰ä¸€ä¸ªå‘½ä»¤ï¼ŒåŒæ ·çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ <code>$description</code> æ·»åŠ è¯¥å‘½ä»¤çš„æ–¹æ³•å’Œæè¿°ï¼Œæœ€ååœ¨ <code>handle</code> æ–¹æ³•ä¸­å†™å…¥ <code>RedisJobTest::dispatch</code> æ¥è°ƒç”¨ RedisJobTest å·¥ä½œçº¿ç¨‹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡ä¸Šè¿°çš„æµç¨‹æ¼”ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å·¥ä½œçº¿ç¨‹æ¥å®ç° Redis é”ï¼Œåœ¨ Laravel Job ä¸­çš„ ```handle()``` æ–¹æ³•ä¸‹ï¼Œæ·»åŠ  Redis é”å³å¯ï¼š</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Redis</span>::<span class="title function_ invoke__">throttle</span>(<span class="string">&#x27;key&#x27;</span>)-&gt;<span class="title function_ invoke__">allow</span>(<span class="number">10</span>)-&gt;<span class="title function_ invoke__">every</span>(<span class="number">60</span>)-&gt;<span class="title function_ invoke__">then</span>(function () &#123;</span><br><span class="line">    <span class="comment">// ä»»åŠ¡é€»è¾‘...</span></span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ— æ³•è·å¾—é”...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">release</span>(<span class="number">10</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿° code ä¸­ï¼Œä¸»è¦ Redis ä¸­çš„é¢‘ç‡é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯é™åˆ¶æŒ‡å®šç±»å‹æ¯ 60 ç§’åªæ‰§è¡Œ10æ¬¡ï¼Œå¦‚æœæ²¡æœ‰é”ï¼Œé‚£ä¹ˆä¸€èˆ¬æƒ…å†µä¸‹å°†ä¼šå¯¼è‡´ä»»åŠ¡è¢«æ”¾å›é˜Ÿåˆ—ä½¿å…¶è¢«é‡è¯•ã€‚</p>
<p>åœ¨å¤§é‡çš„æ•°æ®æ¶Œå…¥çš„æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“çš„å´©æºƒä»è€Œå‡ºç°é”™è¯¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ° Redis é”ï¼Œè¿™äº›åœ¨ Laravel ä¸­ä¸»è¦è¢«ç§°ä¹‹ä¸ºé¢‘ç‡é™åˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¿»é˜…å®˜æ–¹æ–‡æ¡£æ¥æ£€ç´¢æˆ‘ä»¬éœ€è¦çš„ <a target="_blank" rel="noopener" href="https://learnku.com/docs/laravel/6.x/queues/5168#6b57e8">é˜Ÿåˆ— | ç»¼åˆè¯é¢˜ |ã€ŠLaravel 6 ä¸­æ–‡æ–‡æ¡£ 6.xã€‹| Laravel China ç¤¾åŒº (learnku.com)</a>ã€‚</p>
<p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨é˜Ÿåˆ—çš„æ—¶å€™å¯¹å…¶è¿›è¡Œå»¶è¿Ÿåˆ†å‘ï¼Œè¿™ä¸»è¦é€šè¿‡ <code>delay</code> æ–¹æ³•æ¥è¿›è¡Œå®ç°ï¼Œè¯¦ç»†çš„å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£çš„æè¿° <a target="_blank" rel="noopener" href="https://learnku.com/docs/laravel/6.x/queues/5168#2d054a">é˜Ÿåˆ— | ç»¼åˆè¯é¢˜ |ã€ŠLaravel 6 ä¸­æ–‡æ–‡æ¡£ 6.xã€‹| Laravel China ç¤¾åŒº (learnku.com)</a>ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/22.Laravel Email è®¤è¯/">Laravel Email è®¤è¯</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>Laravel ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§éå¸¸ç®€ä¾¿çš„æ–¹æ³•æ¥å®ç°å‡º Email è®¤è¯ï¼Œå¾ˆé—æ†¾çš„æ˜¯å®˜æ–¹æ–‡æ¡£æ‰€æä¾›çš„ä¿¡æ¯å¹¶ä¸å®Œæ•´ã€‚</p>
<h2 id="å‘é€"><a href="#å‘é€" class="headerlink" title="å‘é€"></a>å‘é€</h2><h3 id="MustVerifyEmail"><a href="#MustVerifyEmail" class="headerlink" title="MustVerifyEmail"></a>MustVerifyEmail</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ <code>app/User.php</code> åŠ ä¸Š <code>MustVerifyEmail</code> æ¥å£ä½¿è®©å…¶æˆä¸º <code>User.php</code> çš„æ¥å£å³å¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Auth</span>\<span class="title">MustVerifyEmail</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Auth</span>\<span class="title">User</span> <span class="keyword">as</span> <span class="title">Authenticatable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Notifications</span>\<span class="title">Notifiable</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span> <span class="keyword">implements</span> <span class="title">MustVerifyEmail</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="env"><a href="#env" class="headerlink" title=".env"></a>.env</h3><p>å½“é…ç½®æ¥å£ç±»ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½® <code>.env</code> æ–‡ä»¶ï¼Œå¹¶åœ¨æ­¤ä¿®æ”¹å…¶é‚®ç®±çš„æœåŠ¡å™¨ä»¥ç”¨äºå‘é€é‚®ä»¶ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MAIL_DRIVER=<span class="literal">null</span></span><br><span class="line">MAIL_HOST=<span class="literal">null</span></span><br><span class="line">MAIL_PORT=<span class="literal">null</span></span><br><span class="line">MAIL_USERNAME=<span class="literal">null</span></span><br><span class="line">MAIL_PASSWORD=<span class="literal">null</span></span><br><span class="line">MAIL_ENCRYPTION=<span class="literal">null</span></span><br><span class="line">MAIL_FROM_ADDRESS=<span class="literal">null</span></span><br><span class="line">MAIL_FROM_NAME=<span class="string">&quot;$&#123;APP_NAME&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¿æŠ¤è·¯ç”±"><a href="#ä¿æŠ¤è·¯ç”±" class="headerlink" title="ä¿æŠ¤è·¯ç”±"></a>ä¿æŠ¤è·¯ç”±</h3><p>Laravel çš„ <code>Auth\VerificationConteroller</code> ç±»åŒ…å«äº†å‘é€éªŒè¯é“¾æ¥å’Œçœ‹éªŒè¯ Email çš„å¿…è¦é€»è¾‘ã€‚è¿™éƒ½å°†é€šè¿‡ <code>verify</code> é€‰é¡¹ä¼ é€’ç»™ <code>Auth::routes</code>æ–¹æ³•ä¸­ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨ <code>web.php</code> ä¸­å¢åŠ ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| Web Routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| Here is where you can register web routes for your application. These</span></span><br><span class="line"><span class="comment">| routes are loaded by the RouteServiceProvider within a group which</span></span><br><span class="line"><span class="comment">| contains the &quot;web&quot; middleware group. Now create something great!</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Auth</span>::<span class="title function_ invoke__">routes</span>([<span class="string">&#x27;verify&#x27;</span>=&gt;<span class="literal">true</span>]);</span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">group</span>([],function () &#123;</span><br><span class="line">    <span class="title class_">Route</span>::<span class="title function_ invoke__">get</span>(<span class="string">&#x27;/home&#x27;</span>, <span class="string">&#x27;HomeController@space&#x27;</span>)-&gt;<span class="title function_ invoke__">name</span>(<span class="string">&#x27;home&#x27;</span>)-&gt;<span class="title function_ invoke__">middleware</span>(<span class="string">&#x27;verified&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬åœ¨ get è·¯ç”±ååŠ å…¥ <code>middleware(&#39;verified&#39;)</code> æ–¹æ³•åï¼Œå°†ä¼šè‡ªåŠ¨éªŒè¯å½“å‰ç”¨æˆ·ä½¿ç”¨é‚®ç®±æ˜¯å¦ç»è¿‡éªŒè¯ï¼Œé€šè¿‡éªŒè¯çš„ç”¨æˆ·å°†ä¼šåœ¨ <code>users</code> æ•°æ®åº“è¡¨ä¸­ <code>email_verified_at</code>å­—æ®µä¸­æ·»åŠ å…¶éªŒè¯æ—¶é—´ã€‚</p>
<h3 id="éªŒè¯é‡å®šå‘"><a href="#éªŒè¯é‡å®šå‘" class="headerlink" title="éªŒè¯é‡å®šå‘"></a>éªŒè¯é‡å®šå‘</h3><p>å¦‚æœè¦è®¾ç½®éªŒè¯å®Œæˆåä¸»è¦é€šè¿‡ <code>app/Http/Controllers/Auth/VerificationController.php</code> ç±»ä¸­çš„ <code>$redirectTo</code> å±æ€§æ¥è¿›è¡Œè®¾ç½®ï¼Œé»˜è®¤çš„æ˜¯è·³è½¬è‡³ç”¨æˆ·çš„ä¸ªäººç©ºé—´ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Http</span>\<span class="title class_">Controllers</span>\<span class="title class_">Auth</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>\<span class="title">Controller</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Providers</span>\<span class="title">RouteServiceProvider</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Auth</span>\<span class="title">VerifiesEmails</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VerificationController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    |--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">    | Email Verification Controller</span></span><br><span class="line"><span class="comment">    |--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    | This controller is responsible for handling email verification for any</span></span><br><span class="line"><span class="comment">    | user that recently registered with the application. Emails may also</span></span><br><span class="line"><span class="comment">    | be re-sent if the user didn&#x27;t receive the original email message.</span></span><br><span class="line"><span class="comment">    |</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">use</span> <span class="title">VerifiesEmails</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Where to redirect users after verification.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@var</span> string</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$redirectTo</span> = <span class="title class_">RouteServiceProvider</span>::<span class="variable constant_">HOME</span>;</span><br><span class="line"></span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœåœ¨ç™»å½•åéªŒè¯é‚®ç®±æ—¶å‡ºé”™ï¼Œå¯é€šè¿‡ä¸‹è¿°ä¸¤æ¡ <code>artisan</code> å‘½ä»¤æ¥æ¸…ç†ä¸‹ Laravel ç¼“å­˜ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php artisan config:cache</span><br><span class="line">php artisan cache:clear</span><br></pre></td></tr></table></figure>

<h2 id="æ–‡æœ¬"><a href="#æ–‡æœ¬" class="headerlink" title="æ–‡æœ¬"></a>æ–‡æœ¬</h2><h3 id="é‚®ç®±éªŒè¯"><a href="#é‚®ç®±éªŒè¯" class="headerlink" title="é‚®ç®±éªŒè¯"></a>é‚®ç®±éªŒè¯</h3><h4 id="Notifications"><a href="#Notifications" class="headerlink" title="Notifications"></a>Notifications</h4><p>åœ¨ Laravel ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>php artisan make:notification VerifyEmail</code> æ¥æ–°å»ºä¸€ä¸ª VerifyEmail é‚®ä»¶é€šçŸ¥ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä»–é»˜è®¤å­˜å‚¨åœ¨äº† <code>vendor/laravel/framework/src/Illuminate/Auth/Notifications/VerifyEmail.php</code> ä¸‹ã€‚</p>
<p>æ­¤  æ—¶åœ¨ <strong>toMail</strong> æ–¹æ³•ä¸‹ï¼Œæ¥è‡ªå®šä¹‰é‚®ä»¶ä¸­çš„ç”¨è¯­ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> (<span class="keyword">new</span> <span class="title class_">MailMessage</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">greeting</span>(<span class="string">&#x27;Hello!&#x27;</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">line</span>(<span class="string">&#x27;One of your invoices has been paid!&#x27;</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">action</span>(<span class="string">&#x27;View Invoice&#x27;</span>, <span class="variable">$url</span>)</span><br><span class="line">            -&gt;<span class="title function_ invoke__">line</span>(<span class="string">&#x27;Thank you for using our application!&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="sendEmailVerificationNotification"><a href="#sendEmailVerificationNotification" class="headerlink" title="sendEmailVerificationNotification"></a>sendEmailVerificationNotification</h4><p>å½“ä½ é€šè¿‡ä½¿ç”¨ <code>artisan</code> å‘½ä»¤åˆ›å»ºä¸€ä¸ªé‚®ä»¶é€šçŸ¥åï¼Œå¹¶ä¸ä»£è¡¨å·²ç»å®Œæˆäº†ï¼Œè¿˜éœ€è¦åœ¨ <code>app/User.php</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>sendEmailVerificationNotification</code> å³â€œå‘é€ç”µå­é‚®ä»¶éªŒè¯é€šçŸ¥â€æ–¹æ³•ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Notifications</span>\<span class="title">VerifyEmail</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Auth</span>\<span class="title">MustVerifyEmail</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Auth</span>\<span class="title">User</span> <span class="keyword">as</span> <span class="title">Authenticatable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Notifications</span>\<span class="title">Notifiable</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span> <span class="keyword">implements</span> <span class="title">MustVerifyEmail</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sendEmailVerificationNotification</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">notify</span>(<span class="keyword">new</span> <span class="title class_">VerifyEmail</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="notifications"><a href="#notifications" class="headerlink" title="notifications"></a>notifications</h4><p>æ—¢ç„¶å½“ Notifications ä»¥åŠ sendEmailVerificationNotification éƒ½é…ç½®å®Œæˆäº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ¥è‡ªå®šä¹‰é‚®ä»¶çš„æ¨¡æ¿ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan vendor:publish --tag=laravel-notifications</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ä¼šå°† <code>/vendor/laravel/framework/src/Illuminate/Notifications/resources/views</code> å†…å®¹å¤åˆ¶åˆ° <code>/resources/views/vendor/notifications</code> ä¸‹ã€‚</p>
<p>å½“ç„¶ä½ å¦‚æœéœ€è¦å°†æ‰€æœ‰ <del>Markdown</del> é€šçŸ¥ç»„ä»¶å¯¼å‡ºè‡ªå·±çš„é¡¹ç›®ä¸­è¿›è¡Œè‡ªå®šä¹‰ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan vendor:publish --tag=laravel-mail</span><br></pre></td></tr></table></figure>

<p>Laravel ä¼šå°†<code>/vendor/laravel/framework/src/Illuminate/Mail/resources/views</code>ç›®å½•å†…å®¹å¤åˆ¶åˆ°<code>/resources/views/vendor/mail</code>ä¸‹ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥ç›®å½•ä¼šåŒ…å«é™¤ç»„ä»¶ä¹‹å¤–çš„ <code>resources/views/vendor/mail/html/themes</code>ç›®å½•ï¼Œè¯¥ç›®å½•ä¸‹å­˜å‚¨ç€é»˜è®¤çš„ä¸»é¢˜æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥è‡ªè¡Œå®šä¹‰å¹¶åˆ†äº«ã€‚</p>
<h3 id="é‡ç½®å¯†ç "><a href="#é‡ç½®å¯†ç " class="headerlink" title="é‡ç½®å¯†ç "></a>é‡ç½®å¯†ç </h3><h4 id="ResetPassword"><a href="#ResetPassword" class="headerlink" title="ResetPassword"></a>ResetPassword</h4><p>åœ¨è¿›è¡Œä¸‹ä¸€æ­¥ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ¥å¯¹é‡ç½®å¯†ç çš„æ–‡æœ¬æ¨¡æ¿è¿›è¡Œæ›´æ”¹ï¼Œå’Œ <strong>é‚®ç®±éªŒè¯</strong> ç›¸å·®æ— å‡ ï¼Œéœ€è¦é€šè¿‡ä½¿ç”¨ <code>artisan</code> å‘½ä»¤ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:notification ResetPassword</span><br></pre></td></tr></table></figure>

<p>ä¹‹åå°†ä» <code>vendor/laravel/framework/src/Illuminate/Auth/Notifications/ResetPassword.php</code> æ–‡ä»¶å¤åˆ¶åˆ° <code>app/Notifications/ResetPassword.php</code>ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‚è€ƒ <code>vendor</code> å†…çš„æ–‡ä»¶ç»“æ„å†™å…¥<code>app/Notifications</code>ç›®å½•ä¸‹ã€‚</p>
<h4 id="sendPasswordResetNotification"><a href="#sendPasswordResetNotification" class="headerlink" title="sendPasswordResetNotification"></a>sendPasswordResetNotification</h4><p>å½“ <strong>ResetPassword</strong> å‡†å¤‡å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡åœ¨<code>app/User.php</code>æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª<code>sendPasswordResetNotification</code>æ–¹æ³•ï¼Œæ¥ä½¿å¾— <strong>ResetPassword</strong> é€šçŸ¥è¢«æ­£å¸¸ä½¿ç”¨ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Notifications</span>\<span class="title">VerifyEmail</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Notifications</span>\<span class="title">ResetPassword</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Contracts</span>\<span class="title">Auth</span>\<span class="title">MustVerifyEmail</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Foundation</span>\<span class="title">Auth</span>\<span class="title">User</span> <span class="keyword">as</span> <span class="title">Authenticatable</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Notifications</span>\<span class="title">Notifiable</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Authenticatable</span> <span class="keyword">implements</span> <span class="title">MustVerifyEmail</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sendPasswordResetNotification</span>(<span class="params"><span class="variable">$token</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">notify</span>(<span class="keyword">new</span> <span class="title class_">ResetPassword</span>(<span class="variable">$token</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/21.Laravel Eloquent åºåˆ—åŒ–/">Laravel Eloquent åºåˆ—åŒ–</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>åœ¨æ„å»º JSON API çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä½¿ç”¨ Eloquent æ‰€æä¾›çš„ä¸€äº›ç®€ä¾¿æ–¹æ³•æ¥è¿›è¡Œå®ç°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®è¿”å›çš„ <code>header</code>æ¥è¿›è¡Œè¿”å› <strong>å…·æœ‰äººç±»å¯è¯»</strong> çš„è¾“å‡ºã€‚</p>
<p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥åºåˆ—åŒ–ä¸ºæ•°ç»„æˆ–è€…å­—ç¬¦ä¸²å½¢å¼ï¼Œ<strong>ä½†å®é™…ä¸Šï¼Œå¹¶ä¸æ˜¯è¿™æ ·</strong> ç›´æ¥è¿”å› <code>return $data</code> å³å¯è¿”å›å‡º jsonã€‚å› æ­¤å®˜æ–¹æ–‡æ¡£æ‰€æä¾›çš„ <code>toJson \ toArray</code>éƒ½è¾“å‡ºçš„æ˜¯<code>Json</code>æ ¼å¼å†…å®¹ã€‚</p>
<p>ä¸”è¿”å›çš„æ•°æ®ä¸­æ–‡å‡ä¸æ˜¯äººç±»å…·æœ‰å¯è¯»æ€§çš„ <code>\x000</code> æ ¼å¼ï¼Œå³ <strong>Unicode16</strong> æ ¼å¼ï¼Œæ— è®ºä½ åœ¨è¿”å›ä¸­æ·»åŠ  <strong>JSON_UNESCAPED_UNICODE</strong> éƒ½æ— æµäºäº‹ã€‚</p>
<h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$issue</span> = <span class="title class_">IssuesModel</span>::<span class="title function_ invoke__">all</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_ invoke__">response</span>()-&gt;<span class="title function_ invoke__">json</span>(<span class="variable">$issue</span>,<span class="number">200</span>,[<span class="string">&#x27;Content-Type&#x27;</span>=&gt;<span class="string">&#x27;application/json;charset=UTF-8&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Charset&#x27;</span>=&gt;<span class="string">&#x27;utf-8&#x27;</span>],</span><br><span class="line">        JSON_UNESCAPED_UNICODE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ä»–è¿”å›çš„æ˜¯ä¸€ä¸ª <strong>å…·æœ‰äººç±»å¯è¯»</strong> çš„ JSON ç±»å‹æ–‡æœ¬ï¼Œå¦‚ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;titles&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;datetimes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-17 03:27:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;names&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-17 03:27:42&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-17 03:27:42&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="é»‘åå•ä¸ç™½åå•"><a href="#é»‘åå•ä¸ç™½åå•" class="headerlink" title="é»‘åå•ä¸ç™½åå•"></a>é»‘åå•ä¸ç™½åå•</h2><h3 id="é»‘åå•"><a href="#é»‘åå•" class="headerlink" title="é»‘åå•"></a>é»‘åå•</h3><p>åœ¨å®˜æ–¹çš„æ–‡æ¡£ä¸­ï¼Œé»‘åå•è¢«ç§°ä¹‹ä¸ºæ›´å…·ç›´è§‚çš„ â€œ <strong>éšè—è¾“å‡º</strong> â€ï¼Œå³ä»å­—é¢æ„æ€ä¸Šç†è§£ä¸è¾“å‡ºå½“å‰å±æ€§çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦è¾“å‡ºçš„ <code>Eloquent ORM æ¨¡å‹</code> ä¸­ä¿æŠ¤å±æ€§ä¸­æ·»åŠ ä¸€ä¸ª <code>$hidden</code> å±æ€§å³å¯ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestModel</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$hidden</span> = [<span class="string">&#x27;titles&#x27;</span>,<span class="string">&#x27;datetimes&#x27;</span>,<span class="string">&#x27;names&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ç›¸åº”çš„ json å¯¹è±¡ä¹Ÿä¸ä¼šè¿›è¡Œè¾“å‡ºï¼Œå¦‚åŸå…ˆçš„ <code> [&#39;titles&#39;,&#39;datetimes&#39;,&#39;names&#39;]</code> éƒ½ä¸ä¼šåœ¨ä¸‹è¿°çš„è¿”å›å“åº”ä¸­ä¸ä¼šè¾“å‡ºã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-17 03:27:42&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-17 03:27:42&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;â€¦â€¦&quot;</span><span class="punctuation">:</span> <span class="keyword">null</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h3 id="ç™½åå•"><a href="#ç™½åå•" class="headerlink" title="ç™½åå•"></a>ç™½åå•</h3><p>ç™½åå•åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿè¢«ç§°ä¹‹ä¸º â€œç™½åå•â€ï¼Œå› æ­¤åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§æ›´ä¸ºç›´è§‚çš„æ–¹æ³•æ¥ä»¥ â€œ <strong>éœ€è¦è¾“å‡ºçš„å¯¹è±¡</strong> â€ æ¥æ›´åŠ ç›´è§‚çš„ç†è§£ã€‚ç™½åå•çš„è¾“å‡ºä¹Ÿéå¸¸ç®€å•ï¼Œå’Œä¸Šè¿°æ­¥éª¤ä¸€æ ·åœ¨ <code>Eloquent ORM æ¨¡å‹</code>ä¸­æ·»åŠ ä¸€ä¸ª<code>$visible</code>ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="variable">$visible</span> = [<span class="string">&#x27;titles&#x27;</span>,<span class="string">&#x27;datetimes&#x27;</span>,<span class="string">&#x27;names&#x27;</span>];</span><br></pre></td></tr></table></figure>

<p>å› æ­¤è¾“å‡ºçš„ä¹Ÿæ˜¯åªæœ‰ç›¸åº”çš„ json å¯¹è±¡ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;titles&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;datetimes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2021-05-17 03:27:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;names&quot;</span><span class="punctuation">:</span> <span class="string">&quot;â€¦â€¦&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/20.Laravel Flysystem/">Laravel Flysystem</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>Laravel é€šè¿‡ Frank de Jonge å†…çš„ Flysystem æ‰©å±•åŒ…ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„æ–‡ä»¶ç³»ç»ŸæŠ½è±¡æ¦‚å¿µã€‚é…ç½® Flysystem çš„é…ç½®åœ¨<code>config/filesystem.php</code>ä¸­ï¼Œå†æ¬¡æˆ‘ä»¬å¯ä»¥é…ç½®æ‰€æœ‰çš„æ–‡ä»¶å­˜å‚¨ä½ç½®ä»¥åŠæ–‡ä»¶ç£ç›˜ã€‚</p>
<h2 id="public"><a href="#public" class="headerlink" title="public"></a>public</h2><p>public ç£ç›˜è¢«ç§°ä¹‹ä¸ºâ€œå…¬å…±ç£ç›˜â€ï¼Œå› æ­¤ä»–ä¸»è¦é€‚ç”¨ä¸å…¬å¼€çš„è®¿é—®æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ç”±æœ¬åœ°ï¼ˆlocalï¼‰è¿›è¡Œé©±åŠ¨ï¼Œå¹¶å­˜å‚¨åœ¨<code>storage/app/publi</code>ç›®å½•ä¸‹ã€‚å¦‚æœéœ€è¦è®©æ­¤åœ¨ç½‘ç»œæƒ…å†µä¸‹ä¹Ÿå¯ä»¥è®¿é—®ï¼Œéœ€è¦åˆ›å»º<code>public/storage</code>è‡³<code>storaage/app/public</code>çš„ç¬¦å·é“¾æ¥ã€‚</p>
<blockquote>
<p>è¿™ç§æ–¹å¼å¯ä»¥å°†å…¬å¼€æ–‡ä»¶éƒ½ä¿å­˜åœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œä»¥åŠåœ¨ä½¿ç”¨åœæœºæ—¶é—´éƒ¨ç½²æ—¶å¯ä»¥è½»æ¾åœ¨ä¸åŒçš„éƒ¨ç½²ä¹‹é—´å…±äº«è¿™äº›æ–‡ä»¶ã€‚</p>
</blockquote>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ ä¸‹è¿° artisan å‘½ä»¤æ¥åˆ›å»ºç¬¦å·é“¾æ¥ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">php artisan storage:<span class="built_in">link</span></span></span><br><span class="line">The [public/storage] directory has been linked.</span><br></pre></td></tr></table></figure>

<h3 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h3><p>åŒæ ·çš„åœ¨ public ä¸­ï¼Œå¯è§è¡Œä¸ºç›®å½•çš„ 755(æ‹¥æœ‰è¯»ã€å†™ã€æ‰§è¡Œæƒé™)å’Œæ–‡ä»¶çš„644(æ‹¥æœ‰è¯»å†™æƒé™)ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä¿®æ”¹<code>filesystem</code>é…ç½®æ–‡ä»¶ä¸­çš„æƒé™æ˜ å°„ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;local&#x27;</span> =&gt; [</span><br><span class="line">    <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;local&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;root&#x27;</span> =&gt; <span class="title function_ invoke__">storage_path</span>(<span class="string">&#x27;app&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;permissions&#x27;</span> =&gt;[</span><br><span class="line">        <span class="string">&#x27;file&#x27;</span>=&gt;[</span><br><span class="line">            <span class="string">&#x27;public&#x27;</span>=&gt;<span class="number">0600</span>,</span><br><span class="line">            <span class="string">&#x27;private&#x27;</span>=&gt;<span class="number">0700</span></span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°é…ç½®ä¸­ï¼Œæˆ‘ä»¬å°† &#x2F;public èµ‹äºˆäº†<code>0600</code>å³åªæœ‰è¯»å†™æƒé™ï¼Œè€Œåœ¨ &#x2F;private ç›®å½•ä¸‹åˆ™èµ‹äºˆäº† <code>0700</code>çš„å¯è¯»ã€å†™ã€æ‰§è¡Œæƒé™ã€‚</p>
<h2 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a>æ–‡ä»¶ä¸Šä¼ </h2><h3 id="local"><a href="#local" class="headerlink" title="local"></a>local</h3><p>åœ¨ Laravel ä¸­ï¼Œè¦å®ç°æ–‡ä»¶çš„ä¸Šä¼ éœ€è¦é€šè¿‡ä½¿ç”¨ <code>file</code>ä»¥åŠ<code>store</code>çš„æ­é…ï¼Œé€šè¿‡ <code>file</code>æ¥å‘Šè¯‰ Laravel:â€ä½ éœ€è¦ä¸Šä¼ è°ï¼ŒåŠè·å–è°çš„è¡¨å•â€ã€‚è€Œ<code>store</code>åˆ™æ˜¯å‘Šè¯‰ Laravel ä½ éœ€è¦å­˜å‚¨åœ¨å“ªä¸ª<strong>ç›®å½•ä¸‹</strong>ã€‚</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//web.php</span></span><br><span class="line"><span class="title class_">Route</span>::<span class="title function_ invoke__">post</span>(<span class="string">&#x27;/upload&#x27;</span>,<span class="string">&quot;PostController@update&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;--inbar.blade.php--&#125;&#125;</span><br><span class="line">&lt;form action=<span class="string">&quot;/upload&quot;</span> method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    @csrf</span><br><span class="line">    &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;_token&quot;</span> value=<span class="string">&quot;&lt;?php echo csrf_token()?&gt;&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;img&quot;</span>&gt;</span><br><span class="line">    &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Up File&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    Controller</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Update the specified resource in storage.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  \Illuminate\Http\Request  $request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">Request <span class="variable">$request</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$path</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">file</span>(<span class="string">&#x27;img&#x27;</span>)-&gt;<span class="title function_ invoke__">store</span>(<span class="string">&#x27;avatars&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$path</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°çš„ Controller code ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡äº†è·å–åä¸º <code>img</code> è¡¨å•æ‰€ä¸Šä¼ çš„æ–‡ä»¶åå­˜å‚¨è‡³<code>avatars</code>å³<code>storage/app/avatars</code>ç›®å½•ä¸‹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯é»˜è®¤æƒ…å†µä¸‹ <code>store</code>æ–¹æ³•ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ID <strong>ä½œä¸ºæ–‡ä»¶åç§°</strong>ã€‚</p>
<p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210512031325.png"><br>å½“æˆ‘ä»¬ä¸Šä¼ å›¾åƒçš„æ—¶å€™ï¼Œå°†ä¼šåœ¨ <code>avatars</code>ç›®å½•ä¸‹æ˜¾ç¤ºå‡ºæˆ‘ä»¬åˆšåˆšä¸Šä¼ çš„å›¾åƒï¼Œå¹¶ç»è¿‡äº†<code>store</code>æ¥è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„IDä½œä¸ºæ–‡ä»¶åç§°ã€‚</p>
<h3 id="Tencent-cos"><a href="#Tencent-cos" class="headerlink" title="Tencent cos"></a>Tencent cos</h3><p><img src="https://49812933408852955071488026628034-1301075051.cos.ap-nanjing.myqcloud.com/20210512030931.png"><br>åœ¨ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº† Laravel æ–‡ä»¶çš„å­˜å‚¨ä¸­ï¼Œè¯´åˆ°äº†<strong>æ–‡ä»¶ç£ç›˜</strong>ï¼Œå…¶ä¸­ä¸»è¦å¯ä»¥è¿›è¡Œæœ¬åœ°å’Œè¿œç¨‹çš„æ–‡ä»¶ä¸Šä¼ ã€‚åœ¨ Laravel æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å›½å†…è¾ƒå¿«çš„ è…¾è®¯äº‘ COSï¼Œè€Œ Laravel é»˜è®¤çš„æ˜¯ AWS s3ï¼Œæœ¬æ–‡ä¸»è¦ä½¿ç”¨ Tencent cloud cosv5 ä½œä¸ºæ¼”ç¤ºï¼Œé¦–å…ˆéœ€è¦å®‰è£…ä¾èµ–ï¼š</p>
<h4 id="å®‰è£…ä¸é…ç½®"><a href="#å®‰è£…ä¸é…ç½®" class="headerlink" title="å®‰è£…ä¸é…ç½®"></a>å®‰è£…ä¸é…ç½®</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer require freyo/flysystem-qcloud-cos-v5</span><br></pre></td></tr></table></figure>

<p>å½“ä¸€åˆ‡å®Œæˆä¹‹åæƒ³ <code>config/app.php</code> æ–‡ä»¶å†…<code>providers</code>ä¸­æ·»åŠ ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="string">&#x27;providers&#x27;</span> =&gt; [</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * Laravel Framework Service Providers...</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    â€¦â€¦</span><br><span class="line">    <span class="title class_">Freyo\Flysystem\QcloudCOSv5\ServiceProvider</span>::<span class="variable language_">class</span>,</span><br></pre></td></tr></table></figure>

<h5 id="env-and-filesystems"><a href="#env-and-filesystems" class="headerlink" title="env and filesystems"></a>env and filesystems</h5><p>åœ¨ç„¶åå°†ä¸‹è¿° code ç²˜è´´å¹¶ä¿®æ”¹åˆ° <code>.end</code>æ–‡ä»¶ä¸­ï¼š</p>
<blockquote>
<p>éœ€è¦å‚è€ƒè…¾è®¯äº‘ COS ç®¡ç†å†…å’Œå¯†é’¥é¡µé¢è¿›è¡Œå¡«å†™</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">COSV5_APP_ID=</span><br><span class="line">COSV5_SECRET_ID= </span><br><span class="line">COSV5_SECRET_KEY=</span><br><span class="line">COSV5_TOKEN=null</span><br><span class="line">COSV5_TIMEOUT=60</span><br><span class="line">COSV5_CONNECT_TIMEOUT=60</span><br><span class="line">COSV5_BUCKET=</span><br><span class="line">COSV5_REGION=</span><br><span class="line">COSV5_CDN=</span><br><span class="line">COSV5_SCHEME=https</span><br><span class="line">COSV5_READ_FROM_CDN=false</span><br><span class="line">COSV5_CDN_KEY=</span><br><span class="line">COSV5_ENCRYPT=false</span><br></pre></td></tr></table></figure>

<p>å½“ä¿®æ”¹å®Œæˆåå°†ä¸‹è¿° code å¤åˆ¶åˆ° <code>config/filesystems.php</code> æ–‡ä»¶å†…çš„<code>disks</code>ä¸‹ï¼Œæ— éœ€ä¿®æ”¹ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;disks&#x27;</span> =&gt; [</span><br><span class="line">    â€¦â€¦</span><br><span class="line">    <span class="string">&#x27;cosv5&#x27;</span> =&gt; [</span><br><span class="line">        <span class="string">&#x27;driver&#x27;</span> =&gt; <span class="string">&#x27;cosv5&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;region&#x27;</span>          =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_REGION&#x27;</span>, <span class="string">&#x27;ap-guangzhou&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;credentials&#x27;</span>     =&gt; [</span><br><span class="line">            <span class="string">&#x27;appId&#x27;</span>     =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_APP_ID&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;secretId&#x27;</span>  =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_SECRET_ID&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;secretKey&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_SECRET_KEY&#x27;</span>),</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&#x27;timeout&#x27;</span>         =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_TIMEOUT&#x27;</span>, <span class="number">60</span>),</span><br><span class="line">        <span class="string">&#x27;connect_timeout&#x27;</span> =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_CONNECT_TIMEOUT&#x27;</span>, <span class="number">60</span>),</span><br><span class="line">        <span class="string">&#x27;bucket&#x27;</span>          =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_BUCKET&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;cdn&#x27;</span>             =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_CDN&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;scheme&#x27;</span>          =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_SCHEME&#x27;</span>, <span class="string">&#x27;https&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;read_from_cdn&#x27;</span>   =&gt; <span class="title function_ invoke__">env</span>(<span class="string">&#x27;COSV5_READ_FROM_CDN&#x27;</span>, <span class="literal">false</span>),</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>

<h4 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    Controller</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Update the specified resource in storage.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>  \Illuminate\Http\Request  $request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> \Illuminate\Http\Response</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params">Request <span class="variable">$request</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 1.è·å– åä¸º img è¡¨å•æ‰€æäº¤çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">         * 2.é€‰æ‹© cosv5 ä½œä¸ºæ–‡ä»¶ç£ç›˜</span></span><br><span class="line"><span class="comment">         * 3.å°† $file å­˜å‚¨è‡³ &quot;picture_class&quot; ç›®å½•ä¸‹</span></span><br><span class="line"><span class="comment">         * 4.ç”Ÿæˆå¹¶è¿”å›è¯¥æ–‡ä»¶çš„ urlã€‚</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line">        <span class="variable">$file</span> = <span class="variable">$request</span>-&gt;<span class="title function_ invoke__">file</span>(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line">        <span class="variable">$disk</span> = <span class="title class_">Storage</span>::<span class="title function_ invoke__">disk</span>(<span class="string">&#x27;cosv5&#x27;</span>);</span><br><span class="line">        <span class="variable">$file_content</span> = <span class="variable">$disk</span>-&gt;<span class="title function_ invoke__">put</span>(<span class="string">&quot;picture_class&quot;</span>,<span class="variable">$file</span>);</span><br><span class="line">        <span class="variable">$file_url</span> = <span class="variable">$disk</span>-&gt;<span class="title function_ invoke__">url</span>(<span class="variable">$file_content</span>);</span><br><span class="line">        <span class="keyword">return</span> (<span class="variable">$file_url</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ–‡ä»¶åç§°"><a href="#æ–‡ä»¶åç§°" class="headerlink" title="æ–‡ä»¶åç§°"></a>æ–‡ä»¶åç§°</h5><p>åœ¨ local ä¸€èŠ‚ä¸­æˆ‘ä»¬è¯´é“äº† <code>store</code>æ–¹æ³•ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ID <strong>ä½œä¸ºæ–‡ä»¶çš„åç§°</strong>ï¼Œå› æ­¤åœ¨æäº¤çš„æ—¶å€™å”¯ä¸€æ€§æ˜¯ä¿è¯äº†ï¼Œä½†æ˜¯å¯è¯»æ€§ä¼šå¤§å¤§ç¼©å°ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹è¿°å‡ ä¸ªæ–¹æ³•æ¥å¯¹æ–‡ä»¶åç§°è¿›è¡Œæ“ä½œï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
</tr>
</thead>
<tbody><tr>
<td>getClientOriginalName</td>
<td>è·å–åŸæ¥çš„æ–‡ä»¶å</td>
</tr>
<tr>
<td>getClientOriginalExtension</td>
<td>è·å–æ–‡ä»¶çš„æ‰©å±•å</td>
</tr>
<tr>
<td>getClientMimeType</td>
<td>æ–‡ä»¶çš„ç±»å‹</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$file = $request-&gt;file(&#x27;img&#x27;);</span><br><span class="line">$extension = $file-&gt;getClientOriginalName();</span><br><span class="line">$filename = date(&#x27;Y-m-d G_i_s&#x27;) . &quot;.&quot;.$extension;</span><br><span class="line"></span><br><span class="line">$disk = Storage::disk(&#x27;cosv5&#x27;);</span><br><span class="line">$file_content = $disk-&gt;putFileAs(&#x27;picture_class&#x27;,$file,$filename);</span><br><span class="line">$file_url = $disk-&gt;url($file_content);</span><br><span class="line">return $file_url;</span><br></pre></td></tr></table></figure>
<p>é™¤äº†ä¸Šè¿°çš„ getClient æ–¹æ³•å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…åˆ<code>date</code>æ–¹æ³•æ¥å…±åŒå®Œæˆï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ <code>data</code>çš„ <strong>Y-m-d G_i_s</strong> æ¥è¿›è¡Œå®ç°ï¼Œåˆ†åˆ«è¡¨ç¤º <strong>å¹´ä»½-æœˆä»½-æ—¥æœŸ å°æ—¶_åˆ†å‘¨_ç§’æ•°</strong> ç­‰ï¼Œæœ€ç»ˆè¾“å‡º <strong>2021-05-12 23_46_00</strong>ã€‚</p>

	

	

</article>




	<article>
	
		<h1><a href="/2022/04/21/php/laravel/2.Laravel æ–‡ä»¶ç»“æ„/">Laravel æ–‡ä»¶ç»“æ„</a></h1>
	
	<div class="article__infos">
		<span class="article__date">2022-04-21</span><br />
		
		
			<span class="article__tags">
			  	<a class="article__tag-none-link" href="/tags/laravel/" rel="tag">laravel</a> <a class="article__tag-none-link" href="/tags/php/" rel="tag">php</a>
			</span>
		
	</div>

	

	
		<p>åœ¨ä¸åŒçš„å¼€å‘ç¯å¢ƒå’Œé¡¹ç›®ä¸­ï¼Œæ–‡ä»¶ç»“æ„æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ä¸€ç‚¹ï¼Œå¦‚mavençš„æ–‡ä»¶ç»“æ„å¯ä»¥åˆ†ä¸ºsrc&#x2F;main&#x2F;ç­‰ç­‰ï¼Œåœ¨è¿™äº›ç»“æ„ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„â€œæ½œè§„åˆ™â€ã€‚å¦‚ä½ åœ¨å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œè¿˜åœ¨æœ¬åœ°æµ‹è¯•é˜¶æ®µï¼Œè€Œä½ å´å°†é¡¹ç›®æºä»£ç æ”¾åˆ°äº†&#x2F;src&#x2F;mainç›®å½•ä¸‹ï¼Œè¿™åˆ™ä¼šè®©åŒäº‹è§‰å¾—ä½ æœ‰ç‚¹é—®é¢˜ã€‚Laravelçš„æ–‡ä»¶ç»“æ„ä¹Ÿä¸€æ ·ï¼Œå¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>DA</th>
<th>FA</th>
</tr>
</thead>
<tbody><tr>
<td>app</td>
<td>ç”¨äºåŒ…å«åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒä»£ç </td>
<td>å¼€å‘é¡¹ç›®çš„æ—¶å€™æ‰€æœ‰ç±»éƒ½å°†å­˜æ”¾äºæ­¤</td>
</tr>
<tr>
<td></td>
<td>Console</td>
<td>åŒ…å«åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰è‡ªå®šä¹‰çš„Artisanå‘½ä»¤</td>
</tr>
<tr>
<td></td>
<td>Events*</td>
<td>é»˜è®¤æƒ…å†µå¹¶ä¸å­˜åœ¨ï¼Œä¸»è¦ç”¨äºæ”¾ç½®<strong>äº‹ä»¶ç±»</strong>ï¼Œç”¨äºè­¦å‘Šåº”ç”¨ç¨‹åºå’Œå…¶ä»–éƒ¨åˆ†å‘ç”Ÿäº†ä¸€ä¸ªç»™å®šçš„æ“ä½œ</td>
</tr>
<tr>
<td></td>
<td>Exceptions</td>
<td>åŒ…å«åº”ç”¨ç¨‹åºçš„å¼‚å¸¸å¤„ç†ï¼Œä¹Ÿå¯æ”¾ç½®åº”ç”¨ç¨‹åºè·‘å‡ºçš„ä»»ä½•å¼‚å¸¸</td>
</tr>
<tr>
<td></td>
<td>Http</td>
<td>åŒ…å«<strong>æ§åˆ¶å™¨ã€ä¸­é—´ä»¶ã€è¡¨å•</strong>è¯·æ±‚ï¼Œå¤„ç†åº”ç”¨ç¨‹åºè¯·æ±‚çš„æ‰€æœ‰é€»è¾‘åŸºæœ¬éƒ½å°†æ”¾ç½®åœ¨æ­¤ç›®å½•</td>
</tr>
<tr>
<td></td>
<td>Jobs*</td>
<td>jobsç›®å½•æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹å¹¶ä¸å­˜åœ¨çš„ï¼Œç”¨äºåŒ…å«åº”ç”¨ç¨‹åºçš„é˜Ÿåˆ—</td>
</tr>
<tr>
<td></td>
<td>Listeners*</td>
<td>é»˜è®¤æƒ…å†µä¸‹å¹¶ä¸å­˜åœ¨ï¼Œä¸»è¦ç”¨äºåŒ…å«äº‹ä»¶å¤„ç†ç±»</td>
</tr>
<tr>
<td></td>
<td>Mail*</td>
<td>Mailç›®å½•å¹¶ä¸å­˜åœ¨ï¼Œä¸»è¦ç”¨äºåŒ…å«åº”ç”¨ç¨‹åºå‘é€é‚®ä»¶çš„ç±»</td>
</tr>
<tr>
<td></td>
<td>Notifications*</td>
<td>é»˜è®¤æƒ…å†µä¸‹ä¸å­˜åœ¨ï¼Œç”¨äºåŒ…å«åº”ç”¨ç¨‹åºå‘é€çš„æ‰€æœ‰äº‹ç‰©åŒå¿—</td>
</tr>
<tr>
<td></td>
<td>Policies*</td>
<td>é»˜è®¤æƒ…å†µä¸‹å¹¶ä¸å­˜åœ¨ï¼Œä¸»è¦ç”¨äºåŒ…å«æˆæƒç­–ç•¥ç±»ï¼Œå³ç”¨æˆ·æ˜¯å¦å¯ä»¥å¯¹ä¸€ä¸ªèµ„æºè¿›è¡Œè®¿é—®ç­‰</td>
</tr>
<tr>
<td></td>
<td>Providers</td>
<td>ç”¨äºåŒ…å«åº”ç”¨ç¨‹åºçš„æ‰€æœ‰æœåŠ¡æä¾›è€…ï¼ŒæœåŠ¡æä¾›è€…å°†é€šè¿‡æœåŠ¡å®¹å™¨ç»‘å®šæœåŠ¡å¼•å¯¼ç¨‹åºã€‚åœ¨æ–°çš„Laravelåº”ç”¨ä¸­ï¼Œæ­¤é¡¹ç›®æ¯å•å°†ä¼šåŒ…å«ä¸€äº›åº”ç”¨æä¾›è€…ï¼Œå¯æ ¹æ®è‡ªå·±çš„éœ€æ±‚å°†è‡ªå·±æ·»åŠ åˆ°æ­¤æ¯å•ä¸­</td>
</tr>
<tr>
<td></td>
<td>Rules*</td>
<td>é»˜è®¤æƒ…å†µå¹¶ä¸å­˜åœ¨ï¼Œä¸»è¦åŒ…å«åº”ç”¨ç¨‹åºè‡ªå®šä¹‰éªŒè¯è§„åˆ™å¯¹è±¡</td>
</tr>
<tr>
<td>bootstrap</td>
<td>ä¸»è¦åŒ…å«app.phpä»¥åŠcacheç›®å½•</td>
<td>cacheç”¨äºå­˜æ”¾æ¡†æ¶æ‰€è‡ªåŠ¨ç”Ÿæˆæ¥æå‡æ•´ä½“æ€§èƒ½æ–‡ä»¶</td>
</tr>
<tr>
<td>Config</td>
<td>å³é…ç½®åŒ…å«äº†é…ç½®æ–‡ä»¶</td>
<td>å¯é˜…è¯»è¿™äº›é…ç½®æ–‡ä»¶æ¥æŒæ¡Laravel</td>
</tr>
<tr>
<td>database</td>
<td>å³æ•°æ®å¡«å……å’Œæ¨¡å‹å·¥å‚ç±»</td>
<td>å½“ç„¶é¡¾åæ€ä¹‰ä½ ä¹Ÿå¯ä»¥ç”¨äºæ”¾ç½®æ•°æ®åº“æ–‡ä»¶ï¼Ÿ</td>
</tr>
<tr>
<td>public</td>
<td>publicç›®å½•åŒ…å«äº†é¦–é¡µæ–‡ä»¶<code>index.php</code></td>
<td>è¿˜å¯ç”¨äºæ”¾ç½®èµ„æºæ–‡ä»¶å¦‚<code>js/css/img</code>ç­‰</td>
</tr>
<tr>
<td>resources</td>
<td>åŒ…å«äº†å›¾åƒå’Œä¸€äº›æœªç¼–è¯‘çš„æ–‡ä»¶</td>
<td>ä½ å¯ç”¨äºå­˜æ”¾SASSè¿™äº›</td>
</tr>
<tr>
<td>routes</td>
<td>routes ç›®å½•åŒ…å«äº†æ‰€æœ‰çš„è·¯ç”±å®šä¹‰ç±»</td>
<td>æ­¤å¤–è¿˜æœ‰é»˜è®¤å­˜åœ¨çš„<code>api.php  channels.php  console.php  web.php</code>è·¯ç”±æ–‡ä»¶ã€‚</td>
</tr>
<tr>
<td></td>
<td>web.php</td>
<td>æ”¾ç½®åœ¨äº†webä¸­é—´ä»¶ç»„çš„è·¯ç”±ï¼Œæä¾›äº†ä¼šè¯çŠ¶æ€ã€CSRFé˜²æŠ¤å’ŒcookieåŠ å¯†</td>
</tr>
<tr>
<td></td>
<td>api.php</td>
<td>æ”¾ç½®åœ¨apiä¸­é—´ä»¶ç»„çš„è·¯ç”±ï¼Œæä¾›é¢‘ç‡é™åˆ¶ï¼Œé€šè¿‡è·¯ç”±è¿›å…¥åº”ç”¨è¯·æ±‚é€šè¿‡ä»¤ç‰Œè¿›è¡Œè®¤è¯</td>
</tr>
<tr>
<td></td>
<td>console.php</td>
<td>å®šä¹‰æ‰€æœ‰åŸºäºç»ˆç«¯å‘½ä»¤é—­åŒ…æ±‰ä¹¦çš„æ–‡ä»¶ï¼Œæ¯ä¸ªé—­åŒ…æ±‰ä¹¦éƒ½è¢«ç»‘å®šåˆ°äº†ä¸€ä¸ªå‘½ä»¤ç¤ºä¾‹ä¸”å…è®¸å‘½ä»¤å·IOæ–¹æ³•çš„è¿›è¡Œç®€å•äº¤äº’</td>
</tr>
<tr>
<td>storage</td>
<td>å“Ÿç”¨äºå­˜å‚¨ç¼–è¯‘åçš„bladeã€sessionã€ç¼“å­˜ã€æ¡†æ¶ç”Ÿæˆçš„æ–‡ä»¶</td>
<td>å†…åŒ…å«äº†<code>appã€frameworkã€logs</code>ä¸‰ä¸ªå­ç›®å½•ï¼Œåˆ†åˆ«å¯¹åº”<strong>åº”ç”¨ç”Ÿæˆã€æ¡†æ¶ç”Ÿæˆã€æ—¥å¿—ç”Ÿæˆ</strong></td>
</tr>
<tr>
<td></td>
<td>storage&#x2F;app&#x2F;public</td>
<td>ç”¨äºåŒ…å«ç”¨æˆ·ç”Ÿæˆçš„æ–‡ä»¶</td>
</tr>
<tr>
<td>tests</td>
<td>å³ç”¨äºåŒ…å«è‡ªåŠ¨åŒ–æµ‹è¯•æ–‡ä»¶</td>
<td>æ­¤å¤„æ½œè§„åˆ™æ˜¯æ¯ä¸ªè‡ªæµ‹è¯•ç±»éƒ½ä»¥<code>test</code>ä½œä¸ºåç¼€</td>
</tr>
<tr>
<td>vendor</td>
<td>åŒ…å«é¡¹ç›®ä¸­æ‰€æœ‰çš„ composer ä¾èµ–åŒ…</td>
<td></td>
</tr>
</tbody></table>

	

	

</article>





	<span class="different-posts">ğŸ“– <a href="/page/29">more posts</a> ğŸ“–</span>



	</main>

	<footer class="footer">
	<div class="footer-content">
		
	      <div class="footer__element">
	<p>æ¬¢è¿æ¥åˆ°æˆ‘çš„ blog <br><br> é€šè¿‡ <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>+<a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a> è¿›è¡Œæ„å»ºçš„ï¼Œå­˜æ”¾åœ¨ <a target="_blank" rel="noopener" href="https://github.com/vendanges/vendanges.github.io">Github</a> ä¸Šã€‚</p>
</div>

	    
	      <div class="footer__element">
	<h5>Check out</h5>
	<ul class="footer-links">
		<li class="footer-links__link"><a href="/archives">Archive</a></li>
		
		  <li class="footer-links__link"><a href="/atom.xml">RSS</a></li>
	    
		<li class="footer-links__link"><a href="/about">about page</a></li>
		<li class="footer-links__link"><a href="/tags">Tags</a></li>
		<li class="footer-links__link"><a href="/categories">Categories</a></li>
	</ul>
</div>

	    

		<div class="footer-credit">
			<span>Â© 2022 John Doe | Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> | Theme <a target="_blank" rel="noopener" href="https://github.com/HoverBaum/meilidu-hexo">MeiliDu</a></span>
		</div>

	</div>


</footer>



</body>

</html>
